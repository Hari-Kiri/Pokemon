{"ast":null,"code":"import _createClass from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _possibleConstructorReturn from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _assertThisInitialized from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, now, getTranslate } from '../../shared/utils.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport Modal from '../modal/modal-class.js';\n\nvar Sheet = /*#__PURE__*/function (_Modal) {\n  _inherits(Sheet, _Modal);\n\n  var _super = _createSuper(Sheet);\n\n  function Sheet(app, params) {\n    var _this;\n\n    _classCallCheck(this, Sheet);\n\n    var extendedParams = extend({\n      on: {}\n    }, app.params.sheet, params); // Extends with open/close Modal methods;\n\n    _this = _super.call(this, app, extendedParams);\n\n    var sheet = _assertThisInitialized(_this);\n\n    var window = getWindow();\n    var document = getDocument();\n    var support = getSupport();\n    var device = getDevice();\n    sheet.params = extendedParams;\n\n    if (typeof sheet.params.backdrop === 'undefined') {\n      sheet.params.backdrop = app.theme !== 'ios';\n    } // Find Element\n\n\n    var $el;\n\n    if (!sheet.params.el) {\n      $el = $(sheet.params.content).filter(function (node) {\n        return node.nodeType === 1;\n      }).eq(0);\n    } else {\n      $el = $(sheet.params.el).eq(0);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return _possibleConstructorReturn(_this, $el[0].f7Modal);\n    }\n\n    if ($el.length === 0) {\n      return _possibleConstructorReturn(_this, sheet.destroy());\n    }\n\n    var $backdropEl;\n\n    if (sheet.params.backdrop && sheet.params.backdropEl) {\n      $backdropEl = $(sheet.params.backdropEl);\n    } else if (sheet.params.backdrop) {\n      if (sheet.params.backdropUnique) {\n        $backdropEl = $('<div class=\"sheet-backdrop sheet-backdrop-unique\"></div>');\n        sheet.$containerEl.append($backdropEl);\n      } else {\n        $backdropEl = sheet.$containerEl.children('.sheet-backdrop');\n      }\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"sheet-backdrop\"></div>');\n        sheet.$containerEl.append($backdropEl);\n      }\n    }\n\n    extend(sheet, {\n      app: app,\n      push: $el.hasClass('sheet-modal-push') || sheet.params.push,\n      $el: $el,\n      el: $el[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'sheet',\n      $htmlEl: $('html')\n    });\n\n    if (sheet.params.push) {\n      $el.addClass('sheet-modal-push');\n    }\n\n    var $pageContentEl;\n\n    function scrollToElementOnOpen() {\n      var $scrollEl = $(sheet.params.scrollToEl).eq(0);\n      if ($scrollEl.length === 0) return;\n      $pageContentEl = $scrollEl.parents('.page-content');\n      if ($pageContentEl.length === 0) return;\n      var paddingTop = parseInt($pageContentEl.css('padding-top'), 10);\n      var paddingBottom = parseInt($pageContentEl.css('padding-bottom'), 10);\n      var pageHeight = $pageContentEl[0].offsetHeight - paddingTop - $el.height();\n      var pageScrollHeight = $pageContentEl[0].scrollHeight - paddingTop - $el.height();\n      var pageScroll = $pageContentEl.scrollTop();\n      var newPaddingBottom;\n      var scrollElTop = $scrollEl.offset().top - paddingTop + $scrollEl[0].offsetHeight;\n\n      if (scrollElTop > pageHeight) {\n        var scrollTop = pageScroll + scrollElTop - pageHeight;\n\n        if (scrollTop + pageHeight > pageScrollHeight) {\n          newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n\n          if (pageHeight === pageScrollHeight) {\n            newPaddingBottom = $el.height();\n          }\n\n          $pageContentEl.css({\n            'padding-bottom': \"\".concat(newPaddingBottom, \"px\")\n          });\n        }\n\n        $pageContentEl.scrollTop(scrollTop, 300);\n      }\n    }\n\n    function scrollToElementOnClose() {\n      if ($pageContentEl && $pageContentEl.length > 0) {\n        $pageContentEl.css({\n          'padding-bottom': ''\n        });\n      }\n    }\n\n    function handleClick(e) {\n      var target = e.target;\n      var $target = $(target);\n      var keyboardOpened = !device.desktop && device.cordova && (window.Keyboard && window.Keyboard.isVisible || window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.isVisible);\n      if (keyboardOpened) return;\n\n      if ($target.closest(sheet.el).length === 0) {\n        if (sheet.params.closeByBackdropClick && sheet.params.backdrop && sheet.backdropEl && sheet.backdropEl === target) {\n          sheet.close();\n        } else if (sheet.params.closeByOutsideClick) {\n          sheet.close();\n        }\n      }\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === 27 && sheet.params.closeOnEscape) {\n        sheet.close();\n      }\n    }\n\n    var pushOffset;\n\n    function pushViewScale(offset) {\n      return (app.height - offset * 2) / app.height;\n    }\n\n    var isTouched = false;\n    var startTouch;\n    var currentTouch;\n    var isScrolling;\n    var touchStartTime;\n    var touchesDiff;\n    var isMoved = false;\n    var isTopSheetModal;\n    var swipeStepTranslate;\n    var startTranslate;\n    var currentTranslate;\n    var sheetElOffsetHeight;\n    var minTranslate;\n    var maxTranslate;\n    var $pushViewEl;\n    var pushBorderRadius;\n    var sheetPageContentEl;\n    var sheetPageContentScrollTop;\n    var sheetPageContentScrollHeight;\n    var sheetPageContentOffsetHeight;\n\n    function handleTouchStart(e) {\n      if (isTouched || !(sheet.params.swipeToClose || sheet.params.swipeToStep)) return;\n\n      if (sheet.params.swipeHandler && $(e.target).closest(sheet.params.swipeHandler).length === 0) {\n        return;\n      }\n\n      isTouched = true;\n      isMoved = false;\n      startTouch = {\n        x: e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY\n      };\n      touchStartTime = now();\n      isScrolling = undefined;\n      isTopSheetModal = $el.hasClass('sheet-modal-top');\n\n      if (!sheet.params.swipeHandler && e.type === 'touchstart') {\n        sheetPageContentEl = $(e.target).closest('.page-content')[0];\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      currentTouch = {\n        x: e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY\n      };\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(currentTouch.x - startTouch.x) > Math.abs(currentTouch.y - startTouch.y));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      touchesDiff = startTouch.y - currentTouch.y;\n      var direction = touchesDiff < 0 ? 'to-bottom' : 'to-top';\n\n      if (!isMoved) {\n        if (sheetPageContentEl && !$el.hasClass('modal-in-swipe-step')) {\n          sheetPageContentScrollTop = sheetPageContentEl.scrollTop;\n          sheetPageContentScrollHeight = sheetPageContentEl.scrollHeight;\n          sheetPageContentOffsetHeight = sheetPageContentEl.offsetHeight;\n\n          if (!(sheetPageContentScrollHeight === sheetPageContentOffsetHeight) && !(direction === 'to-bottom' && sheetPageContentScrollTop === 0) && !(direction === 'to-top' && sheetPageContentScrollTop === sheetPageContentScrollHeight - sheetPageContentOffsetHeight)) {\n            $el.transform('');\n            isTouched = false;\n            isMoved = false;\n            return;\n          }\n        }\n\n        if (sheet.push && pushOffset) {\n          $pushViewEl = app.$el.children('.view, .views');\n        }\n\n        sheetElOffsetHeight = $el[0].offsetHeight;\n        startTranslate = getTranslate($el[0], 'y');\n\n        if (isTopSheetModal) {\n          minTranslate = sheet.params.swipeToClose ? -sheetElOffsetHeight : -swipeStepTranslate;\n          maxTranslate = 0;\n        } else {\n          minTranslate = 0;\n          maxTranslate = sheet.params.swipeToClose ? sheetElOffsetHeight : swipeStepTranslate;\n        }\n\n        isMoved = true;\n      }\n\n      currentTranslate = startTranslate - touchesDiff;\n      currentTranslate = Math.min(Math.max(currentTranslate, minTranslate), maxTranslate);\n      e.preventDefault();\n\n      if (sheet.push && pushOffset) {\n        var progress = (currentTranslate - startTranslate) / sheetElOffsetHeight;\n\n        if (sheet.params.swipeToStep) {\n          if (isTopSheetModal) {\n            progress = currentTranslate / swipeStepTranslate;\n          } else {\n            progress = 1 - (swipeStepTranslate - currentTranslate) / swipeStepTranslate;\n          }\n        }\n\n        progress = Math.abs(progress);\n        progress = Math.min(Math.max(progress, 0), 1);\n        var pushProgress = 1 - progress;\n        var scale = 1 - (1 - pushViewScale(pushOffset)) * pushProgress;\n        $pushViewEl.transition(0).forEach(function (el) {\n          el.style.setProperty('transform', \"translate3d(0,0,0) scale(\".concat(scale, \")\"), 'important');\n        });\n\n        if (sheet.params.swipeToStep) {\n          $pushViewEl.css('border-radius', \"\".concat(pushBorderRadius * pushProgress, \"px\"));\n        }\n      }\n\n      $el.transition(0).transform(\"translate3d(0,\".concat(currentTranslate, \"px,0)\"));\n\n      if (sheet.params.swipeToStep) {\n        var _progress;\n\n        if (isTopSheetModal) {\n          _progress = 1 - currentTranslate / swipeStepTranslate;\n        } else {\n          _progress = (swipeStepTranslate - currentTranslate) / swipeStepTranslate;\n        }\n\n        _progress = Math.min(Math.max(_progress, 0), 1);\n        $el.trigger('sheet:stepprogress', _progress);\n        sheet.emit('local::stepProgress sheetStepProgress', sheet, _progress);\n      }\n    }\n\n    function handleTouchEnd() {\n      isTouched = false;\n\n      if (!isMoved) {\n        return;\n      }\n\n      isMoved = false;\n      $el.transform('').transition('');\n\n      if (sheet.push && pushOffset) {\n        $pushViewEl.transition('').transform('');\n        $pushViewEl.css('border-radius', '');\n      }\n\n      var direction = touchesDiff < 0 ? 'to-bottom' : 'to-top';\n      var diff = Math.abs(touchesDiff);\n      if (diff === 0 || currentTranslate === startTranslate) return;\n      var timeDiff = new Date().getTime() - touchStartTime;\n\n      if (!sheet.params.swipeToStep) {\n        if (direction !== (isTopSheetModal ? 'to-top' : 'to-bottom')) {\n          return;\n        }\n\n        if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > sheetElOffsetHeight / 2) {\n          sheet.close();\n        }\n\n        return;\n      }\n\n      var openDirection = isTopSheetModal ? 'to-bottom' : 'to-top';\n      var closeDirection = isTopSheetModal ? 'to-top' : 'to-bottom';\n      var absCurrentTranslate = Math.abs(currentTranslate);\n      var absSwipeStepTranslate = Math.abs(swipeStepTranslate);\n\n      if (timeDiff < 300 && diff > 10) {\n        if (direction === openDirection && absCurrentTranslate < absSwipeStepTranslate) {\n          // open step\n          $el.removeClass('modal-in-swipe-step');\n          $el.trigger('sheet:stepprogress', 1);\n          sheet.emit('local::stepProgress sheetStepProgress', sheet, 1);\n          sheet.emit('local::_swipeStep', false);\n          $el.trigger('sheet:stepopen');\n          sheet.emit('local::stepOpen sheetStepOpen', sheet);\n\n          if (sheet.push && pushOffset) {\n            sheet.$htmlEl[0].style.setProperty('--f7-sheet-push-scale', pushViewScale(pushOffset));\n            $pushViewEl.css('border-radius', '');\n          }\n        }\n\n        if (direction === closeDirection && absCurrentTranslate > absSwipeStepTranslate) {\n          // close sheet\n          if (sheet.params.swipeToClose) {\n            sheet.close();\n          } else {\n            // close step\n            $el.addClass('modal-in-swipe-step');\n            $el.trigger('sheet:stepprogress', 0);\n            sheet.emit('local::stepProgress sheetStepProgress', sheet, 0);\n            sheet.emit('local::_swipeStep', true);\n            $el.trigger('sheet:stepclose');\n            sheet.emit('local::stepClose sheetStepClose', sheet);\n\n            if (sheet.push && pushOffset) {\n              sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n              $pushViewEl.css('border-radius', '0px');\n            }\n          }\n        }\n\n        if (direction === closeDirection && absCurrentTranslate <= absSwipeStepTranslate) {\n          // close step\n          $el.addClass('modal-in-swipe-step');\n          $el.trigger('sheet:stepprogress', 0);\n          sheet.emit('local::stepProgress sheetStepProgress', sheet, 0);\n          sheet.emit('local::_swipeStep', true);\n          $el.trigger('sheet:stepclose');\n          sheet.emit('local::stepClose sheetStepClose', sheet);\n\n          if (sheet.push && pushOffset) {\n            sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n            $pushViewEl.css('border-radius', '0px');\n          }\n        }\n\n        return;\n      }\n\n      if (timeDiff >= 300) {\n        var stepOpened = !$el.hasClass('modal-in-swipe-step');\n\n        if (!stepOpened) {\n          if (absCurrentTranslate < absSwipeStepTranslate / 2) {\n            // open step\n            $el.removeClass('modal-in-swipe-step');\n            $el.trigger('sheet:stepprogress', 1);\n            sheet.emit('local::stepProgress sheetStepProgress', sheet, 1);\n            sheet.emit('local::_swipeStep', false);\n            $el.trigger('sheet:stepopen');\n            sheet.emit('local::stepOpen sheetStepOpen', sheet);\n\n            if (sheet.push && pushOffset) {\n              sheet.$htmlEl[0].style.setProperty('--f7-sheet-push-scale', pushViewScale(pushOffset));\n              $pushViewEl.css('border-radius', '');\n            }\n          } else if (absCurrentTranslate - absSwipeStepTranslate > (sheetElOffsetHeight - absSwipeStepTranslate) / 2) {\n            // close sheet\n            if (sheet.params.swipeToClose) sheet.close();\n          }\n        } else if (stepOpened) {\n          if (absCurrentTranslate > absSwipeStepTranslate + (sheetElOffsetHeight - absSwipeStepTranslate) / 2) {\n            // close sheet\n            if (sheet.params.swipeToClose) sheet.close();\n          } else if (absCurrentTranslate > absSwipeStepTranslate / 2) {\n            // close step\n            $el.addClass('modal-in-swipe-step');\n            $el.trigger('sheet:stepprogress', 0);\n            sheet.emit('local::stepProgress sheetStepProgress', sheet, 0);\n            sheet.emit('local::_swipeStep', true);\n            $el.trigger('sheet:stepclose');\n            sheet.emit('local::stepClose sheetStepClose', sheet);\n\n            if (sheet.push && pushOffset) {\n              sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n              $pushViewEl.css('border-radius', '0px');\n            }\n          }\n        }\n      }\n    }\n\n    sheet.setSwipeStep = function setSwipeStep(byResize) {\n      if (byResize === void 0) {\n        byResize = true;\n      }\n\n      var $swipeStepEl = $el.find('.sheet-modal-swipe-step').eq(0);\n      if (!$swipeStepEl.length) return;\n\n      if ($el.hasClass('sheet-modal-top')) {\n        swipeStepTranslate = -($swipeStepEl.offset().top - $el.offset().top + $swipeStepEl[0].offsetHeight);\n      } else {\n        swipeStepTranslate = $el[0].offsetHeight - ($swipeStepEl.offset().top - $el.offset().top + $swipeStepEl[0].offsetHeight);\n      }\n\n      $el[0].style.setProperty('--f7-sheet-swipe-step', \"\".concat(swipeStepTranslate, \"px\"));\n\n      if (!byResize) {\n        $el.addClass('modal-in-swipe-step');\n        sheet.emit('local::_swipeStep', true);\n      }\n    };\n\n    function onResize() {\n      sheet.setSwipeStep(true);\n    }\n\n    var passive = support.passiveListener ? {\n      passive: true\n    } : false;\n\n    if (sheet.params.swipeToClose || sheet.params.swipeToStep) {\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      sheet.once('sheetDestroy', function () {\n        $el.off(app.touchEvents.start, handleTouchStart, passive);\n        app.off('touchmove', handleTouchMove);\n        app.off('touchend:passive', handleTouchEnd);\n      });\n    }\n\n    sheet.on('open', function () {\n      if (sheet.params.closeOnEscape) {\n        $(document).on('keydown', onKeyDown);\n      }\n\n      $el.prevAll('.popup.modal-in').addClass('popup-behind');\n\n      if (sheet.params.swipeToStep) {\n        sheet.setSwipeStep(false);\n        app.on('resize', onResize);\n      }\n\n      if (sheet.params.scrollToEl) {\n        scrollToElementOnOpen();\n      }\n\n      if (sheet.push) {\n        pushOffset = parseInt($el.css('--f7-sheet-push-offset'), 10);\n        if (Number.isNaN(pushOffset)) pushOffset = 0;\n\n        if (pushOffset) {\n          $el.addClass('sheet-modal-push');\n          sheet.$htmlEl.addClass('with-modal-sheet-push');\n\n          if (!sheet.params.swipeToStep) {\n            sheet.$htmlEl[0].style.setProperty('--f7-sheet-push-scale', pushViewScale(pushOffset));\n          } else {\n            $pushViewEl = app.$el.children('.view, .views');\n            pushBorderRadius = parseFloat($el.css(\"border-\".concat(isTopSheetModal ? 'bottom' : 'top', \"-left-radius\")));\n            $pushViewEl.css('border-radius', '0px');\n          }\n        }\n      }\n    });\n    sheet.on('opened', function () {\n      if (sheet.params.closeByOutsideClick || sheet.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    sheet.on('close', function () {\n      if (sheet.params.swipeToStep) {\n        $el.removeClass('modal-in-swipe-step');\n        sheet.emit('local::_swipeStep', false);\n        app.off('resize', onResize);\n      }\n\n      if (sheet.params.closeOnEscape) {\n        $(document).off('keydown', onKeyDown);\n      }\n\n      if (sheet.params.scrollToEl) {\n        scrollToElementOnClose();\n      }\n\n      if (sheet.params.closeByOutsideClick || sheet.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n\n      $el.prevAll('.popup.modal-in').eq(0).removeClass('popup-behind');\n\n      if (sheet.push && pushOffset) {\n        sheet.$htmlEl.removeClass('with-modal-sheet-push');\n        sheet.$htmlEl.addClass('with-modal-sheet-push-closing');\n      }\n    });\n    sheet.on('closed', function () {\n      if (sheet.push && pushOffset) {\n        sheet.$htmlEl.removeClass('with-modal-sheet-push-closing');\n        sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n      }\n    });\n\n    sheet.stepOpen = function stepOpen() {\n      $el.removeClass('modal-in-swipe-step');\n      sheet.emit('local::_swipeStep', false);\n\n      if (sheet.push) {\n        if (!pushOffset) {\n          pushOffset = parseInt($el.css('--f7-sheet-push-offset'), 10);\n          if (Number.isNaN(pushOffset)) pushOffset = 0;\n        }\n\n        if (pushOffset) {\n          sheet.$htmlEl[0].style.setProperty('--f7-sheet-push-scale', pushViewScale(pushOffset));\n        }\n      }\n    };\n\n    sheet.stepClose = function stepClose() {\n      $el.addClass('modal-in-swipe-step');\n      sheet.emit('local::_swipeStep', true);\n\n      if (sheet.push) {\n        sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n      }\n    };\n\n    sheet.stepToggle = function stepToggle() {\n      $el.toggleClass('modal-in-swipe-step');\n      sheet.emit('local::_swipeStep', $el.hasClass('modal-in-swipe-step'));\n    };\n\n    $el[0].f7Modal = sheet;\n    return _possibleConstructorReturn(_this, sheet);\n  }\n\n  return _createClass(Sheet);\n}(Modal);\n\nexport default Sheet;","map":{"version":3,"names":["getWindow","getDocument","$","extend","now","getTranslate","getSupport","getDevice","Modal","Sheet","app","params","extendedParams","on","sheet","window","document","support","device","backdrop","theme","$el","el","content","filter","node","nodeType","eq","length","f7Modal","destroy","$backdropEl","backdropEl","backdropUnique","$containerEl","append","children","push","hasClass","type","$htmlEl","addClass","$pageContentEl","scrollToElementOnOpen","$scrollEl","scrollToEl","parents","paddingTop","parseInt","css","paddingBottom","pageHeight","offsetHeight","height","pageScrollHeight","scrollHeight","pageScroll","scrollTop","newPaddingBottom","scrollElTop","offset","top","scrollToElementOnClose","handleClick","e","target","$target","keyboardOpened","desktop","cordova","Keyboard","isVisible","plugins","closest","closeByBackdropClick","close","closeByOutsideClick","onKeyDown","keyCode","closeOnEscape","pushOffset","pushViewScale","isTouched","startTouch","currentTouch","isScrolling","touchStartTime","touchesDiff","isMoved","isTopSheetModal","swipeStepTranslate","startTranslate","currentTranslate","sheetElOffsetHeight","minTranslate","maxTranslate","$pushViewEl","pushBorderRadius","sheetPageContentEl","sheetPageContentScrollTop","sheetPageContentScrollHeight","sheetPageContentOffsetHeight","handleTouchStart","swipeToClose","swipeToStep","swipeHandler","x","targetTouches","pageX","y","pageY","undefined","handleTouchMove","Math","abs","direction","transform","min","max","preventDefault","progress","pushProgress","scale","transition","forEach","style","setProperty","trigger","emit","handleTouchEnd","diff","timeDiff","Date","getTime","openDirection","closeDirection","absCurrentTranslate","absSwipeStepTranslate","removeClass","removeProperty","stepOpened","setSwipeStep","byResize","$swipeStepEl","find","onResize","passive","passiveListener","touchEvents","start","once","off","prevAll","Number","isNaN","parseFloat","stepOpen","stepClose","stepToggle","toggleClass"],"sources":["/root/Pokemon/ui/node_modules/framework7/components/sheet/sheet-class.js"],"sourcesContent":["import { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, now, getTranslate } from '../../shared/utils.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport Modal from '../modal/modal-class.js';\n\nclass Sheet extends Modal {\n  constructor(app, params) {\n    const extendedParams = extend({\n      on: {}\n    }, app.params.sheet, params); // Extends with open/close Modal methods;\n\n    super(app, extendedParams);\n    const sheet = this;\n    const window = getWindow();\n    const document = getDocument();\n    const support = getSupport();\n    const device = getDevice();\n    sheet.params = extendedParams;\n\n    if (typeof sheet.params.backdrop === 'undefined') {\n      sheet.params.backdrop = app.theme !== 'ios';\n    } // Find Element\n\n\n    let $el;\n\n    if (!sheet.params.el) {\n      $el = $(sheet.params.content).filter(node => node.nodeType === 1).eq(0);\n    } else {\n      $el = $(sheet.params.el).eq(0);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return $el[0].f7Modal;\n    }\n\n    if ($el.length === 0) {\n      return sheet.destroy();\n    }\n\n    let $backdropEl;\n\n    if (sheet.params.backdrop && sheet.params.backdropEl) {\n      $backdropEl = $(sheet.params.backdropEl);\n    } else if (sheet.params.backdrop) {\n      if (sheet.params.backdropUnique) {\n        $backdropEl = $('<div class=\"sheet-backdrop sheet-backdrop-unique\"></div>');\n        sheet.$containerEl.append($backdropEl);\n      } else {\n        $backdropEl = sheet.$containerEl.children('.sheet-backdrop');\n      }\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"sheet-backdrop\"></div>');\n        sheet.$containerEl.append($backdropEl);\n      }\n    }\n\n    extend(sheet, {\n      app,\n      push: $el.hasClass('sheet-modal-push') || sheet.params.push,\n      $el,\n      el: $el[0],\n      $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'sheet',\n      $htmlEl: $('html')\n    });\n\n    if (sheet.params.push) {\n      $el.addClass('sheet-modal-push');\n    }\n\n    let $pageContentEl;\n\n    function scrollToElementOnOpen() {\n      const $scrollEl = $(sheet.params.scrollToEl).eq(0);\n      if ($scrollEl.length === 0) return;\n      $pageContentEl = $scrollEl.parents('.page-content');\n      if ($pageContentEl.length === 0) return;\n      const paddingTop = parseInt($pageContentEl.css('padding-top'), 10);\n      const paddingBottom = parseInt($pageContentEl.css('padding-bottom'), 10);\n      const pageHeight = $pageContentEl[0].offsetHeight - paddingTop - $el.height();\n      const pageScrollHeight = $pageContentEl[0].scrollHeight - paddingTop - $el.height();\n      const pageScroll = $pageContentEl.scrollTop();\n      let newPaddingBottom;\n      const scrollElTop = $scrollEl.offset().top - paddingTop + $scrollEl[0].offsetHeight;\n\n      if (scrollElTop > pageHeight) {\n        const scrollTop = pageScroll + scrollElTop - pageHeight;\n\n        if (scrollTop + pageHeight > pageScrollHeight) {\n          newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n\n          if (pageHeight === pageScrollHeight) {\n            newPaddingBottom = $el.height();\n          }\n\n          $pageContentEl.css({\n            'padding-bottom': `${newPaddingBottom}px`\n          });\n        }\n\n        $pageContentEl.scrollTop(scrollTop, 300);\n      }\n    }\n\n    function scrollToElementOnClose() {\n      if ($pageContentEl && $pageContentEl.length > 0) {\n        $pageContentEl.css({\n          'padding-bottom': ''\n        });\n      }\n    }\n\n    function handleClick(e) {\n      const target = e.target;\n      const $target = $(target);\n      const keyboardOpened = !device.desktop && device.cordova && (window.Keyboard && window.Keyboard.isVisible || window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.isVisible);\n      if (keyboardOpened) return;\n\n      if ($target.closest(sheet.el).length === 0) {\n        if (sheet.params.closeByBackdropClick && sheet.params.backdrop && sheet.backdropEl && sheet.backdropEl === target) {\n          sheet.close();\n        } else if (sheet.params.closeByOutsideClick) {\n          sheet.close();\n        }\n      }\n    }\n\n    function onKeyDown(e) {\n      const keyCode = e.keyCode;\n\n      if (keyCode === 27 && sheet.params.closeOnEscape) {\n        sheet.close();\n      }\n    }\n\n    let pushOffset;\n\n    function pushViewScale(offset) {\n      return (app.height - offset * 2) / app.height;\n    }\n\n    let isTouched = false;\n    let startTouch;\n    let currentTouch;\n    let isScrolling;\n    let touchStartTime;\n    let touchesDiff;\n    let isMoved = false;\n    let isTopSheetModal;\n    let swipeStepTranslate;\n    let startTranslate;\n    let currentTranslate;\n    let sheetElOffsetHeight;\n    let minTranslate;\n    let maxTranslate;\n    let $pushViewEl;\n    let pushBorderRadius;\n    let sheetPageContentEl;\n    let sheetPageContentScrollTop;\n    let sheetPageContentScrollHeight;\n    let sheetPageContentOffsetHeight;\n\n    function handleTouchStart(e) {\n      if (isTouched || !(sheet.params.swipeToClose || sheet.params.swipeToStep)) return;\n\n      if (sheet.params.swipeHandler && $(e.target).closest(sheet.params.swipeHandler).length === 0) {\n        return;\n      }\n\n      isTouched = true;\n      isMoved = false;\n      startTouch = {\n        x: e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY\n      };\n      touchStartTime = now();\n      isScrolling = undefined;\n      isTopSheetModal = $el.hasClass('sheet-modal-top');\n\n      if (!sheet.params.swipeHandler && e.type === 'touchstart') {\n        sheetPageContentEl = $(e.target).closest('.page-content')[0];\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      currentTouch = {\n        x: e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY\n      };\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(currentTouch.x - startTouch.x) > Math.abs(currentTouch.y - startTouch.y));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      touchesDiff = startTouch.y - currentTouch.y;\n      const direction = touchesDiff < 0 ? 'to-bottom' : 'to-top';\n\n      if (!isMoved) {\n        if (sheetPageContentEl && !$el.hasClass('modal-in-swipe-step')) {\n          sheetPageContentScrollTop = sheetPageContentEl.scrollTop;\n          sheetPageContentScrollHeight = sheetPageContentEl.scrollHeight;\n          sheetPageContentOffsetHeight = sheetPageContentEl.offsetHeight;\n\n          if (!(sheetPageContentScrollHeight === sheetPageContentOffsetHeight) && !(direction === 'to-bottom' && sheetPageContentScrollTop === 0) && !(direction === 'to-top' && sheetPageContentScrollTop === sheetPageContentScrollHeight - sheetPageContentOffsetHeight)) {\n            $el.transform('');\n            isTouched = false;\n            isMoved = false;\n            return;\n          }\n        }\n\n        if (sheet.push && pushOffset) {\n          $pushViewEl = app.$el.children('.view, .views');\n        }\n\n        sheetElOffsetHeight = $el[0].offsetHeight;\n        startTranslate = getTranslate($el[0], 'y');\n\n        if (isTopSheetModal) {\n          minTranslate = sheet.params.swipeToClose ? -sheetElOffsetHeight : -swipeStepTranslate;\n          maxTranslate = 0;\n        } else {\n          minTranslate = 0;\n          maxTranslate = sheet.params.swipeToClose ? sheetElOffsetHeight : swipeStepTranslate;\n        }\n\n        isMoved = true;\n      }\n\n      currentTranslate = startTranslate - touchesDiff;\n      currentTranslate = Math.min(Math.max(currentTranslate, minTranslate), maxTranslate);\n      e.preventDefault();\n\n      if (sheet.push && pushOffset) {\n        let progress = (currentTranslate - startTranslate) / sheetElOffsetHeight;\n\n        if (sheet.params.swipeToStep) {\n          if (isTopSheetModal) {\n            progress = currentTranslate / swipeStepTranslate;\n          } else {\n            progress = 1 - (swipeStepTranslate - currentTranslate) / swipeStepTranslate;\n          }\n        }\n\n        progress = Math.abs(progress);\n        progress = Math.min(Math.max(progress, 0), 1);\n        const pushProgress = 1 - progress;\n        const scale = 1 - (1 - pushViewScale(pushOffset)) * pushProgress;\n        $pushViewEl.transition(0).forEach(el => {\n          el.style.setProperty('transform', `translate3d(0,0,0) scale(${scale})`, 'important');\n        });\n\n        if (sheet.params.swipeToStep) {\n          $pushViewEl.css('border-radius', `${pushBorderRadius * pushProgress}px`);\n        }\n      }\n\n      $el.transition(0).transform(`translate3d(0,${currentTranslate}px,0)`);\n\n      if (sheet.params.swipeToStep) {\n        let progress;\n\n        if (isTopSheetModal) {\n          progress = 1 - currentTranslate / swipeStepTranslate;\n        } else {\n          progress = (swipeStepTranslate - currentTranslate) / swipeStepTranslate;\n        }\n\n        progress = Math.min(Math.max(progress, 0), 1);\n        $el.trigger('sheet:stepprogress', progress);\n        sheet.emit('local::stepProgress sheetStepProgress', sheet, progress);\n      }\n    }\n\n    function handleTouchEnd() {\n      isTouched = false;\n\n      if (!isMoved) {\n        return;\n      }\n\n      isMoved = false;\n      $el.transform('').transition('');\n\n      if (sheet.push && pushOffset) {\n        $pushViewEl.transition('').transform('');\n        $pushViewEl.css('border-radius', '');\n      }\n\n      const direction = touchesDiff < 0 ? 'to-bottom' : 'to-top';\n      const diff = Math.abs(touchesDiff);\n      if (diff === 0 || currentTranslate === startTranslate) return;\n      const timeDiff = new Date().getTime() - touchStartTime;\n\n      if (!sheet.params.swipeToStep) {\n        if (direction !== (isTopSheetModal ? 'to-top' : 'to-bottom')) {\n          return;\n        }\n\n        if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > sheetElOffsetHeight / 2) {\n          sheet.close();\n        }\n\n        return;\n      }\n\n      const openDirection = isTopSheetModal ? 'to-bottom' : 'to-top';\n      const closeDirection = isTopSheetModal ? 'to-top' : 'to-bottom';\n      const absCurrentTranslate = Math.abs(currentTranslate);\n      const absSwipeStepTranslate = Math.abs(swipeStepTranslate);\n\n      if (timeDiff < 300 && diff > 10) {\n        if (direction === openDirection && absCurrentTranslate < absSwipeStepTranslate) {\n          // open step\n          $el.removeClass('modal-in-swipe-step');\n          $el.trigger('sheet:stepprogress', 1);\n          sheet.emit('local::stepProgress sheetStepProgress', sheet, 1);\n          sheet.emit('local::_swipeStep', false);\n          $el.trigger('sheet:stepopen');\n          sheet.emit('local::stepOpen sheetStepOpen', sheet);\n\n          if (sheet.push && pushOffset) {\n            sheet.$htmlEl[0].style.setProperty('--f7-sheet-push-scale', pushViewScale(pushOffset));\n            $pushViewEl.css('border-radius', '');\n          }\n        }\n\n        if (direction === closeDirection && absCurrentTranslate > absSwipeStepTranslate) {\n          // close sheet\n          if (sheet.params.swipeToClose) {\n            sheet.close();\n          } else {\n            // close step\n            $el.addClass('modal-in-swipe-step');\n            $el.trigger('sheet:stepprogress', 0);\n            sheet.emit('local::stepProgress sheetStepProgress', sheet, 0);\n            sheet.emit('local::_swipeStep', true);\n            $el.trigger('sheet:stepclose');\n            sheet.emit('local::stepClose sheetStepClose', sheet);\n\n            if (sheet.push && pushOffset) {\n              sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n              $pushViewEl.css('border-radius', '0px');\n            }\n          }\n        }\n\n        if (direction === closeDirection && absCurrentTranslate <= absSwipeStepTranslate) {\n          // close step\n          $el.addClass('modal-in-swipe-step');\n          $el.trigger('sheet:stepprogress', 0);\n          sheet.emit('local::stepProgress sheetStepProgress', sheet, 0);\n          sheet.emit('local::_swipeStep', true);\n          $el.trigger('sheet:stepclose');\n          sheet.emit('local::stepClose sheetStepClose', sheet);\n\n          if (sheet.push && pushOffset) {\n            sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n            $pushViewEl.css('border-radius', '0px');\n          }\n        }\n\n        return;\n      }\n\n      if (timeDiff >= 300) {\n        const stepOpened = !$el.hasClass('modal-in-swipe-step');\n\n        if (!stepOpened) {\n          if (absCurrentTranslate < absSwipeStepTranslate / 2) {\n            // open step\n            $el.removeClass('modal-in-swipe-step');\n            $el.trigger('sheet:stepprogress', 1);\n            sheet.emit('local::stepProgress sheetStepProgress', sheet, 1);\n            sheet.emit('local::_swipeStep', false);\n            $el.trigger('sheet:stepopen');\n            sheet.emit('local::stepOpen sheetStepOpen', sheet);\n\n            if (sheet.push && pushOffset) {\n              sheet.$htmlEl[0].style.setProperty('--f7-sheet-push-scale', pushViewScale(pushOffset));\n              $pushViewEl.css('border-radius', '');\n            }\n          } else if (absCurrentTranslate - absSwipeStepTranslate > (sheetElOffsetHeight - absSwipeStepTranslate) / 2) {\n            // close sheet\n            if (sheet.params.swipeToClose) sheet.close();\n          }\n        } else if (stepOpened) {\n          if (absCurrentTranslate > absSwipeStepTranslate + (sheetElOffsetHeight - absSwipeStepTranslate) / 2) {\n            // close sheet\n            if (sheet.params.swipeToClose) sheet.close();\n          } else if (absCurrentTranslate > absSwipeStepTranslate / 2) {\n            // close step\n            $el.addClass('modal-in-swipe-step');\n            $el.trigger('sheet:stepprogress', 0);\n            sheet.emit('local::stepProgress sheetStepProgress', sheet, 0);\n            sheet.emit('local::_swipeStep', true);\n            $el.trigger('sheet:stepclose');\n            sheet.emit('local::stepClose sheetStepClose', sheet);\n\n            if (sheet.push && pushOffset) {\n              sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n              $pushViewEl.css('border-radius', '0px');\n            }\n          }\n        }\n      }\n    }\n\n    sheet.setSwipeStep = function setSwipeStep(byResize) {\n      if (byResize === void 0) {\n        byResize = true;\n      }\n\n      const $swipeStepEl = $el.find('.sheet-modal-swipe-step').eq(0);\n      if (!$swipeStepEl.length) return;\n\n      if ($el.hasClass('sheet-modal-top')) {\n        swipeStepTranslate = -($swipeStepEl.offset().top - $el.offset().top + $swipeStepEl[0].offsetHeight);\n      } else {\n        swipeStepTranslate = $el[0].offsetHeight - ($swipeStepEl.offset().top - $el.offset().top + $swipeStepEl[0].offsetHeight);\n      }\n\n      $el[0].style.setProperty('--f7-sheet-swipe-step', `${swipeStepTranslate}px`);\n\n      if (!byResize) {\n        $el.addClass('modal-in-swipe-step');\n        sheet.emit('local::_swipeStep', true);\n      }\n    };\n\n    function onResize() {\n      sheet.setSwipeStep(true);\n    }\n\n    const passive = support.passiveListener ? {\n      passive: true\n    } : false;\n\n    if (sheet.params.swipeToClose || sheet.params.swipeToStep) {\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      sheet.once('sheetDestroy', () => {\n        $el.off(app.touchEvents.start, handleTouchStart, passive);\n        app.off('touchmove', handleTouchMove);\n        app.off('touchend:passive', handleTouchEnd);\n      });\n    }\n\n    sheet.on('open', () => {\n      if (sheet.params.closeOnEscape) {\n        $(document).on('keydown', onKeyDown);\n      }\n\n      $el.prevAll('.popup.modal-in').addClass('popup-behind');\n\n      if (sheet.params.swipeToStep) {\n        sheet.setSwipeStep(false);\n        app.on('resize', onResize);\n      }\n\n      if (sheet.params.scrollToEl) {\n        scrollToElementOnOpen();\n      }\n\n      if (sheet.push) {\n        pushOffset = parseInt($el.css('--f7-sheet-push-offset'), 10);\n        if (Number.isNaN(pushOffset)) pushOffset = 0;\n\n        if (pushOffset) {\n          $el.addClass('sheet-modal-push');\n          sheet.$htmlEl.addClass('with-modal-sheet-push');\n\n          if (!sheet.params.swipeToStep) {\n            sheet.$htmlEl[0].style.setProperty('--f7-sheet-push-scale', pushViewScale(pushOffset));\n          } else {\n            $pushViewEl = app.$el.children('.view, .views');\n            pushBorderRadius = parseFloat($el.css(`border-${isTopSheetModal ? 'bottom' : 'top'}-left-radius`));\n            $pushViewEl.css('border-radius', '0px');\n          }\n        }\n      }\n    });\n    sheet.on('opened', () => {\n      if (sheet.params.closeByOutsideClick || sheet.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    sheet.on('close', () => {\n      if (sheet.params.swipeToStep) {\n        $el.removeClass('modal-in-swipe-step');\n        sheet.emit('local::_swipeStep', false);\n        app.off('resize', onResize);\n      }\n\n      if (sheet.params.closeOnEscape) {\n        $(document).off('keydown', onKeyDown);\n      }\n\n      if (sheet.params.scrollToEl) {\n        scrollToElementOnClose();\n      }\n\n      if (sheet.params.closeByOutsideClick || sheet.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n\n      $el.prevAll('.popup.modal-in').eq(0).removeClass('popup-behind');\n\n      if (sheet.push && pushOffset) {\n        sheet.$htmlEl.removeClass('with-modal-sheet-push');\n        sheet.$htmlEl.addClass('with-modal-sheet-push-closing');\n      }\n    });\n    sheet.on('closed', () => {\n      if (sheet.push && pushOffset) {\n        sheet.$htmlEl.removeClass('with-modal-sheet-push-closing');\n        sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n      }\n    });\n\n    sheet.stepOpen = function stepOpen() {\n      $el.removeClass('modal-in-swipe-step');\n      sheet.emit('local::_swipeStep', false);\n\n      if (sheet.push) {\n        if (!pushOffset) {\n          pushOffset = parseInt($el.css('--f7-sheet-push-offset'), 10);\n          if (Number.isNaN(pushOffset)) pushOffset = 0;\n        }\n\n        if (pushOffset) {\n          sheet.$htmlEl[0].style.setProperty('--f7-sheet-push-scale', pushViewScale(pushOffset));\n        }\n      }\n    };\n\n    sheet.stepClose = function stepClose() {\n      $el.addClass('modal-in-swipe-step');\n      sheet.emit('local::_swipeStep', true);\n\n      if (sheet.push) {\n        sheet.$htmlEl[0].style.removeProperty('--f7-sheet-push-scale');\n      }\n    };\n\n    sheet.stepToggle = function stepToggle() {\n      $el.toggleClass('modal-in-swipe-step');\n      sheet.emit('local::_swipeStep', $el.hasClass('modal-in-swipe-step'));\n    };\n\n    $el[0].f7Modal = sheet;\n    return sheet;\n  }\n\n}\n\nexport default Sheet;"],"mappings":"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"},"metadata":{},"sourceType":"module"}