{"ast":null,"code":"import _slicedToArray from\"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Page,Navbar,Link,List,ListItem,BlockTitle,f7}from'framework7-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SuccessAlertTitle='<i class=\"icon f7-icons color-green\" style=\"font-size: 35px;\">checkmark_alt</i>';var WarningAlertTitle='<i class=\"icon f7-icons color-orange\" style=\"font-size: 35px;\">exclamationmark</i>';var ErrorAlertTitle='<i class=\"icon f7-icons color-red\" style=\"font-size: 35px;\">xmark</i>';var MyPokemonPage=function MyPokemonPage(_ref){var myPokemonList=_ref.myPokemonList,f7router=_ref.f7router;var pokemonList=[];var _useState=useState(myPokemonList),_useState2=_slicedToArray(_useState,2),listOfMyPokemon=_useState2[0],setListOfMyPokemon=_useState2[1];var indexOfPokemon=listOfMyPokemon.map(function(element){return element.nickname;});var releasePokemon=function releasePokemon(pokemonNickname){fetch('/pokemon/release',{method:'GET'}).then(function(response){return response.json();}).then(function(response){f7.dialog.close();if(!response.response){console.info('info: release result',response.response);f7.dialog.alert(\"Release failed\",WarningAlertTitle);return;}f7.dialog.alert(\"Release success\",SuccessAlertTitle);var releasePokemon=[myPokemonList];releasePokemon.splice(indexOfPokemon.indexOf(pokemonNickname),1);setListOfMyPokemon(releasePokemon);console.info('info: release result',response.response);}).catch(function(error){f7.dialog.close();f7.dialog.alert('Pokeapi error',ErrorAlertTitle);console.error('error:',error);});};listOfMyPokemon.forEach(function(element){pokemonList.push(/*#__PURE__*/_jsx(ListItem,{link:\"#\",title:element.nickname,subtitle:element.species,onClick:function onClick(){f7.dialog.preloader(\"Releasing \".concat(element.nickname,\"...\"));releasePokemon(element.nickname);},children:/*#__PURE__*/_jsx(\"img\",{slot:\"media\",src:element.src,width:\"44\",alt:\"Artwork of \".concat(element.nickname)})}));});useEffect(function(){console.info('info my pokemon page: all catched pokemon',listOfMyPokemon);},[listOfMyPokemon]);return/*#__PURE__*/_jsxs(Page,{name:\"my\",children:[/*#__PURE__*/_jsx(Navbar,{title:\"My Pokemon List\",children:/*#__PURE__*/_jsx(Link,{slot:\"left\",iconF7:\"house_alt_fill\",onClick:function onClick(){f7router.navigate('/list/',{props:{myPokemonList:listOfMyPokemon}});}})}),/*#__PURE__*/_jsx(BlockTitle,{children:\"Click for release\"}),/*#__PURE__*/_jsx(List,{children:pokemonList})]});};export default MyPokemonPage;","map":{"version":3,"names":["React","useEffect","useState","Page","Navbar","Link","List","ListItem","BlockTitle","f7","SuccessAlertTitle","WarningAlertTitle","ErrorAlertTitle","MyPokemonPage","myPokemonList","f7router","pokemonList","listOfMyPokemon","setListOfMyPokemon","indexOfPokemon","map","element","nickname","releasePokemon","pokemonNickname","fetch","method","then","response","json","dialog","close","console","info","alert","splice","indexOf","catch","error","forEach","push","species","preloader","src","navigate","props"],"sources":["/root/Pokemon/ui/src/MyPokemonPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { \n    Page,\n    Navbar,\n    Link,\n    List,\n    ListItem,\n    BlockTitle,\n    f7\n} from 'framework7-react';\n\nconst SuccessAlertTitle = '<i class=\"icon f7-icons color-green\" style=\"font-size: 35px;\">checkmark_alt</i>';\nconst WarningAlertTitle = '<i class=\"icon f7-icons color-orange\" style=\"font-size: 35px;\">exclamationmark</i>';\nconst ErrorAlertTitle = '<i class=\"icon f7-icons color-red\" style=\"font-size: 35px;\">xmark</i>';\n\nconst MyPokemonPage = ({ myPokemonList, f7router }) => {\n    const pokemonList = [];\n    const [listOfMyPokemon, setListOfMyPokemon] = useState(myPokemonList);\n    const indexOfPokemon = listOfMyPokemon.map(element => element.nickname);\n\n    const releasePokemon = (pokemonNickname) => {\n        fetch('/pokemon/release', {method: 'GET'})\n        .then((response) => response.json())\n        .then((response) => {\n            f7.dialog.close();\n            if (!response.response) {\n                console.info('info: release result', response.response);\n                f7.dialog.alert(\"Release failed\", WarningAlertTitle);\n                return;\n            }\n            f7.dialog.alert(\"Release success\", SuccessAlertTitle);\n            const releasePokemon = [myPokemonList];\n            releasePokemon.splice(indexOfPokemon.indexOf(pokemonNickname), 1);\n            setListOfMyPokemon(releasePokemon);\n            console.info('info: release result', response.response);\n        })\n        .catch(error => {\n            f7.dialog.close();\n            f7.dialog.alert('Pokeapi error', ErrorAlertTitle);\n            console.error('error:', error);\n        });\n    }\n\n    listOfMyPokemon.forEach(element => {\n        pokemonList.push(\n            <ListItem link=\"#\" title={element.nickname} subtitle={element.species} onClick={() => {\n                f7.dialog.preloader(`Releasing ${element.nickname}...`);\n                releasePokemon(element.nickname);\n            }}>\n                <img\n                    slot=\"media\"\n                    src={element.src}\n                    width=\"44\"\n                    alt={`Artwork of ${element.nickname}`}\n                />\n            </ListItem>\n        );\n    });\n\n    useEffect(() => {\n        console.info('info my pokemon page: all catched pokemon', listOfMyPokemon);\n    }, [listOfMyPokemon]);\n\n    return(\n        <Page name=\"my\">\n            <Navbar title=\"My Pokemon List\">\n                <Link slot=\"left\" iconF7=\"house_alt_fill\" onClick={() => {\n                    f7router.navigate('/list/', {\n                        props: {\n                            myPokemonList: listOfMyPokemon\n                        }\n                    });\n                }}></Link>\n            </Navbar>\n            <BlockTitle>Click for release</BlockTitle>\n            <List>{pokemonList}</List>\n        </Page>\n    )\n}\n\nexport default MyPokemonPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}