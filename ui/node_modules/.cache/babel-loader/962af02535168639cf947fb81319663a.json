{"ast":null,"code":"import _defineProperty from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _toConsumableArray from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _possibleConstructorReturn from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _assertThisInitialized from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { extend, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport $ from '../../shared/dom7.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport { getSupport } from '../../shared/get-support.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nvar Calendar = /*#__PURE__*/function (_Framework7Class) {\n  _inherits(Calendar, _Framework7Class);\n\n  var _super = _createSuper(Calendar);\n\n  function Calendar(app, params) {\n    var _this;\n\n    _classCallCheck(this, Calendar);\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _super.call(this, params, [app]);\n\n    var calendar = _assertThisInitialized(_this);\n\n    calendar.params = extend({}, app.params.calendar, params);\n    var $containerEl;\n\n    if (calendar.params.containerEl) {\n      $containerEl = $(calendar.params.containerEl);\n      if ($containerEl.length === 0) return _possibleConstructorReturn(_this, calendar);\n    }\n\n    var $inputEl;\n\n    if (calendar.params.inputEl) {\n      $inputEl = $(calendar.params.inputEl);\n    }\n\n    var isHorizontal = calendar.params.direction === 'horizontal';\n    var inverter = 1;\n\n    if (isHorizontal) {\n      inverter = app.rtl ? -1 : 1;\n    }\n\n    extend(calendar, {\n      app: app,\n      $containerEl: $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      $inputEl: $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      initialized: false,\n      opened: false,\n      url: calendar.params.url,\n      isHorizontal: isHorizontal,\n      inverter: inverter,\n      animating: false,\n      allowTouchMove: true,\n      hasTimePicker: calendar.params.timePicker && !calendar.params.rangePicker && !calendar.params.multiple\n    });\n\n    calendar.dayFormatter = function (date) {\n      var formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        day: 'numeric'\n      });\n      return formatter.format(date).replace(/æ—¥/, '');\n    };\n\n    calendar.monthFormatter = function (date) {\n      var formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        month: 'long'\n      });\n      return formatter.format(date);\n    };\n\n    calendar.yearFormatter = function (date) {\n      var formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        year: 'numeric'\n      });\n      return formatter.format(date);\n    };\n\n    calendar.timeSelectorFormatter = function (date) {\n      var formatter = new Intl.DateTimeFormat(calendar.params.locale, calendar.params.timePickerFormat);\n      return formatter.format(date);\n    };\n\n    var timeFormatCheckDate = calendar.timeSelectorFormatter(new Date()).toLowerCase();\n    calendar.is12HoursFormat = timeFormatCheckDate.indexOf('pm') >= 0 || timeFormatCheckDate.indexOf('am') >= 0; // Auto names\n\n    var _calendar$params = calendar.params,\n        monthNames = _calendar$params.monthNames,\n        monthNamesShort = _calendar$params.monthNamesShort,\n        dayNames = _calendar$params.dayNames,\n        dayNamesShort = _calendar$params.dayNamesShort;\n\n    var _calendar$getIntlName = calendar.getIntlNames(),\n        monthNamesIntl = _calendar$getIntlName.monthNamesIntl,\n        monthNamesShortIntl = _calendar$getIntlName.monthNamesShortIntl,\n        dayNamesIntl = _calendar$getIntlName.dayNamesIntl,\n        dayNamesShortIntl = _calendar$getIntlName.dayNamesShortIntl;\n\n    if (monthNames === 'auto') monthNames = monthNamesIntl;\n    if (monthNamesShort === 'auto') monthNamesShort = monthNamesShortIntl;\n    if (dayNames === 'auto') dayNames = dayNamesIntl;\n    if (dayNamesShort === 'auto') dayNamesShort = dayNamesShortIntl;\n    extend(calendar, {\n      monthNames: monthNames,\n      monthNamesShort: monthNamesShort,\n      dayNames: dayNames,\n      dayNamesShort: dayNamesShort\n    });\n\n    function onInputClick() {\n      calendar.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onInputClear() {\n      calendar.setValue([]);\n\n      if (calendar.opened) {\n        calendar.update();\n      }\n    }\n\n    function onHtmlClick(e) {\n      var $targetEl = $(e.target);\n      if (calendar.destroyed || !calendar.params) return;\n      if (calendar.isPopover()) return;\n      if (!calendar.opened || calendar.closing) return;\n      if ($targetEl.closest('[class*=\"backdrop\"]').length) return;\n      if (calendar.monthPickerPopover || calendar.yearPickerPopover || calendar.timePickerPopover) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal, .calendar-modal').length === 0) {\n          calendar.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal, .calendar-modal').length === 0) {\n        calendar.close();\n      }\n    } // Events\n\n\n    extend(calendar, {\n      attachInputEvents: function attachInputEvents() {\n        calendar.$inputEl.on('click', onInputClick);\n        calendar.$inputEl.on('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            calendar.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n      detachInputEvents: function detachInputEvents() {\n        calendar.$inputEl.off('click', onInputClick);\n        calendar.$inputEl.off('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            delete calendar.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n      attachHtmlEvents: function attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n      detachHtmlEvents: function detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n    });\n\n    calendar.attachCalendarEvents = function attachCalendarEvents() {\n      var allowItemClick = true;\n      var isTouched;\n      var isMoved;\n      var touchStartX;\n      var touchStartY;\n      var touchCurrentX;\n      var touchCurrentY;\n      var touchStartTime;\n      var touchEndTime;\n      var currentTranslate;\n      var wrapperWidth;\n      var wrapperHeight;\n      var percentage;\n      var touchesDiff;\n      var isScrolling;\n      var $el = calendar.$el,\n          $wrapperEl = calendar.$wrapperEl;\n\n      function handleTouchStart(e) {\n        if (isMoved || isTouched) return;\n        isTouched = true;\n        touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentX = touchStartX;\n        touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n        touchCurrentY = touchStartY;\n        touchStartTime = new Date().getTime();\n        percentage = 0;\n        allowItemClick = true;\n        isScrolling = undefined;\n        currentTranslate = calendar.monthsTranslate;\n      }\n\n      function handleTouchMove(e) {\n        if (!isTouched) return;\n        var isH = calendar.isHorizontal;\n        touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n        if (typeof isScrolling === 'undefined') {\n          isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n        }\n\n        if (isH && isScrolling || !calendar.allowTouchMove) {\n          isTouched = false;\n          return;\n        }\n\n        e.preventDefault();\n\n        if (calendar.animating) {\n          isTouched = false;\n          return;\n        }\n\n        allowItemClick = false;\n\n        if (!isMoved) {\n          // First move\n          isMoved = true;\n          wrapperWidth = $wrapperEl[0].offsetWidth;\n          wrapperHeight = $wrapperEl[0].offsetHeight;\n          $wrapperEl.transition(0);\n        }\n\n        touchesDiff = isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n        percentage = touchesDiff / (isH ? wrapperWidth : wrapperHeight);\n        currentTranslate = (calendar.monthsTranslate * calendar.inverter + percentage) * 100; // Transform wrapper\n\n        $wrapperEl.transform(\"translate3d(\".concat(isH ? currentTranslate : 0, \"%, \").concat(isH ? 0 : currentTranslate, \"%, 0)\"));\n      }\n\n      function handleTouchEnd() {\n        if (!isTouched || !isMoved) {\n          isTouched = false;\n          isMoved = false;\n          return;\n        }\n\n        isTouched = false;\n        isMoved = false;\n        touchEndTime = new Date().getTime();\n\n        if (touchEndTime - touchStartTime < 300) {\n          if (Math.abs(touchesDiff) < 10) {\n            calendar.resetMonth();\n          } else if (touchesDiff >= 10) {\n            if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n          } else if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage <= -0.5) {\n          if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage >= 0.5) {\n          if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n        } else {\n          calendar.resetMonth();\n        } // Allow click\n\n\n        setTimeout(function () {\n          allowItemClick = true;\n        }, 100);\n      }\n\n      function handleDayClick(e) {\n        if (!allowItemClick) return;\n        var $dayEl = $(e.target).parents('.calendar-day');\n\n        if ($dayEl.length === 0 && $(e.target).hasClass('calendar-day')) {\n          $dayEl = $(e.target);\n        }\n\n        if ($dayEl.length === 0) return;\n        if ($dayEl.hasClass('calendar-day-disabled')) return;\n\n        if (!calendar.params.rangePicker) {\n          if ($dayEl.hasClass('calendar-day-next')) calendar.nextMonth();\n          if ($dayEl.hasClass('calendar-day-prev')) calendar.prevMonth();\n        }\n\n        var dateYear = parseInt($dayEl.attr('data-year'), 10);\n        var dateMonth = parseInt($dayEl.attr('data-month'), 10);\n        var dateDay = parseInt($dayEl.attr('data-day'), 10);\n        calendar.emit('local::dayClick calendarDayClick', calendar, $dayEl[0], dateYear, dateMonth, dateDay);\n\n        if (!$dayEl.hasClass('calendar-day-selected') || calendar.params.multiple || calendar.params.rangePicker) {\n          var valueToAdd = new Date(dateYear, dateMonth, dateDay, 0, 0, 0);\n\n          if (calendar.hasTimePicker) {\n            if (calendar.value && calendar.value[0]) {\n              valueToAdd.setHours(calendar.value[0].getHours(), calendar.value[0].getMinutes());\n            } else {\n              valueToAdd.setHours(new Date().getHours(), new Date().getMinutes());\n            }\n          }\n\n          calendar.addValue(valueToAdd);\n        }\n\n        if (calendar.params.closeOnSelect) {\n          if (calendar.params.rangePicker && calendar.value.length === 2 || !calendar.params.rangePicker) {\n            calendar.close();\n          }\n        }\n      }\n\n      function onNextMonthClick() {\n        calendar.nextMonth();\n      }\n\n      function onPrevMonthClick() {\n        calendar.prevMonth();\n      }\n\n      function onNextYearClick() {\n        calendar.nextYear();\n      }\n\n      function onPrevYearClick() {\n        calendar.prevYear();\n      }\n\n      function onMonthSelectorClick() {\n        calendar.openMonthPicker();\n      }\n\n      function onYearSelectorClick() {\n        calendar.openYearPicker();\n      }\n\n      function onTimeSelectorClick() {\n        calendar.openTimePicker();\n      }\n\n      var passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n        passive: true,\n        capture: false\n      } : false; // Selectors clicks\n\n      $el.find('.calendar-prev-month-button').on('click', onPrevMonthClick);\n      $el.find('.calendar-next-month-button').on('click', onNextMonthClick);\n      $el.find('.calendar-prev-year-button').on('click', onPrevYearClick);\n      $el.find('.calendar-next-year-button').on('click', onNextYearClick);\n\n      if (calendar.params.monthPicker) {\n        $el.find('.current-month-value').on('click', onMonthSelectorClick);\n      }\n\n      if (calendar.params.yearPicker) {\n        $el.find('.current-year-value').on('click', onYearSelectorClick);\n      }\n\n      if (calendar.hasTimePicker) {\n        $el.find('.calendar-time-selector a').on('click', onTimeSelectorClick);\n      } // Day clicks\n\n\n      $wrapperEl.on('click', handleDayClick); // Touch events\n\n      if (calendar.params.touchMove) {\n        $wrapperEl.on(app.touchEvents.start, handleTouchStart, passiveListener);\n        app.on('touchmove:active', handleTouchMove);\n        app.on('touchend:passive', handleTouchEnd);\n      }\n\n      calendar.detachCalendarEvents = function detachCalendarEvents() {\n        $el.find('.calendar-prev-month-button').off('click', onPrevMonthClick);\n        $el.find('.calendar-next-month-button').off('click', onNextMonthClick);\n        $el.find('.calendar-prev-year-button').off('click', onPrevYearClick);\n        $el.find('.calendar-next-year-button').off('click', onNextYearClick);\n\n        if (calendar.params.monthPicker) {\n          $el.find('.current-month-value').off('click', onMonthSelectorClick);\n        }\n\n        if (calendar.params.yearPicker) {\n          $el.find('.current-year-value').off('click', onYearSelectorClick);\n        }\n\n        if (calendar.hasTimePicker) {\n          $el.find('.calendar-time-selector a').off('click', onTimeSelectorClick);\n        }\n\n        $wrapperEl.off('click', handleDayClick);\n\n        if (calendar.params.touchMove) {\n          $wrapperEl.off(app.touchEvents.start, handleTouchStart, passiveListener);\n          app.off('touchmove:active', handleTouchMove);\n          app.off('touchend:passive', handleTouchEnd);\n        }\n      };\n    };\n\n    calendar.init();\n    return _possibleConstructorReturn(_this, calendar);\n  }\n\n  _createClass(Calendar, [{\n    key: \"view\",\n    get: function get() {\n      var $inputEl = this.$inputEl,\n          app = this.app,\n          params = this.params;\n      var view;\n\n      if (params.view) {\n        view = params.view;\n      } else if ($inputEl) {\n        view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n      }\n\n      if (!view) view = app.views.main;\n      return view;\n    }\n  }, {\n    key: \"getIntlNames\",\n    value: function getIntlNames() {\n      var calendar = this;\n      var locale = calendar.params.locale;\n      var monthNamesIntl = [];\n      var monthNamesShortIntl = [];\n      var dayNamesIntl = [];\n      var dayNamesShortIntl = [];\n      var formatterMonthNames = new Intl.DateTimeFormat(locale, {\n        month: 'long'\n      });\n      var formatterMonthNamesShort = new Intl.DateTimeFormat(locale, {\n        month: 'short'\n      });\n      var formatterDayNames = new Intl.DateTimeFormat(locale, {\n        weekday: 'long'\n      });\n      var formatterDayNamesShort = new Intl.DateTimeFormat(locale, {\n        weekday: 'short'\n      });\n      var year;\n      var yearStarted;\n      var yearEnded;\n\n      for (var i = 0; i < 24; i += 1) {\n        var date = new Date().setMonth(i, 1);\n        var currentYear = calendar.yearFormatter(date);\n\n        if (year && currentYear !== year) {\n          if (yearStarted) yearEnded = true;\n          yearStarted = true;\n          year = currentYear;\n        }\n\n        if (!year) {\n          year = currentYear;\n        }\n\n        if (yearStarted && year === currentYear && !yearEnded) {\n          monthNamesIntl.push(formatterMonthNames.format(date));\n          monthNamesShortIntl.push(formatterMonthNamesShort.format(date));\n        }\n      }\n\n      var weekDay = new Date().getDay();\n\n      for (var _i = 0; _i < 7; _i += 1) {\n        var _date = new Date().getTime() + (_i - weekDay) * 24 * 60 * 60 * 1000;\n\n        dayNamesIntl.push(formatterDayNames.format(_date));\n        dayNamesShortIntl.push(formatterDayNamesShort.format(_date));\n      }\n\n      return {\n        monthNamesIntl: monthNamesIntl,\n        monthNamesShortIntl: monthNamesShortIntl,\n        dayNamesIntl: dayNamesIntl,\n        dayNamesShortIntl: dayNamesShortIntl\n      };\n    }\n  }, {\n    key: \"normalizeDate\",\n    value: function normalizeDate(date) {\n      var calendar = this;\n      var d = new Date(date);\n\n      if (calendar.hasTimePicker) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());\n      }\n\n      return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n    }\n  }, {\n    key: \"normalizeValues\",\n    value: function normalizeValues(values) {\n      var calendar = this;\n      var newValues = [];\n\n      if (values && Array.isArray(values)) {\n        newValues = values.map(function (val) {\n          return calendar.normalizeDate(val);\n        });\n      }\n\n      return newValues;\n    }\n  }, {\n    key: \"initInput\",\n    value: function initInput() {\n      var calendar = this;\n      if (!calendar.$inputEl) return;\n      if (calendar.params.inputReadOnly) calendar.$inputEl.prop('readOnly', true);\n    }\n  }, {\n    key: \"isPopover\",\n    value: function isPopover() {\n      var calendar = this;\n      var app = calendar.app,\n          modal = calendar.modal,\n          params = calendar.params;\n      var device = getDevice();\n      if (params.openIn === 'sheet') return false;\n      if (modal && modal.type !== 'popover') return false;\n\n      if (!calendar.inline && calendar.inputEl) {\n        if (params.openIn === 'popover') return true;\n\n        if (device.ios) {\n          return !!device.ipad;\n        }\n\n        if (app.width >= 768) {\n          return true;\n        }\n\n        if (device.desktop && app.theme === 'aurora') {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"formatDate\",\n    value: function formatDate(d) {\n      var calendar = this;\n      var date = new Date(d);\n      var year = date.getFullYear();\n      var month = date.getMonth();\n      var month1 = month + 1;\n      var day = date.getDate();\n      var weekDay = date.getDay();\n      var monthNames = calendar.monthNames,\n          monthNamesShort = calendar.monthNamesShort,\n          dayNames = calendar.dayNames,\n          dayNamesShort = calendar.dayNamesShort;\n      var _calendar$params2 = calendar.params,\n          dateFormat = _calendar$params2.dateFormat,\n          locale = _calendar$params2.locale;\n\n      function twoDigits(number) {\n        return number < 10 ? \"0\".concat(number) : number;\n      }\n\n      if (typeof dateFormat === 'string') {\n        var tokens = {\n          yyyy: year,\n          yy: String(year).substring(2),\n          mm: twoDigits(month1),\n          m: month1,\n          MM: monthNames[month],\n          M: monthNamesShort[month],\n          dd: twoDigits(day),\n          d: day,\n          DD: dayNames[weekDay],\n          D: dayNamesShort[weekDay]\n        };\n\n        if (calendar.params.timePicker) {\n          var hours = date.getHours();\n          var minutes = date.getMinutes();\n          var seconds = date.getSeconds();\n          var hours12 = hours;\n          if (hours > 12) hours12 = hours - 12;\n          if (hours === 0) hours12 = 12;\n          var a = hours >= 12 && hours !== 0 ? 'pm' : 'am';\n          Object.assign(tokens, {\n            HH: twoDigits(hours),\n            H: hours,\n            hh: twoDigits(hours12),\n            h: hours12,\n            ss: twoDigits(seconds),\n            s: seconds,\n            ':mm': twoDigits(minutes),\n            ':m': minutes,\n            a: a,\n            A: a.toUpperCase()\n          });\n        }\n\n        var regexp = new RegExp(Object.keys(tokens).map(function (t) {\n          return \"(\".concat(t, \")\");\n        }).join('|'), 'g');\n        return dateFormat.replace(regexp, function (token) {\n          if (token in tokens) return tokens[token];\n          return token;\n        });\n      }\n\n      if (typeof dateFormat === 'function') {\n        return dateFormat(date);\n      } // Intl Object\n\n\n      var formatter = new Intl.DateTimeFormat(locale, dateFormat);\n      return formatter.format(date);\n    }\n  }, {\n    key: \"formatValue\",\n    value: function formatValue() {\n      var calendar = this;\n      var value = calendar.value;\n\n      if (calendar.params.formatValue) {\n        return calendar.params.formatValue.call(calendar, value);\n      }\n\n      return value.map(function (v) {\n        return calendar.formatDate(v);\n      }).join(calendar.params.rangePicker ? ' - ' : ', ');\n    }\n  }, {\n    key: \"addValue\",\n    value: function addValue(newValue) {\n      var calendar = this;\n      var _calendar$params3 = calendar.params,\n          multiple = _calendar$params3.multiple,\n          rangePicker = _calendar$params3.rangePicker,\n          rangePickerMinDays = _calendar$params3.rangePickerMinDays,\n          rangePickerMaxDays = _calendar$params3.rangePickerMaxDays;\n\n      if (multiple) {\n        if (!calendar.value) calendar.value = [];\n        var inValuesIndex;\n\n        for (var i = 0; i < calendar.value.length; i += 1) {\n          if (new Date(newValue).getTime() === new Date(calendar.value[i]).getTime()) {\n            inValuesIndex = i;\n          }\n        }\n\n        if (typeof inValuesIndex === 'undefined') {\n          calendar.value.push(newValue);\n        } else {\n          calendar.value.splice(inValuesIndex, 1);\n        }\n\n        calendar.updateValue();\n      } else if (rangePicker) {\n        if (!calendar.value) calendar.value = [];\n\n        if (calendar.value.length === 2 || calendar.value.length === 0) {\n          calendar.value = [];\n        }\n\n        if (calendar.value.length === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) >= (rangePickerMinDays - 1) * 60 * 60 * 24 * 1000 && (rangePickerMaxDays === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) <= (rangePickerMaxDays - 1) * 60 * 60 * 24 * 1000)) calendar.value.push(newValue);else calendar.value = [];\n        calendar.value.sort(function (a, b) {\n          return a - b;\n        });\n        calendar.updateValue();\n      } else {\n        calendar.value = [newValue];\n        calendar.updateValue();\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(values) {\n      var calendar = this;\n      var currentValue = calendar.value;\n\n      if (Array.isArray(currentValue) && Array.isArray(values) && currentValue.length === values.length) {\n        var equal = true;\n        currentValue.forEach(function (v, index) {\n          if (v !== values[index]) equal = false;\n        });\n        if (equal) return;\n      }\n\n      calendar.value = values;\n      calendar.updateValue();\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      var calendar = this;\n      return calendar.value;\n    }\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(onlyHeader) {\n      var calendar = this;\n      var $el = calendar.$el,\n          $wrapperEl = calendar.$wrapperEl,\n          $inputEl = calendar.$inputEl,\n          value = calendar.value,\n          params = calendar.params;\n      var i;\n\n      if ($el && $el.length > 0) {\n        $wrapperEl.find('.calendar-day-selected').removeClass('calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right');\n        var valueDate;\n\n        if (params.rangePicker && value.length === 2) {\n          var leftDate = new Date(value[0]).getTime();\n          var rightDate = new Date(value[1]).getTime();\n\n          for (i = leftDate; i <= rightDate; i += 24 * 60 * 60 * 1000) {\n            valueDate = new Date(i);\n            var addClass = 'calendar-day-selected';\n\n            if (leftDate !== rightDate) {\n              if (i !== leftDate && i !== rightDate) {\n                addClass += ' calendar-day-selected-range';\n              }\n\n              if (i === leftDate) {\n                addClass += ' calendar-day-selected-left';\n              }\n\n              if (i === rightDate) {\n                addClass += ' calendar-day-selected-right';\n              }\n            }\n\n            $wrapperEl.find(\".calendar-day[data-date=\\\"\".concat(valueDate.getFullYear(), \"-\").concat(valueDate.getMonth(), \"-\").concat(valueDate.getDate(), \"\\\"]\")).addClass(addClass);\n          }\n\n          valueDate = new Date(leftDate);\n          $wrapperEl.find(\".calendar-day[data-date=\\\"\".concat(valueDate.getFullYear(), \"-\").concat(valueDate.getMonth(), \"-\").concat(valueDate.getDate(), \"\\\"]\")).removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-left');\n          valueDate = new Date(rightDate);\n          $wrapperEl.find(\".calendar-day[data-date=\\\"\".concat(valueDate.getFullYear(), \"-\").concat(valueDate.getMonth(), \"-\").concat(valueDate.getDate(), \"\\\"]\")).removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-right');\n        } else {\n          for (i = 0; i < calendar.value.length; i += 1) {\n            valueDate = new Date(value[i]);\n            $wrapperEl.find(\".calendar-day[data-date=\\\"\".concat(valueDate.getFullYear(), \"-\").concat(valueDate.getMonth(), \"-\").concat(valueDate.getDate(), \"\\\"]\")).addClass('calendar-day-selected');\n          }\n        }\n      }\n\n      if (!onlyHeader) {\n        calendar.emit('local::change calendarChange', calendar, value);\n      }\n\n      if ($el && $el.length > 0 && calendar.hasTimePicker) {\n        $el.find('.calendar-time-selector a').text(value && value.length ? calendar.timeSelectorFormatter(value[0]) : calendar.params.timePickerPlaceholder);\n      }\n\n      if ($inputEl && $inputEl.length || params.header) {\n        var inputValue = calendar.formatValue(value);\n\n        if (params.header && $el && $el.length) {\n          $el.find('.calendar-selected-date').text(inputValue);\n        }\n\n        if ($inputEl && $inputEl.length && !onlyHeader) {\n          $inputEl.val(inputValue);\n          $inputEl.trigger('change');\n        }\n      }\n    }\n  }, {\n    key: \"updateCurrentMonthYear\",\n    value: function updateCurrentMonthYear(dir) {\n      var calendar = this;\n      var $months = calendar.$months,\n          $el = calendar.$el,\n          monthNames = calendar.monthNames;\n      var currentLocaleMonth;\n      var currentLocaleYear;\n\n      if (typeof dir === 'undefined') {\n        calendar.currentMonth = parseInt($months.eq(1).attr('data-month'), 10);\n        calendar.currentYear = parseInt($months.eq(1).attr('data-year'), 10);\n        currentLocaleMonth = $months.eq(1).attr('data-locale-month');\n        currentLocaleYear = $months.eq(1).attr('data-locale-year');\n      } else {\n        calendar.currentMonth = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-month'), 10);\n        calendar.currentYear = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-year'), 10);\n        currentLocaleMonth = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-month');\n        currentLocaleYear = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-year');\n      }\n\n      $el.find('.current-month-value').text(monthNames[currentLocaleMonth]);\n      $el.find('.current-year-value').text(currentLocaleYear);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var calendar = this;\n      var currentYear = calendar.currentYear,\n          currentMonth = calendar.currentMonth,\n          $wrapperEl = calendar.$wrapperEl;\n      var currentDate = new Date(currentYear, currentMonth);\n      var prevMonthHtml = calendar.renderMonth(currentDate, 'prev');\n      var currentMonthHtml = calendar.renderMonth(currentDate);\n      var nextMonthHtml = calendar.renderMonth(currentDate, 'next');\n      $wrapperEl.transition(0).html(\"\".concat(prevMonthHtml).concat(currentMonthHtml).concat(nextMonthHtml)).transform('translate3d(0,0,0)');\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.monthsTranslate = 0;\n      calendar.setMonthsTranslate();\n      calendar.$months.each(function (monthEl) {\n        calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n      });\n    }\n  }, {\n    key: \"onMonthChangeStart\",\n    value: function onMonthChangeStart(dir) {\n      var calendar = this;\n      var $months = calendar.$months,\n          currentYear = calendar.currentYear,\n          currentMonth = calendar.currentMonth;\n      calendar.updateCurrentMonthYear(dir);\n      $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n      var currentIndex = dir === 'next' ? $months.length - 1 : 0;\n      $months.eq(currentIndex).addClass('calendar-month-current');\n      $months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'calendar-month-prev' : 'calendar-month-next');\n      calendar.emit('local::monthYearChangeStart calendarMonthYearChangeStart', calendar, currentYear, currentMonth);\n    }\n  }, {\n    key: \"onMonthChangeEnd\",\n    value: function onMonthChangeEnd(dir, rebuildBoth) {\n      var calendar = this;\n      var currentYear = calendar.currentYear,\n          currentMonth = calendar.currentMonth,\n          $wrapperEl = calendar.$wrapperEl,\n          monthsTranslate = calendar.monthsTranslate;\n      calendar.animating = false;\n      var nextMonthHtml;\n      var prevMonthHtml;\n      var currentMonthHtml;\n      $wrapperEl.find('.calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)').remove();\n\n      if (typeof dir === 'undefined') {\n        dir = 'next'; // eslint-disable-line\n\n        rebuildBoth = true; // eslint-disable-line\n      }\n\n      if (!rebuildBoth) {\n        currentMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), dir);\n      } else {\n        $wrapperEl.find('.calendar-month-next, .calendar-month-prev').remove();\n        prevMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'prev');\n        nextMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'next');\n      }\n\n      if (dir === 'next' || rebuildBoth) {\n        $wrapperEl.append(currentMonthHtml || nextMonthHtml);\n      }\n\n      if (dir === 'prev' || rebuildBoth) {\n        $wrapperEl.prepend(currentMonthHtml || prevMonthHtml);\n      }\n\n      var $months = $wrapperEl.find('.calendar-month');\n      calendar.$months = $months;\n      calendar.setMonthsTranslate(monthsTranslate);\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar, dir === 'next' ? $months.eq($months.length - 1)[0] : $months.eq(0)[0]);\n      calendar.emit('local::monthYearChangeEnd calendarMonthYearChangeEnd', calendar, currentYear, currentMonth);\n    }\n  }, {\n    key: \"setMonthsTranslate\",\n    value: function setMonthsTranslate(translate) {\n      var calendar = this;\n      var $months = calendar.$months,\n          isH = calendar.isHorizontal,\n          inverter = calendar.inverter; // eslint-disable-next-line\n\n      translate = translate || calendar.monthsTranslate || 0;\n\n      if (typeof calendar.monthsTranslate === 'undefined') {\n        calendar.monthsTranslate = translate;\n      }\n\n      $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n      var prevMonthTranslate = -(translate + 1) * 100 * inverter;\n      var currentMonthTranslate = -translate * 100 * inverter;\n      var nextMonthTranslate = -(translate - 1) * 100 * inverter;\n      $months.eq(0).transform(\"translate3d(\".concat(isH ? prevMonthTranslate : 0, \"%, \").concat(isH ? 0 : prevMonthTranslate, \"%, 0)\")).addClass('calendar-month-prev');\n      $months.eq(1).transform(\"translate3d(\".concat(isH ? currentMonthTranslate : 0, \"%, \").concat(isH ? 0 : currentMonthTranslate, \"%, 0)\")).addClass('calendar-month-current');\n      $months.eq(2).transform(\"translate3d(\".concat(isH ? nextMonthTranslate : 0, \"%, \").concat(isH ? 0 : nextMonthTranslate, \"%, 0)\")).addClass('calendar-month-next');\n    }\n  }, {\n    key: \"nextMonth\",\n    value: function nextMonth(transition) {\n      var calendar = this;\n      var params = calendar.params,\n          $wrapperEl = calendar.$wrapperEl,\n          inverter = calendar.inverter,\n          isH = calendar.isHorizontal;\n\n      if (typeof transition === 'undefined' || typeof transition === 'object') {\n        transition = ''; // eslint-disable-line\n\n        if (!params.animate) transition = 0; // eslint-disable-line\n      }\n\n      var nextMonth = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-month'), 10);\n      var nextYear = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-year'), 10);\n      var nextDate = new Date(nextYear, nextMonth);\n      var nextDateTime = nextDate.getTime();\n      var transitionEndCallback = !calendar.animating;\n\n      if (params.maxDate) {\n        if (nextDateTime > new Date(params.maxDate).getTime()) {\n          calendar.resetMonth();\n          return;\n        }\n      }\n\n      calendar.monthsTranslate -= 1;\n\n      if (nextMonth === calendar.currentMonth) {\n        var nextMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n        var nextMonthHtml = $(calendar.renderMonth(nextDateTime, 'next')).transform(\"translate3d(\".concat(isH ? nextMonthTranslate : 0, \"%, \").concat(isH ? 0 : nextMonthTranslate, \"%, 0)\")).addClass('calendar-month-next');\n        $wrapperEl.append(nextMonthHtml[0]);\n        calendar.$months = $wrapperEl.find('.calendar-month');\n        calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(calendar.$months.length - 1)[0]);\n      }\n\n      calendar.animating = true;\n      calendar.onMonthChangeStart('next');\n      var translate = calendar.monthsTranslate * 100 * inverter;\n      $wrapperEl.transition(transition).transform(\"translate3d(\".concat(isH ? translate : 0, \"%, \").concat(isH ? 0 : translate, \"%, 0)\"));\n\n      if (transitionEndCallback) {\n        $wrapperEl.transitionEnd(function () {\n          calendar.onMonthChangeEnd('next');\n        });\n      }\n\n      if (!params.animate) {\n        calendar.onMonthChangeEnd('next');\n      }\n    }\n  }, {\n    key: \"prevMonth\",\n    value: function prevMonth(transition) {\n      var calendar = this;\n      var params = calendar.params,\n          $wrapperEl = calendar.$wrapperEl,\n          inverter = calendar.inverter,\n          isH = calendar.isHorizontal;\n\n      if (typeof transition === 'undefined' || typeof transition === 'object') {\n        transition = ''; // eslint-disable-line\n\n        if (!params.animate) transition = 0; // eslint-disable-line\n      }\n\n      var prevMonth = parseInt(calendar.$months.eq(0).attr('data-month'), 10);\n      var prevYear = parseInt(calendar.$months.eq(0).attr('data-year'), 10);\n      var prevDate = new Date(prevYear, prevMonth + 1, -1);\n      var prevDateTime = prevDate.getTime();\n      var transitionEndCallback = !calendar.animating;\n\n      if (params.minDate) {\n        var minDate = new Date(params.minDate);\n        minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n        if (prevDateTime < minDate.getTime()) {\n          calendar.resetMonth();\n          return;\n        }\n      }\n\n      calendar.monthsTranslate += 1;\n\n      if (prevMonth === calendar.currentMonth) {\n        var prevMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n        var prevMonthHtml = $(calendar.renderMonth(prevDateTime, 'prev')).transform(\"translate3d(\".concat(isH ? prevMonthTranslate : 0, \"%, \").concat(isH ? 0 : prevMonthTranslate, \"%, 0)\")).addClass('calendar-month-prev');\n        $wrapperEl.prepend(prevMonthHtml[0]);\n        calendar.$months = $wrapperEl.find('.calendar-month');\n        calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(0)[0]);\n      }\n\n      calendar.animating = true;\n      calendar.onMonthChangeStart('prev');\n      var translate = calendar.monthsTranslate * 100 * inverter;\n      $wrapperEl.transition(transition).transform(\"translate3d(\".concat(isH ? translate : 0, \"%, \").concat(isH ? 0 : translate, \"%, 0)\"));\n\n      if (transitionEndCallback) {\n        $wrapperEl.transitionEnd(function () {\n          calendar.onMonthChangeEnd('prev');\n        });\n      }\n\n      if (!params.animate) {\n        calendar.onMonthChangeEnd('prev');\n      }\n    }\n  }, {\n    key: \"resetMonth\",\n    value: function resetMonth(transition) {\n      if (transition === void 0) {\n        transition = '';\n      }\n\n      var calendar = this;\n      var $wrapperEl = calendar.$wrapperEl,\n          inverter = calendar.inverter,\n          isH = calendar.isHorizontal,\n          monthsTranslate = calendar.monthsTranslate;\n      var translate = monthsTranslate * 100 * inverter;\n      $wrapperEl.transition(transition).transform(\"translate3d(\".concat(isH ? translate : 0, \"%, \").concat(isH ? 0 : translate, \"%, 0)\"));\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"setYearMonth\",\n    value: function setYearMonth(year, month, transition) {\n      var calendar = this;\n      var params = calendar.params,\n          isH = calendar.isHorizontal,\n          $wrapperEl = calendar.$wrapperEl,\n          inverter = calendar.inverter; // eslint-disable-next-line\n\n      if (typeof year === 'undefined') year = calendar.currentYear; // eslint-disable-next-line\n\n      if (typeof month === 'undefined') month = calendar.currentMonth;\n\n      if (typeof transition === 'undefined' || typeof transition === 'object') {\n        // eslint-disable-next-line\n        transition = ''; // eslint-disable-next-line\n\n        if (!params.animate) transition = 0;\n      }\n\n      var targetDate;\n\n      if (year < calendar.currentYear) {\n        targetDate = new Date(year, month + 1, -1).getTime();\n      } else {\n        targetDate = new Date(year, month).getTime();\n      }\n\n      if (params.maxDate && targetDate > new Date(params.maxDate).getTime()) {\n        return false;\n      }\n\n      if (params.minDate) {\n        var minDate = new Date(params.minDate);\n        minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n        if (targetDate < minDate.getTime()) {\n          return false;\n        }\n      }\n\n      var currentDate = new Date(calendar.currentYear, calendar.currentMonth).getTime();\n      var dir = targetDate > currentDate ? 'next' : 'prev';\n      var newMonthHTML = calendar.renderMonth(new Date(year, month));\n      calendar.monthsTranslate = calendar.monthsTranslate || 0;\n      var prevTranslate = calendar.monthsTranslate;\n      var monthTranslate;\n      var transitionEndCallback = !calendar.animating && transition !== 0;\n\n      if (targetDate > currentDate) {\n        // To next\n        calendar.monthsTranslate -= 1;\n        if (!calendar.animating) calendar.$months.eq(calendar.$months.length - 1).remove();\n        $wrapperEl.append(newMonthHTML);\n        calendar.$months = $wrapperEl.find('.calendar-month');\n        monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n        calendar.$months.eq(calendar.$months.length - 1).transform(\"translate3d(\".concat(isH ? monthTranslate : 0, \"%, \").concat(isH ? 0 : monthTranslate, \"%, 0)\")).addClass('calendar-month-next');\n      } else {\n        // To prev\n        calendar.monthsTranslate += 1;\n        if (!calendar.animating) calendar.$months.eq(0).remove();\n        $wrapperEl.prepend(newMonthHTML);\n        calendar.$months = $wrapperEl.find('.calendar-month');\n        monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n        calendar.$months.eq(0).transform(\"translate3d(\".concat(isH ? monthTranslate : 0, \"%, \").concat(isH ? 0 : monthTranslate, \"%, 0)\")).addClass('calendar-month-prev');\n      }\n\n      calendar.emit('local::monthAdd calendarMonthAdd', dir === 'next' ? calendar.$months.eq(calendar.$months.length - 1)[0] : calendar.$months.eq(0)[0]);\n      calendar.animating = true;\n      calendar.onMonthChangeStart(dir);\n      var wrapperTranslate = calendar.monthsTranslate * 100 * inverter;\n      $wrapperEl.transition(transition).transform(\"translate3d(\".concat(isH ? wrapperTranslate : 0, \"%, \").concat(isH ? 0 : wrapperTranslate, \"%, 0)\"));\n\n      if (transitionEndCallback) {\n        $wrapperEl.transitionEnd(function () {\n          calendar.onMonthChangeEnd(dir, true);\n        });\n      }\n\n      if (!params.animate || transition === 0) {\n        calendar.onMonthChangeEnd(dir, true);\n      }\n    }\n  }, {\n    key: \"nextYear\",\n    value: function nextYear() {\n      var calendar = this;\n      calendar.setYearMonth(calendar.currentYear + 1);\n    }\n  }, {\n    key: \"prevYear\",\n    value: function prevYear() {\n      var calendar = this;\n      calendar.setYearMonth(calendar.currentYear - 1);\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"dateInRange\",\n    value: function dateInRange(dayDate, range) {\n      var match = false;\n      var i;\n      if (!range) return false;\n\n      if (Array.isArray(range)) {\n        for (i = 0; i < range.length; i += 1) {\n          if (range[i].from || range[i].to) {\n            if (range[i].from && range[i].to) {\n              if (dayDate <= new Date(range[i].to).getTime() && dayDate >= new Date(range[i].from).getTime()) {\n                match = true;\n              }\n            } else if (range[i].from) {\n              if (dayDate >= new Date(range[i].from).getTime()) {\n                match = true;\n              }\n            } else if (range[i].to) {\n              if (dayDate <= new Date(range[i].to).getTime()) {\n                match = true;\n              }\n            }\n          } else if (range[i].date) {\n            if (dayDate === new Date(range[i].date).getTime()) {\n              match = true;\n            }\n          } else if (dayDate === new Date(range[i]).getTime()) {\n            match = true;\n          }\n        }\n      } else if (range.from || range.to) {\n        if (range.from && range.to) {\n          if (dayDate <= new Date(range.to).getTime() && dayDate >= new Date(range.from).getTime()) {\n            match = true;\n          }\n        } else if (range.from) {\n          if (dayDate >= new Date(range.from).getTime()) {\n            match = true;\n          }\n        } else if (range.to) {\n          if (dayDate <= new Date(range.to).getTime()) {\n            match = true;\n          }\n        }\n      } else if (range.date) {\n        match = dayDate === new Date(range.date).getTime();\n      } else if (typeof range === 'function') {\n        match = range(new Date(dayDate));\n      }\n\n      return match;\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"daysInMonth\",\n    value: function daysInMonth(date) {\n      var d = new Date(date);\n      return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n    }\n  }, {\n    key: \"renderMonths\",\n    value: function renderMonths(date) {\n      var calendar = this;\n\n      if (calendar.params.renderMonths) {\n        return calendar.params.renderMonths.call(calendar, date);\n      }\n\n      return $jsx(\"div\", {\n        class: \"calendar-months-wrapper\"\n      }, calendar.renderMonth(date, 'prev'), calendar.renderMonth(date), calendar.renderMonth(date, 'next'));\n    }\n  }, {\n    key: \"renderMonth\",\n    value: function renderMonth(d, offset) {\n      var calendar = this;\n      var params = calendar.params,\n          value = calendar.value;\n\n      if (params.renderMonth) {\n        return params.renderMonth.call(calendar, d, offset);\n      }\n\n      var date = new Date(d);\n      var year = date.getFullYear();\n      var month = date.getMonth();\n      var localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter(date));\n      if (localeMonth < 0) localeMonth = month;\n      var localeYear = calendar.yearFormatter(date);\n\n      if (offset === 'next') {\n        if (month === 11) date = new Date(year + 1, 0);else date = new Date(year, month + 1, 1);\n      }\n\n      if (offset === 'prev') {\n        if (month === 0) date = new Date(year - 1, 11);else date = new Date(year, month - 1, 1);\n      }\n\n      if (offset === 'next' || offset === 'prev') {\n        month = date.getMonth();\n        year = date.getFullYear();\n        localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter(date));\n        if (localeMonth < 0) localeMonth = month;\n        localeYear = calendar.yearFormatter(date);\n      }\n\n      var currentValues = [];\n      var today = new Date().setHours(0, 0, 0, 0);\n      var minDate = params.minDate ? new Date(params.minDate).getTime() : null;\n      var maxDate = params.maxDate ? new Date(params.maxDate).getTime() : null;\n      var rows = 6;\n      var cols = 7;\n      var daysInPrevMonth = calendar.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000);\n      var daysInMonth = calendar.daysInMonth(date);\n      var minDayNumber = params.firstDay === 6 ? 0 : 1;\n      var monthHtml = '';\n      var dayIndex = 0 + (params.firstDay - 1);\n      var disabled;\n      var hasEvents;\n      var firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n      if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n\n      if (value && value.length) {\n        for (var i = 0; i < value.length; i += 1) {\n          currentValues.push(new Date(value[i]).setHours(0, 0, 0, 0));\n        }\n      }\n\n      for (var row = 1; row <= rows; row += 1) {\n        var rowHtml = '';\n\n        var _loop = function _loop(col) {\n          dayIndex += 1;\n          var dayDate = void 0;\n          var dayNumber = dayIndex - firstDayOfMonthIndex;\n          var addClass = '';\n\n          if (row === 1 && col === 1 && dayNumber > minDayNumber && params.firstDay !== 1) {\n            dayIndex -= 7;\n            dayNumber = dayIndex - firstDayOfMonthIndex;\n          }\n\n          var weekDayIndex = col - 1 + params.firstDay > 6 ? col - 1 - 7 + params.firstDay : col - 1 + params.firstDay;\n\n          if (dayNumber < 0) {\n            dayNumber = daysInPrevMonth + dayNumber + 1;\n            addClass += ' calendar-day-prev';\n            dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n          } else {\n            dayNumber += 1;\n\n            if (dayNumber > daysInMonth) {\n              dayNumber -= daysInMonth;\n              addClass += ' calendar-day-next';\n              dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n            } else {\n              dayDate = new Date(year, month, dayNumber).getTime();\n            }\n          } // Today\n\n\n          if (dayDate === today) addClass += ' calendar-day-today'; // Selected\n\n          if (params.rangePicker && currentValues.length === 2) {\n            if (dayDate >= currentValues[0] && dayDate <= currentValues[1]) {\n              addClass += ' calendar-day-selected';\n            }\n\n            if (currentValues[0] !== currentValues[1]) {\n              if (dayDate > currentValues[0] && dayDate < currentValues[1]) {\n                addClass += ' calendar-day-selected-range';\n              }\n\n              if (dayDate === currentValues[0]) {\n                addClass += ' calendar-day-selected-left';\n              }\n\n              if (dayDate === currentValues[1]) {\n                addClass += ' calendar-day-selected-right';\n              }\n            }\n          } else if (currentValues.indexOf(dayDate) >= 0) addClass += ' calendar-day-selected'; // Weekend\n\n\n          if (params.weekendDays.indexOf(weekDayIndex) >= 0) {\n            addClass += ' calendar-day-weekend';\n          } // Events\n\n\n          var eventsHtml = '';\n          hasEvents = false;\n\n          if (params.events) {\n            if (calendar.dateInRange(dayDate, params.events)) {\n              hasEvents = true;\n            }\n          }\n\n          if (hasEvents) {\n            addClass += ' calendar-day-has-events'; // prettier-ignore\n\n            eventsHtml = \"\\n            <span class=\\\"calendar-day-events\\\">\\n              <span class=\\\"calendar-day-event\\\"></span>\\n            </span>\\n          \";\n\n            if (Array.isArray(params.events)) {\n              var eventDots = [];\n              params.events.forEach(function (ev) {\n                var color = ev.color || '';\n\n                if (eventDots.indexOf(color) < 0 && calendar.dateInRange(dayDate, ev)) {\n                  eventDots.push(color);\n                }\n              }); // prettier-ignore\n\n              eventsHtml = \"\\n              <span class=\\\"calendar-day-events\\\">\\n                \".concat(eventDots.map(function (color) {\n                return \"\\n                  <span class=\\\"calendar-day-event\\\" style=\\\"\".concat(color ? \"background-color: \".concat(color) : '', \"\\\"></span>\\n                \").trim();\n              }).join(''), \"\\n              </span>\\n            \");\n            }\n          } // Custom Ranges\n\n\n          if (params.rangesClasses) {\n            for (var k = 0; k < params.rangesClasses.length; k += 1) {\n              if (calendar.dateInRange(dayDate, params.rangesClasses[k].range)) {\n                addClass += \" \".concat(params.rangesClasses[k].cssClass);\n              }\n            }\n          } // Disabled\n\n\n          disabled = false;\n\n          if (minDate && dayDate < minDate || maxDate && dayDate > maxDate) {\n            disabled = true;\n          }\n\n          if (params.disabled) {\n            if (calendar.dateInRange(dayDate, params.disabled)) {\n              disabled = true;\n            }\n          }\n\n          if (disabled) {\n            addClass += ' calendar-day-disabled';\n          }\n\n          dayDate = new Date(dayDate);\n          var dayYear = dayDate.getFullYear();\n          var dayMonth = dayDate.getMonth();\n          var dayNumberDisplay = calendar.dayFormatter(dayDate); // prettier-ignore\n\n          rowHtml += \"\\n          <div data-year=\\\"\".concat(dayYear, \"\\\" data-month=\\\"\").concat(dayMonth, \"\\\" data-day=\\\"\").concat(dayNumber, \"\\\" class=\\\"calendar-day\").concat(addClass, \"\\\" data-date=\\\"\").concat(dayYear, \"-\").concat(dayMonth, \"-\").concat(dayNumber, \"\\\">\\n            <span class=\\\"calendar-day-number\\\">\").concat(dayNumberDisplay).concat(eventsHtml, \"</span>\\n          </div>\").trim();\n        };\n\n        for (var col = 1; col <= cols; col += 1) {\n          _loop(col);\n        }\n\n        monthHtml += \"<div class=\\\"calendar-row\\\">\".concat(rowHtml, \"</div>\");\n      }\n\n      monthHtml = \"<div class=\\\"calendar-month\\\" data-year=\\\"\".concat(year, \"\\\" data-month=\\\"\").concat(month, \"\\\" data-locale-year=\\\"\").concat(localeYear, \"\\\" data-locale-month=\\\"\").concat(localeMonth, \"\\\">\").concat(monthHtml, \"</div>\");\n      return monthHtml;\n    }\n  }, {\n    key: \"renderWeekHeader\",\n    value: function renderWeekHeader() {\n      var calendar = this;\n\n      if (calendar.params.renderWeekHeader) {\n        return calendar.params.renderWeekHeader.call(calendar);\n      }\n\n      var params = calendar.params;\n      var weekDaysHtml = '';\n\n      for (var i = 0; i < 7; i += 1) {\n        var dayIndex = i + params.firstDay > 6 ? i - 7 + params.firstDay : i + params.firstDay;\n        var dayName = calendar.dayNamesShort[dayIndex];\n        weekDaysHtml += \"<div class=\\\"calendar-week-day\\\">\".concat(dayName, \"</div>\");\n      }\n\n      return $jsx(\"div\", {\n        class: \"calendar-week-header\"\n      }, weekDaysHtml);\n    }\n  }, {\n    key: \"renderMonthSelector\",\n    value: function renderMonthSelector() {\n      var calendar = this;\n\n      if (calendar.params.renderMonthSelector) {\n        return calendar.params.renderMonthSelector.call(calendar);\n      }\n\n      return $jsx(\"div\", {\n        class: \"calendar-month-selector\"\n      }, $jsx(\"a\", {\n        class: \"link icon-only calendar-prev-month-button\"\n      }, $jsx(\"i\", {\n        class: \"icon icon-prev\"\n      })), calendar.params.monthPicker ? $jsx(\"a\", {\n        class: \"current-month-value link\"\n      }) : $jsx(\"span\", {\n        class: \"current-month-value\"\n      }), $jsx(\"a\", {\n        class: \"link icon-only calendar-next-month-button\"\n      }, $jsx(\"i\", {\n        class: \"icon icon-next\"\n      })));\n    }\n  }, {\n    key: \"renderYearSelector\",\n    value: function renderYearSelector() {\n      var calendar = this;\n\n      if (calendar.params.renderYearSelector) {\n        return calendar.params.renderYearSelector.call(calendar);\n      }\n\n      return $jsx(\"div\", {\n        class: \"calendar-year-selector\"\n      }, $jsx(\"a\", {\n        class: \"link icon-only calendar-prev-year-button\"\n      }, $jsx(\"i\", {\n        class: \"icon icon-prev\"\n      })), calendar.params.yearPicker ? $jsx(\"a\", {\n        class: \"current-year-value link\"\n      }) : $jsx(\"span\", {\n        class: \"current-year-value\"\n      }), $jsx(\"a\", {\n        class: \"link icon-only calendar-next-year-button\"\n      }, $jsx(\"i\", {\n        class: \"icon icon-next\"\n      })));\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"renderTimeSelector\",\n    value: function renderTimeSelector() {\n      var calendar = this;\n      var value = calendar.value && calendar.value[0];\n      var timeString;\n      if (value) timeString = calendar.timeSelectorFormatter(value);\n      return $jsx(\"div\", {\n        class: \"calendar-time-selector\"\n      }, $jsx(\"span\", null, calendar.params.timePickerLabel), $jsx(\"a\", {\n        class: \"link\"\n      }, timeString || calendar.params.timePickerPlaceholder));\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      var calendar = this;\n\n      if (calendar.params.renderHeader) {\n        return calendar.params.renderHeader.call(calendar);\n      }\n\n      return $jsx(\"div\", {\n        class: \"calendar-header\"\n      }, $jsx(\"div\", {\n        class: \"calendar-selected-date\"\n      }, calendar.params.headerPlaceholder));\n    }\n  }, {\n    key: \"renderFooter\",\n    value: function renderFooter() {\n      var calendar = this;\n      var app = calendar.app;\n\n      if (calendar.params.renderFooter) {\n        return calendar.params.renderFooter.call(calendar);\n      }\n\n      return $jsx(\"div\", {\n        class: \"calendar-footer\"\n      }, $jsx(\"a\", {\n        class: \"\".concat(app.theme === 'md' ? 'button' : 'link', \" calendar-close sheet-close popover-close\")\n      }, calendar.params.toolbarCloseText));\n    }\n  }, {\n    key: \"renderToolbar\",\n    value: function renderToolbar() {\n      var calendar = this;\n\n      if (calendar.params.renderToolbar) {\n        return calendar.params.renderToolbar.call(calendar, calendar);\n      } // prettier-ignore\n\n\n      return $jsx(\"div\", {\n        class: \"toolbar toolbar-top no-shadow\"\n      }, $jsx(\"div\", {\n        class: \"toolbar-inner\"\n      }, calendar.params.monthSelector ? calendar.renderMonthSelector() : '', calendar.params.yearSelector ? calendar.renderYearSelector() : ''));\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"renderInline\",\n    value: function renderInline() {\n      var calendar = this;\n      var _calendar$params4 = calendar.params,\n          cssClass = _calendar$params4.cssClass,\n          toolbar = _calendar$params4.toolbar,\n          header = _calendar$params4.header,\n          footer = _calendar$params4.footer,\n          rangePicker = _calendar$params4.rangePicker,\n          weekHeader = _calendar$params4.weekHeader;\n      var value = calendar.value,\n          hasTimePicker = calendar.hasTimePicker;\n      var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n      return $jsx(\"div\", {\n        class: \"calendar calendar-inline \".concat(rangePicker ? 'calendar-range' : '', \" \").concat(cssClass || '')\n      }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n        class: \"calendar-months\"\n      }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n    }\n  }, {\n    key: \"renderCustomModal\",\n    value: function renderCustomModal() {\n      var calendar = this;\n      var _calendar$params5 = calendar.params,\n          cssClass = _calendar$params5.cssClass,\n          toolbar = _calendar$params5.toolbar,\n          header = _calendar$params5.header,\n          footer = _calendar$params5.footer,\n          rangePicker = _calendar$params5.rangePicker,\n          weekHeader = _calendar$params5.weekHeader;\n      var value = calendar.value,\n          hasTimePicker = calendar.hasTimePicker;\n      var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n      return $jsx(\"div\", {\n        class: \"calendar calendar-modal \".concat(rangePicker ? 'calendar-range' : '', \" \").concat(cssClass || '')\n      }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n        class: \"calendar-months\"\n      }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n    }\n  }, {\n    key: \"renderSheet\",\n    value: function renderSheet() {\n      var calendar = this;\n      var _calendar$params6 = calendar.params,\n          cssClass = _calendar$params6.cssClass,\n          toolbar = _calendar$params6.toolbar,\n          header = _calendar$params6.header,\n          footer = _calendar$params6.footer,\n          rangePicker = _calendar$params6.rangePicker,\n          weekHeader = _calendar$params6.weekHeader;\n      var value = calendar.value,\n          hasTimePicker = calendar.hasTimePicker;\n      var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n      return $jsx(\"div\", {\n        class: \"sheet-modal calendar calendar-sheet \".concat(rangePicker ? 'calendar-range' : '', \" \").concat(cssClass || '')\n      }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n        class: \"sheet-modal-inner calendar-months\"\n      }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n    }\n  }, {\n    key: \"renderPopover\",\n    value: function renderPopover() {\n      var calendar = this;\n      var _calendar$params7 = calendar.params,\n          cssClass = _calendar$params7.cssClass,\n          toolbar = _calendar$params7.toolbar,\n          header = _calendar$params7.header,\n          footer = _calendar$params7.footer,\n          rangePicker = _calendar$params7.rangePicker,\n          weekHeader = _calendar$params7.weekHeader;\n      var value = calendar.value,\n          hasTimePicker = calendar.hasTimePicker;\n      var date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n      return $jsx(\"div\", {\n        class: \"popover calendar-popover\"\n      }, $jsx(\"div\", {\n        class: \"popover-inner\"\n      }, $jsx(\"div\", {\n        class: \"calendar \".concat(rangePicker ? 'calendar-range' : '', \" \").concat(cssClass || '')\n      }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n        class: \"calendar-months\"\n      }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter())));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var calendar = this;\n      var params = calendar.params;\n      if (params.render) return params.render.call(calendar);\n\n      if (!calendar.inline) {\n        var modalType = params.openIn;\n        if (modalType === 'auto') modalType = calendar.isPopover() ? 'popover' : 'sheet';\n        if (modalType === 'popover') return calendar.renderPopover();\n        if (modalType === 'sheet') return calendar.renderSheet();\n        return calendar.renderCustomModal();\n      }\n\n      return calendar.renderInline();\n    }\n  }, {\n    key: \"openMonthPicker\",\n    value: function openMonthPicker() {\n      var calendar = this;\n      var $el = calendar.$el,\n          app = calendar.app;\n      if (!$el || !$el.length) return;\n      $el.append('<div class=\"popover calendar-popover calendar-month-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-month-picker\"></div></div></div>');\n      calendar.monthPickerPopover = app.popover.create({\n        el: $el.find('.calendar-month-picker-popover'),\n        targetEl: $el.find('.calendar-month-selector'),\n        backdrop: true,\n        backdropUnique: true,\n        on: {\n          close: function close() {\n            calendar.closeMonthPicker();\n          },\n          closed: function closed() {\n            if (calendar.monthPickerPopover.$el) calendar.monthPickerPopover.$el.remove();\n            calendar.monthPickerPopover.destroy();\n\n            if (calendar.monthPickerInstance) {\n              calendar.monthPickerInstance.close();\n              calendar.monthPickerInstance.destroy();\n            }\n\n            delete calendar.monthPickerInstance;\n            delete calendar.monthPickerPopover;\n          }\n        }\n      });\n      calendar.monthPickerPopover.open();\n      var localeMonth = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n      var values = [];\n      var displayValues = [];\n      calendar.monthNames.forEach(function (m, index) {\n        values.push(index);\n        displayValues.push(m);\n      });\n      calendar.monthPickerInstance = app.picker.create({\n        containerEl: calendar.monthPickerPopover.$el.find('.calendar-month-picker'),\n        value: [localeMonth],\n        toolbar: false,\n        rotateEffect: false,\n        toolbarCloseText: calendar.params.toolbarCloseText,\n        cols: [{\n          values: values,\n          displayValues: displayValues\n        }]\n      });\n    }\n  }, {\n    key: \"closeMonthPicker\",\n    value: function closeMonthPicker() {\n      var calendar = this;\n      if (calendar.monthPickerPopover && calendar.monthPickerPopover.opened) calendar.monthPickerPopover.close();\n      var index = calendar.monthPickerInstance.value[0];\n      var localeMonthIndex = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n      var monthIndex = calendar.currentMonth;\n      var diff = localeMonthIndex - monthIndex;\n      var diffIndex = index - diff;\n      calendar.setYearMonth(calendar.currentYear, diffIndex, 0);\n    }\n  }, {\n    key: \"openYearPicker\",\n    value: function openYearPicker() {\n      var calendar = this;\n      var $el = calendar.$el,\n          app = calendar.app;\n      if (!$el || !$el.length) return;\n      $el.append('<div class=\"popover calendar-popover calendar-year-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-year-picker\"></div></div></div>');\n      calendar.yearPickerPopover = app.popover.create({\n        el: $el.find('.calendar-year-picker-popover'),\n        targetEl: $el.find('.calendar-year-selector'),\n        backdrop: true,\n        backdropUnique: true,\n        on: {\n          close: function close() {\n            calendar.closeYearPicker();\n          },\n          closed: function closed() {\n            if (calendar.yearPickerPopover.$el) calendar.yearPickerPopover.$el.remove();\n            calendar.yearPickerPopover.destroy();\n\n            if (calendar.yearPickerInstance) {\n              calendar.yearPickerInstance.close();\n              calendar.yearPickerInstance.destroy();\n            }\n\n            delete calendar.yearPickerInstance;\n            delete calendar.yearPickerPopover;\n          }\n        }\n      });\n      calendar.yearPickerPopover.open();\n      var currentYear = calendar.currentYear;\n      var yearMin = calendar.params.yearPickerMin || new Date().getFullYear() - 100;\n\n      if (calendar.params.minDate) {\n        yearMin = Math.max(yearMin, new Date(calendar.params.minDate).getFullYear());\n      }\n\n      var yearMax = calendar.params.yearPickerMax || new Date().getFullYear() + 100;\n\n      if (calendar.params.maxDate) {\n        yearMax = Math.min(yearMax, new Date(calendar.params.maxDate).getFullYear());\n      }\n\n      var years = [];\n\n      for (var i = yearMin; i <= yearMax; i += 1) {\n        years.push(i);\n      }\n\n      calendar.yearPickerInstance = app.picker.create({\n        containerEl: calendar.yearPickerPopover.$el.find('.calendar-year-picker'),\n        value: [currentYear],\n        toolbar: false,\n        rotateEffect: false,\n        toolbarCloseText: calendar.params.toolbarCloseText,\n        cols: [{\n          values: years\n        }]\n      });\n    }\n  }, {\n    key: \"closeYearPicker\",\n    value: function closeYearPicker() {\n      var calendar = this;\n      if (calendar.yearPickerPopover && calendar.yearPickerPopover.opened) calendar.yearPickerPopover.close();\n      calendar.setYearMonth(calendar.yearPickerInstance.value[0], undefined, 0);\n    }\n  }, {\n    key: \"openTimePicker\",\n    value: function openTimePicker() {\n      var calendar = this;\n      var $el = calendar.$el,\n          app = calendar.app,\n          is12HoursFormat = calendar.is12HoursFormat;\n      if (!$el || !$el.length) return;\n      $el.append('<div class=\"popover calendar-popover calendar-time-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-time-picker\"></div></div></div>');\n      var hoursArr = [];\n      var minutesArr = [];\n      var hoursMin = is12HoursFormat ? 1 : 0;\n      var hoursMax = is12HoursFormat ? 12 : 23;\n\n      for (var i = hoursMin; i <= hoursMax; i += 1) {\n        hoursArr.push(i);\n      }\n\n      for (var _i2 = 0; _i2 <= 59; _i2 += 1) {\n        minutesArr.push(_i2);\n      }\n\n      var value;\n\n      if (calendar.value && calendar.value.length) {\n        value = [calendar.value[0].getHours(), calendar.value[0].getMinutes()];\n      } else {\n        value = [new Date().getHours(), new Date().getMinutes()];\n      }\n\n      if (is12HoursFormat) {\n        value.push(value[0] < 12 ? 'AM' : 'PM');\n        if (value[0] > 12) value[0] -= 12;\n        if (value[0] === 0) value[0] = 12;\n      }\n\n      calendar.timePickerPopover = app.popover.create({\n        el: $el.find('.calendar-time-picker-popover'),\n        targetEl: $el.find('.calendar-time-selector .link'),\n        backdrop: true,\n        backdropUnique: true,\n        on: {\n          close: function close() {\n            calendar.closeTimePicker();\n          },\n          closed: function closed() {\n            if (calendar.timePickerPopover.$el) calendar.timePickerPopover.$el.remove();\n            calendar.timePickerPopover.destroy();\n\n            if (calendar.timePickerInstance) {\n              calendar.timePickerInstance.close();\n              calendar.timePickerInstance.destroy();\n            }\n\n            delete calendar.timePickerInstance;\n            delete calendar.timePickerPopover;\n          }\n        }\n      });\n      calendar.timePickerPopover.open();\n      calendar.timePickerInstance = app.picker.create({\n        containerEl: calendar.timePickerPopover.$el.find('.calendar-time-picker'),\n        value: value,\n        toolbar: false,\n        rotateEffect: false,\n        toolbarCloseText: calendar.params.toolbarCloseText,\n        cols: [{\n          values: hoursArr\n        }, {\n          divider: true,\n          content: ':'\n        }, {\n          values: minutesArr,\n          displayValues: minutesArr.map(function (m) {\n            return m < 10 ? \"0\".concat(m) : m;\n          })\n        }].concat(_toConsumableArray(is12HoursFormat ? [{\n          values: ['AM', 'PM']\n        }] : []))\n      });\n    }\n  }, {\n    key: \"closeTimePicker\",\n    value: function closeTimePicker() {\n      var calendar = this;\n      var is12HoursFormat = calendar.is12HoursFormat;\n\n      if (calendar.timePickerInstance) {\n        var timePickerValue = calendar.timePickerInstance.value;\n        var hours = parseInt(timePickerValue[0], 10);\n        var minutes = parseInt(timePickerValue[1], 10);\n        var period = calendar.timePickerInstance.value[2];\n\n        if (is12HoursFormat) {\n          if (period === 'AM' && hours === 12) {\n            hours = 0;\n          } else if (period === 'PM' && hours !== 12) {\n            hours += 12;\n          }\n        }\n\n        var value = calendar.value && calendar.value.length && calendar.value[0];\n\n        if (!value) {\n          value = new Date();\n          value.setHours(hours, minutes, 0, 0);\n        } else {\n          value = new Date(value);\n          value.setHours(hours, minutes);\n        }\n\n        calendar.setValue([value]);\n        if (calendar.timePickerPopover && calendar.timePickerPopover.opened) calendar.timePickerPopover.close();\n      }\n    }\n  }, {\n    key: \"onOpen\",\n    value: function onOpen() {\n      var calendar = this;\n      var initialized = calendar.initialized,\n          $el = calendar.$el,\n          app = calendar.app,\n          $inputEl = calendar.$inputEl,\n          inline = calendar.inline,\n          value = calendar.value,\n          params = calendar.params;\n      calendar.closing = false;\n      calendar.opened = true;\n      calendar.opening = true; // Init main events\n\n      calendar.attachCalendarEvents();\n      var updateValue = !value && params.value; // Set value\n\n      if (!initialized) {\n        if (value) calendar.setValue(value, 0);else if (params.value) {\n          calendar.setValue(calendar.normalizeValues(params.value), 0);\n        }\n      } else if (value) {\n        calendar.setValue(value, 0);\n      } // Update current month and year\n\n\n      calendar.updateCurrentMonthYear(); // Set initial translate\n\n      calendar.monthsTranslate = 0;\n      calendar.setMonthsTranslate(); // Update input value\n\n      if (updateValue) calendar.updateValue();else if (params.header && value) {\n        calendar.updateValue(true);\n      } // Extra focus\n\n      if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n        $inputEl.trigger('focus');\n      }\n\n      calendar.initialized = true;\n      calendar.$months.each(function (monthEl) {\n        calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n      }); // Trigger events\n\n      if ($el) {\n        $el.trigger('calendar:open');\n      }\n\n      if ($inputEl) {\n        $inputEl.trigger('calendar:open');\n      }\n\n      calendar.emit('local::open calendarOpen', calendar);\n    }\n  }, {\n    key: \"onOpened\",\n    value: function onOpened() {\n      var calendar = this;\n      calendar.opening = false;\n\n      if (calendar.$el) {\n        calendar.$el.trigger('calendar:opened');\n      }\n\n      if (calendar.$inputEl) {\n        calendar.$inputEl.trigger('calendar:opened');\n      }\n\n      calendar.emit('local::opened calendarOpened', calendar);\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      var calendar = this;\n      var app = calendar.app;\n      calendar.opening = false;\n      calendar.closing = true;\n\n      if (calendar.$inputEl) {\n        if (app.theme === 'md') {\n          calendar.$inputEl.trigger('blur');\n        } else {\n          var validate = calendar.$inputEl.attr('validate');\n          var required = calendar.$inputEl.attr('required');\n\n          if (validate && required) {\n            app.input.validate(calendar.$inputEl);\n          }\n        }\n      }\n\n      if (calendar.detachCalendarEvents) {\n        calendar.detachCalendarEvents();\n      }\n\n      if (calendar.$el) {\n        calendar.$el.trigger('calendar:close');\n      }\n\n      if (calendar.$inputEl) {\n        calendar.$inputEl.trigger('calendar:close');\n      }\n\n      calendar.emit('local::close calendarClose', calendar);\n    }\n  }, {\n    key: \"onClosed\",\n    value: function onClosed() {\n      var calendar = this;\n      calendar.opened = false;\n      calendar.closing = false;\n\n      if (!calendar.inline) {\n        nextTick(function () {\n          if (calendar.modal && calendar.modal.el && calendar.modal.destroy) {\n            if (!calendar.params.routableModals) {\n              calendar.modal.destroy();\n            }\n          }\n\n          delete calendar.modal;\n        });\n      }\n\n      if (calendar.timePickerInstance) {\n        if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n        delete calendar.timePickerInstance;\n      }\n\n      if (calendar.$el) {\n        calendar.$el.trigger('calendar:closed');\n      }\n\n      if (calendar.$inputEl) {\n        calendar.$inputEl.trigger('calendar:closed');\n      }\n\n      calendar.emit('local::closed calendarClosed', calendar);\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var calendar = this;\n      var app = calendar.app,\n          opened = calendar.opened,\n          inline = calendar.inline,\n          $inputEl = calendar.$inputEl,\n          params = calendar.params;\n      if (opened) return;\n\n      if (inline) {\n        calendar.$el = $(calendar.render());\n        calendar.$el[0].f7Calendar = calendar;\n        calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n        calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n        calendar.$containerEl.append(calendar.$el);\n        calendar.onOpen();\n        calendar.onOpened();\n        return;\n      }\n\n      var modalType = params.openIn;\n\n      if (modalType === 'auto') {\n        modalType = calendar.isPopover() ? 'popover' : 'sheet';\n      }\n\n      var modalContent = calendar.render();\n      var modalParams = {\n        targetEl: $inputEl,\n        scrollToEl: params.scrollToInput ? $inputEl : undefined,\n        content: modalContent,\n        backdrop: params.backdrop === true || modalType === 'popover' && app.params.popover.backdrop !== false && params.backdrop !== false,\n        closeByBackdropClick: params.closeByBackdropClick,\n        on: {\n          open: function open() {\n            var modal = this;\n            calendar.modal = modal;\n            calendar.$el = modalType === 'popover' ? modal.$el.find('.calendar') : modal.$el;\n            calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n            calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n            calendar.$el[0].f7Calendar = calendar;\n\n            if (modalType === 'customModal') {\n              $(calendar.$el).find('.calendar-close').once('click', function () {\n                calendar.close();\n              });\n            }\n\n            calendar.onOpen();\n          },\n          opened: function opened() {\n            calendar.onOpened();\n          },\n          close: function close() {\n            calendar.onClose();\n          },\n          closed: function closed() {\n            calendar.onClosed();\n          }\n        }\n      };\n\n      if (modalType === 'sheet') {\n        modalParams.push = params.sheetPush;\n        modalParams.swipeToClose = params.sheetSwipeToClose;\n      }\n\n      if (params.routableModals && calendar.view) {\n        calendar.view.router.navigate({\n          url: calendar.url,\n          route: _defineProperty({\n            path: calendar.url\n          }, modalType, modalParams)\n        });\n      } else {\n        calendar.modal = app[modalType].create(modalParams);\n        calendar.modal.open();\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var calendar = this;\n      var opened = calendar.opened,\n          inline = calendar.inline;\n      if (!opened) return;\n\n      if (inline) {\n        calendar.onClose();\n        calendar.onClosed();\n        return;\n      }\n\n      if (calendar.params.routableModals && calendar.view) {\n        calendar.view.router.back();\n      } else {\n        calendar.modal.close();\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var calendar = this;\n      calendar.initInput();\n\n      if (calendar.inline) {\n        calendar.open();\n        calendar.emit('local::init calendarInit', calendar);\n        return;\n      }\n\n      if (!calendar.initialized && calendar.params.value) {\n        calendar.setValue(calendar.normalizeValues(calendar.params.value));\n      } // Attach input Events\n\n\n      if (calendar.$inputEl) {\n        calendar.attachInputEvents();\n      }\n\n      if (calendar.params.closeByOutsideClick) {\n        calendar.attachHtmlEvents();\n      }\n\n      calendar.emit('local::init calendarInit', calendar);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var calendar = this;\n      if (calendar.destroyed) return;\n      var $el = calendar.$el;\n      calendar.emit('local::beforeDestroy calendarBeforeDestroy', calendar);\n      if ($el) $el.trigger('calendar:beforedestroy');\n      calendar.close(); // Detach Events\n\n      if (calendar.$inputEl) {\n        calendar.detachInputEvents();\n      }\n\n      if (calendar.params.closeByOutsideClick) {\n        calendar.detachHtmlEvents();\n      }\n\n      if (calendar.timePickerInstance) {\n        if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n        delete calendar.timePickerInstance;\n      }\n\n      if ($el && $el.length) delete calendar.$el[0].f7Calendar;\n      deleteProps(calendar);\n      calendar.destroyed = true;\n    }\n  }]);\n\n  return Calendar;\n}(Framework7Class);\n\nexport default Calendar;","map":{"version":3,"names":["extend","nextTick","deleteProps","Framework7Class","$","getDevice","getSupport","$jsx","Calendar","app","params","calendar","$containerEl","containerEl","length","$inputEl","inputEl","isHorizontal","direction","inverter","rtl","inline","initialized","opened","url","animating","allowTouchMove","hasTimePicker","timePicker","rangePicker","multiple","dayFormatter","date","formatter","Intl","DateTimeFormat","locale","day","format","replace","monthFormatter","month","yearFormatter","year","timeSelectorFormatter","timePickerFormat","timeFormatCheckDate","Date","toLowerCase","is12HoursFormat","indexOf","monthNames","monthNamesShort","dayNames","dayNamesShort","getIntlNames","monthNamesIntl","monthNamesShortIntl","dayNamesIntl","dayNamesShortIntl","onInputClick","open","onInputFocus","e","preventDefault","onInputClear","setValue","update","onHtmlClick","$targetEl","target","destroyed","isPopover","closing","closest","monthPickerPopover","yearPickerPopover","timePickerPopover","close","attachInputEvents","on","inputReadOnly","f7ValidateReadonly","detachInputEvents","off","attachHtmlEvents","detachHtmlEvents","attachCalendarEvents","allowItemClick","isTouched","isMoved","touchStartX","touchStartY","touchCurrentX","touchCurrentY","touchStartTime","touchEndTime","currentTranslate","wrapperWidth","wrapperHeight","percentage","touchesDiff","isScrolling","$el","$wrapperEl","handleTouchStart","type","targetTouches","pageX","pageY","getTime","undefined","monthsTranslate","handleTouchMove","isH","Math","abs","offsetWidth","offsetHeight","transition","transform","handleTouchEnd","resetMonth","nextMonth","prevMonth","setTimeout","handleDayClick","$dayEl","parents","hasClass","dateYear","parseInt","attr","dateMonth","dateDay","emit","valueToAdd","value","setHours","getHours","getMinutes","addValue","closeOnSelect","onNextMonthClick","onPrevMonthClick","onNextYearClick","nextYear","onPrevYearClick","prevYear","onMonthSelectorClick","openMonthPicker","onYearSelectorClick","openYearPicker","onTimeSelectorClick","openTimePicker","passiveListener","touchEvents","start","passive","capture","find","monthPicker","yearPicker","touchMove","detachCalendarEvents","init","view","f7View","views","main","formatterMonthNames","formatterMonthNamesShort","formatterDayNames","weekday","formatterDayNamesShort","yearStarted","yearEnded","i","setMonth","currentYear","push","weekDay","getDay","d","getFullYear","getMonth","getDate","values","newValues","Array","isArray","map","val","normalizeDate","prop","modal","device","openIn","ios","ipad","width","desktop","theme","month1","dateFormat","twoDigits","number","tokens","yyyy","yy","String","substring","mm","m","MM","M","dd","DD","D","hours","minutes","seconds","getSeconds","hours12","a","Object","assign","HH","H","hh","h","ss","s","A","toUpperCase","regexp","RegExp","keys","t","join","token","formatValue","call","v","formatDate","newValue","rangePickerMinDays","rangePickerMaxDays","inValuesIndex","splice","updateValue","sort","b","currentValue","equal","forEach","index","onlyHeader","removeClass","valueDate","leftDate","rightDate","addClass","text","timePickerPlaceholder","header","inputValue","trigger","dir","$months","currentLocaleMonth","currentLocaleYear","currentMonth","eq","currentDate","prevMonthHtml","renderMonth","currentMonthHtml","nextMonthHtml","html","setMonthsTranslate","each","monthEl","updateCurrentMonthYear","currentIndex","rebuildBoth","remove","append","prepend","translate","prevMonthTranslate","currentMonthTranslate","nextMonthTranslate","animate","nextDate","nextDateTime","transitionEndCallback","maxDate","onMonthChangeStart","transitionEnd","onMonthChangeEnd","prevDate","prevDateTime","minDate","targetDate","newMonthHTML","prevTranslate","monthTranslate","wrapperTranslate","setYearMonth","dayDate","range","match","from","to","renderMonths","class","offset","localeMonth","localeYear","currentValues","today","rows","cols","daysInPrevMonth","daysInMonth","minDayNumber","firstDay","monthHtml","dayIndex","disabled","hasEvents","firstDayOfMonthIndex","row","rowHtml","col","dayNumber","weekDayIndex","weekendDays","eventsHtml","events","dateInRange","eventDots","ev","color","trim","rangesClasses","k","cssClass","dayYear","dayMonth","dayNumberDisplay","renderWeekHeader","weekDaysHtml","dayName","renderMonthSelector","renderYearSelector","timeString","timePickerLabel","renderHeader","headerPlaceholder","renderFooter","toolbarCloseText","renderToolbar","monthSelector","yearSelector","toolbar","footer","weekHeader","renderTimeSelector","render","modalType","renderPopover","renderSheet","renderCustomModal","renderInline","popover","create","el","targetEl","backdrop","backdropUnique","closeMonthPicker","closed","destroy","monthPickerInstance","displayValues","picker","rotateEffect","localeMonthIndex","monthIndex","diff","diffIndex","closeYearPicker","yearPickerInstance","yearMin","yearPickerMin","max","yearMax","yearPickerMax","min","years","hoursArr","minutesArr","hoursMin","hoursMax","closeTimePicker","timePickerInstance","divider","content","timePickerValue","period","opening","normalizeValues","validate","required","input","routableModals","f7Calendar","onOpen","onOpened","modalContent","modalParams","scrollToEl","scrollToInput","closeByBackdropClick","once","onClose","onClosed","sheetPush","swipeToClose","sheetSwipeToClose","router","navigate","route","path","back","initInput","closeByOutsideClick"],"sources":["/root/Pokemon/ui/node_modules/framework7/components/calendar/calendar-class.js"],"sourcesContent":["import { extend, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport $ from '../../shared/dom7.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport { getSupport } from '../../shared/get-support.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass Calendar extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const calendar = this;\n    calendar.params = extend({}, app.params.calendar, params);\n    let $containerEl;\n\n    if (calendar.params.containerEl) {\n      $containerEl = $(calendar.params.containerEl);\n      if ($containerEl.length === 0) return calendar;\n    }\n\n    let $inputEl;\n\n    if (calendar.params.inputEl) {\n      $inputEl = $(calendar.params.inputEl);\n    }\n\n    const isHorizontal = calendar.params.direction === 'horizontal';\n    let inverter = 1;\n\n    if (isHorizontal) {\n      inverter = app.rtl ? -1 : 1;\n    }\n\n    extend(calendar, {\n      app,\n      $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      initialized: false,\n      opened: false,\n      url: calendar.params.url,\n      isHorizontal,\n      inverter,\n      animating: false,\n      allowTouchMove: true,\n      hasTimePicker: calendar.params.timePicker && !calendar.params.rangePicker && !calendar.params.multiple\n    });\n\n    calendar.dayFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        day: 'numeric'\n      });\n      return formatter.format(date).replace(/æ—¥/, '');\n    };\n\n    calendar.monthFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        month: 'long'\n      });\n      return formatter.format(date);\n    };\n\n    calendar.yearFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        year: 'numeric'\n      });\n      return formatter.format(date);\n    };\n\n    calendar.timeSelectorFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, calendar.params.timePickerFormat);\n      return formatter.format(date);\n    };\n\n    const timeFormatCheckDate = calendar.timeSelectorFormatter(new Date()).toLowerCase();\n    calendar.is12HoursFormat = timeFormatCheckDate.indexOf('pm') >= 0 || timeFormatCheckDate.indexOf('am') >= 0; // Auto names\n\n    let {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    } = calendar.params;\n    const {\n      monthNamesIntl,\n      monthNamesShortIntl,\n      dayNamesIntl,\n      dayNamesShortIntl\n    } = calendar.getIntlNames();\n    if (monthNames === 'auto') monthNames = monthNamesIntl;\n    if (monthNamesShort === 'auto') monthNamesShort = monthNamesShortIntl;\n    if (dayNames === 'auto') dayNames = dayNamesIntl;\n    if (dayNamesShort === 'auto') dayNamesShort = dayNamesShortIntl;\n    extend(calendar, {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    });\n\n    function onInputClick() {\n      calendar.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onInputClear() {\n      calendar.setValue([]);\n\n      if (calendar.opened) {\n        calendar.update();\n      }\n    }\n\n    function onHtmlClick(e) {\n      const $targetEl = $(e.target);\n      if (calendar.destroyed || !calendar.params) return;\n      if (calendar.isPopover()) return;\n      if (!calendar.opened || calendar.closing) return;\n      if ($targetEl.closest('[class*=\"backdrop\"]').length) return;\n      if (calendar.monthPickerPopover || calendar.yearPickerPopover || calendar.timePickerPopover) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal, .calendar-modal').length === 0) {\n          calendar.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal, .calendar-modal').length === 0) {\n        calendar.close();\n      }\n    } // Events\n\n\n    extend(calendar, {\n      attachInputEvents() {\n        calendar.$inputEl.on('click', onInputClick);\n        calendar.$inputEl.on('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            calendar.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n\n      detachInputEvents() {\n        calendar.$inputEl.off('click', onInputClick);\n        calendar.$inputEl.off('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            delete calendar.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n\n      attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n\n      detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n\n    });\n\n    calendar.attachCalendarEvents = function attachCalendarEvents() {\n      let allowItemClick = true;\n      let isTouched;\n      let isMoved;\n      let touchStartX;\n      let touchStartY;\n      let touchCurrentX;\n      let touchCurrentY;\n      let touchStartTime;\n      let touchEndTime;\n      let currentTranslate;\n      let wrapperWidth;\n      let wrapperHeight;\n      let percentage;\n      let touchesDiff;\n      let isScrolling;\n      const {\n        $el,\n        $wrapperEl\n      } = calendar;\n\n      function handleTouchStart(e) {\n        if (isMoved || isTouched) return;\n        isTouched = true;\n        touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentX = touchStartX;\n        touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n        touchCurrentY = touchStartY;\n        touchStartTime = new Date().getTime();\n        percentage = 0;\n        allowItemClick = true;\n        isScrolling = undefined;\n        currentTranslate = calendar.monthsTranslate;\n      }\n\n      function handleTouchMove(e) {\n        if (!isTouched) return;\n        const {\n          isHorizontal: isH\n        } = calendar;\n        touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n        if (typeof isScrolling === 'undefined') {\n          isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n        }\n\n        if (isH && isScrolling || !calendar.allowTouchMove) {\n          isTouched = false;\n          return;\n        }\n\n        e.preventDefault();\n\n        if (calendar.animating) {\n          isTouched = false;\n          return;\n        }\n\n        allowItemClick = false;\n\n        if (!isMoved) {\n          // First move\n          isMoved = true;\n          wrapperWidth = $wrapperEl[0].offsetWidth;\n          wrapperHeight = $wrapperEl[0].offsetHeight;\n          $wrapperEl.transition(0);\n        }\n\n        touchesDiff = isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n        percentage = touchesDiff / (isH ? wrapperWidth : wrapperHeight);\n        currentTranslate = (calendar.monthsTranslate * calendar.inverter + percentage) * 100; // Transform wrapper\n\n        $wrapperEl.transform(`translate3d(${isH ? currentTranslate : 0}%, ${isH ? 0 : currentTranslate}%, 0)`);\n      }\n\n      function handleTouchEnd() {\n        if (!isTouched || !isMoved) {\n          isTouched = false;\n          isMoved = false;\n          return;\n        }\n\n        isTouched = false;\n        isMoved = false;\n        touchEndTime = new Date().getTime();\n\n        if (touchEndTime - touchStartTime < 300) {\n          if (Math.abs(touchesDiff) < 10) {\n            calendar.resetMonth();\n          } else if (touchesDiff >= 10) {\n            if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n          } else if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage <= -0.5) {\n          if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage >= 0.5) {\n          if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n        } else {\n          calendar.resetMonth();\n        } // Allow click\n\n\n        setTimeout(() => {\n          allowItemClick = true;\n        }, 100);\n      }\n\n      function handleDayClick(e) {\n        if (!allowItemClick) return;\n        let $dayEl = $(e.target).parents('.calendar-day');\n\n        if ($dayEl.length === 0 && $(e.target).hasClass('calendar-day')) {\n          $dayEl = $(e.target);\n        }\n\n        if ($dayEl.length === 0) return;\n        if ($dayEl.hasClass('calendar-day-disabled')) return;\n\n        if (!calendar.params.rangePicker) {\n          if ($dayEl.hasClass('calendar-day-next')) calendar.nextMonth();\n          if ($dayEl.hasClass('calendar-day-prev')) calendar.prevMonth();\n        }\n\n        const dateYear = parseInt($dayEl.attr('data-year'), 10);\n        const dateMonth = parseInt($dayEl.attr('data-month'), 10);\n        const dateDay = parseInt($dayEl.attr('data-day'), 10);\n        calendar.emit('local::dayClick calendarDayClick', calendar, $dayEl[0], dateYear, dateMonth, dateDay);\n\n        if (!$dayEl.hasClass('calendar-day-selected') || calendar.params.multiple || calendar.params.rangePicker) {\n          const valueToAdd = new Date(dateYear, dateMonth, dateDay, 0, 0, 0);\n\n          if (calendar.hasTimePicker) {\n            if (calendar.value && calendar.value[0]) {\n              valueToAdd.setHours(calendar.value[0].getHours(), calendar.value[0].getMinutes());\n            } else {\n              valueToAdd.setHours(new Date().getHours(), new Date().getMinutes());\n            }\n          }\n\n          calendar.addValue(valueToAdd);\n        }\n\n        if (calendar.params.closeOnSelect) {\n          if (calendar.params.rangePicker && calendar.value.length === 2 || !calendar.params.rangePicker) {\n            calendar.close();\n          }\n        }\n      }\n\n      function onNextMonthClick() {\n        calendar.nextMonth();\n      }\n\n      function onPrevMonthClick() {\n        calendar.prevMonth();\n      }\n\n      function onNextYearClick() {\n        calendar.nextYear();\n      }\n\n      function onPrevYearClick() {\n        calendar.prevYear();\n      }\n\n      function onMonthSelectorClick() {\n        calendar.openMonthPicker();\n      }\n\n      function onYearSelectorClick() {\n        calendar.openYearPicker();\n      }\n\n      function onTimeSelectorClick() {\n        calendar.openTimePicker();\n      }\n\n      const passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n        passive: true,\n        capture: false\n      } : false; // Selectors clicks\n\n      $el.find('.calendar-prev-month-button').on('click', onPrevMonthClick);\n      $el.find('.calendar-next-month-button').on('click', onNextMonthClick);\n      $el.find('.calendar-prev-year-button').on('click', onPrevYearClick);\n      $el.find('.calendar-next-year-button').on('click', onNextYearClick);\n\n      if (calendar.params.monthPicker) {\n        $el.find('.current-month-value').on('click', onMonthSelectorClick);\n      }\n\n      if (calendar.params.yearPicker) {\n        $el.find('.current-year-value').on('click', onYearSelectorClick);\n      }\n\n      if (calendar.hasTimePicker) {\n        $el.find('.calendar-time-selector a').on('click', onTimeSelectorClick);\n      } // Day clicks\n\n\n      $wrapperEl.on('click', handleDayClick); // Touch events\n\n      if (calendar.params.touchMove) {\n        $wrapperEl.on(app.touchEvents.start, handleTouchStart, passiveListener);\n        app.on('touchmove:active', handleTouchMove);\n        app.on('touchend:passive', handleTouchEnd);\n      }\n\n      calendar.detachCalendarEvents = function detachCalendarEvents() {\n        $el.find('.calendar-prev-month-button').off('click', onPrevMonthClick);\n        $el.find('.calendar-next-month-button').off('click', onNextMonthClick);\n        $el.find('.calendar-prev-year-button').off('click', onPrevYearClick);\n        $el.find('.calendar-next-year-button').off('click', onNextYearClick);\n\n        if (calendar.params.monthPicker) {\n          $el.find('.current-month-value').off('click', onMonthSelectorClick);\n        }\n\n        if (calendar.params.yearPicker) {\n          $el.find('.current-year-value').off('click', onYearSelectorClick);\n        }\n\n        if (calendar.hasTimePicker) {\n          $el.find('.calendar-time-selector a').off('click', onTimeSelectorClick);\n        }\n\n        $wrapperEl.off('click', handleDayClick);\n\n        if (calendar.params.touchMove) {\n          $wrapperEl.off(app.touchEvents.start, handleTouchStart, passiveListener);\n          app.off('touchmove:active', handleTouchMove);\n          app.off('touchend:passive', handleTouchEnd);\n        }\n      };\n    };\n\n    calendar.init();\n    return calendar;\n  }\n\n  get view() {\n    const {\n      $inputEl,\n      app,\n      params\n    } = this;\n    let view;\n\n    if (params.view) {\n      view = params.view;\n    } else if ($inputEl) {\n      view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n    }\n\n    if (!view) view = app.views.main;\n    return view;\n  }\n\n  getIntlNames() {\n    const calendar = this;\n    const locale = calendar.params.locale;\n    const monthNamesIntl = [];\n    const monthNamesShortIntl = [];\n    const dayNamesIntl = [];\n    const dayNamesShortIntl = [];\n    const formatterMonthNames = new Intl.DateTimeFormat(locale, {\n      month: 'long'\n    });\n    const formatterMonthNamesShort = new Intl.DateTimeFormat(locale, {\n      month: 'short'\n    });\n    const formatterDayNames = new Intl.DateTimeFormat(locale, {\n      weekday: 'long'\n    });\n    const formatterDayNamesShort = new Intl.DateTimeFormat(locale, {\n      weekday: 'short'\n    });\n    let year;\n    let yearStarted;\n    let yearEnded;\n\n    for (let i = 0; i < 24; i += 1) {\n      const date = new Date().setMonth(i, 1);\n      const currentYear = calendar.yearFormatter(date);\n\n      if (year && currentYear !== year) {\n        if (yearStarted) yearEnded = true;\n        yearStarted = true;\n        year = currentYear;\n      }\n\n      if (!year) {\n        year = currentYear;\n      }\n\n      if (yearStarted && year === currentYear && !yearEnded) {\n        monthNamesIntl.push(formatterMonthNames.format(date));\n        monthNamesShortIntl.push(formatterMonthNamesShort.format(date));\n      }\n    }\n\n    const weekDay = new Date().getDay();\n\n    for (let i = 0; i < 7; i += 1) {\n      const date = new Date().getTime() + (i - weekDay) * 24 * 60 * 60 * 1000;\n      dayNamesIntl.push(formatterDayNames.format(date));\n      dayNamesShortIntl.push(formatterDayNamesShort.format(date));\n    }\n\n    return {\n      monthNamesIntl,\n      monthNamesShortIntl,\n      dayNamesIntl,\n      dayNamesShortIntl\n    };\n  }\n\n  normalizeDate(date) {\n    const calendar = this;\n    const d = new Date(date);\n\n    if (calendar.hasTimePicker) {\n      return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());\n    }\n\n    return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  }\n\n  normalizeValues(values) {\n    const calendar = this;\n    let newValues = [];\n\n    if (values && Array.isArray(values)) {\n      newValues = values.map(val => calendar.normalizeDate(val));\n    }\n\n    return newValues;\n  }\n\n  initInput() {\n    const calendar = this;\n    if (!calendar.$inputEl) return;\n    if (calendar.params.inputReadOnly) calendar.$inputEl.prop('readOnly', true);\n  }\n\n  isPopover() {\n    const calendar = this;\n    const {\n      app,\n      modal,\n      params\n    } = calendar;\n    const device = getDevice();\n    if (params.openIn === 'sheet') return false;\n    if (modal && modal.type !== 'popover') return false;\n\n    if (!calendar.inline && calendar.inputEl) {\n      if (params.openIn === 'popover') return true;\n\n      if (device.ios) {\n        return !!device.ipad;\n      }\n\n      if (app.width >= 768) {\n        return true;\n      }\n\n      if (device.desktop && app.theme === 'aurora') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  formatDate(d) {\n    const calendar = this;\n    const date = new Date(d);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const month1 = month + 1;\n    const day = date.getDate();\n    const weekDay = date.getDay();\n    const {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    } = calendar;\n    const {\n      dateFormat,\n      locale\n    } = calendar.params;\n\n    function twoDigits(number) {\n      return number < 10 ? `0${number}` : number;\n    }\n\n    if (typeof dateFormat === 'string') {\n      const tokens = {\n        yyyy: year,\n        yy: String(year).substring(2),\n        mm: twoDigits(month1),\n        m: month1,\n        MM: monthNames[month],\n        M: monthNamesShort[month],\n        dd: twoDigits(day),\n        d: day,\n        DD: dayNames[weekDay],\n        D: dayNamesShort[weekDay]\n      };\n\n      if (calendar.params.timePicker) {\n        const hours = date.getHours();\n        const minutes = date.getMinutes();\n        const seconds = date.getSeconds();\n        let hours12 = hours;\n        if (hours > 12) hours12 = hours - 12;\n        if (hours === 0) hours12 = 12;\n        const a = hours >= 12 && hours !== 0 ? 'pm' : 'am';\n        Object.assign(tokens, {\n          HH: twoDigits(hours),\n          H: hours,\n          hh: twoDigits(hours12),\n          h: hours12,\n          ss: twoDigits(seconds),\n          s: seconds,\n          ':mm': twoDigits(minutes),\n          ':m': minutes,\n          a,\n          A: a.toUpperCase()\n        });\n      }\n\n      const regexp = new RegExp(Object.keys(tokens).map(t => `(${t})`).join('|'), 'g');\n      return dateFormat.replace(regexp, token => {\n        if (token in tokens) return tokens[token];\n        return token;\n      });\n    }\n\n    if (typeof dateFormat === 'function') {\n      return dateFormat(date);\n    } // Intl Object\n\n\n    const formatter = new Intl.DateTimeFormat(locale, dateFormat);\n    return formatter.format(date);\n  }\n\n  formatValue() {\n    const calendar = this;\n    const {\n      value\n    } = calendar;\n\n    if (calendar.params.formatValue) {\n      return calendar.params.formatValue.call(calendar, value);\n    }\n\n    return value.map(v => calendar.formatDate(v)).join(calendar.params.rangePicker ? ' - ' : ', ');\n  }\n\n  addValue(newValue) {\n    const calendar = this;\n    const {\n      multiple,\n      rangePicker,\n      rangePickerMinDays,\n      rangePickerMaxDays\n    } = calendar.params;\n\n    if (multiple) {\n      if (!calendar.value) calendar.value = [];\n      let inValuesIndex;\n\n      for (let i = 0; i < calendar.value.length; i += 1) {\n        if (new Date(newValue).getTime() === new Date(calendar.value[i]).getTime()) {\n          inValuesIndex = i;\n        }\n      }\n\n      if (typeof inValuesIndex === 'undefined') {\n        calendar.value.push(newValue);\n      } else {\n        calendar.value.splice(inValuesIndex, 1);\n      }\n\n      calendar.updateValue();\n    } else if (rangePicker) {\n      if (!calendar.value) calendar.value = [];\n\n      if (calendar.value.length === 2 || calendar.value.length === 0) {\n        calendar.value = [];\n      }\n\n      if (calendar.value.length === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) >= (rangePickerMinDays - 1) * 60 * 60 * 24 * 1000 && (rangePickerMaxDays === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) <= (rangePickerMaxDays - 1) * 60 * 60 * 24 * 1000)) calendar.value.push(newValue);else calendar.value = [];\n      calendar.value.sort((a, b) => a - b);\n      calendar.updateValue();\n    } else {\n      calendar.value = [newValue];\n      calendar.updateValue();\n    }\n  }\n\n  setValue(values) {\n    const calendar = this;\n    const currentValue = calendar.value;\n\n    if (Array.isArray(currentValue) && Array.isArray(values) && currentValue.length === values.length) {\n      let equal = true;\n      currentValue.forEach((v, index) => {\n        if (v !== values[index]) equal = false;\n      });\n      if (equal) return;\n    }\n\n    calendar.value = values;\n    calendar.updateValue();\n  }\n\n  getValue() {\n    const calendar = this;\n    return calendar.value;\n  }\n\n  updateValue(onlyHeader) {\n    const calendar = this;\n    const {\n      $el,\n      $wrapperEl,\n      $inputEl,\n      value,\n      params\n    } = calendar;\n    let i;\n\n    if ($el && $el.length > 0) {\n      $wrapperEl.find('.calendar-day-selected').removeClass('calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right');\n      let valueDate;\n\n      if (params.rangePicker && value.length === 2) {\n        const leftDate = new Date(value[0]).getTime();\n        const rightDate = new Date(value[1]).getTime();\n\n        for (i = leftDate; i <= rightDate; i += 24 * 60 * 60 * 1000) {\n          valueDate = new Date(i);\n          let addClass = 'calendar-day-selected';\n\n          if (leftDate !== rightDate) {\n            if (i !== leftDate && i !== rightDate) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (i === leftDate) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (i === rightDate) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n\n          $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).addClass(addClass);\n        }\n\n        valueDate = new Date(leftDate);\n        $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-left');\n        valueDate = new Date(rightDate);\n        $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-right');\n      } else {\n        for (i = 0; i < calendar.value.length; i += 1) {\n          valueDate = new Date(value[i]);\n          $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).addClass('calendar-day-selected');\n        }\n      }\n    }\n\n    if (!onlyHeader) {\n      calendar.emit('local::change calendarChange', calendar, value);\n    }\n\n    if ($el && $el.length > 0 && calendar.hasTimePicker) {\n      $el.find('.calendar-time-selector a').text(value && value.length ? calendar.timeSelectorFormatter(value[0]) : calendar.params.timePickerPlaceholder);\n    }\n\n    if ($inputEl && $inputEl.length || params.header) {\n      const inputValue = calendar.formatValue(value);\n\n      if (params.header && $el && $el.length) {\n        $el.find('.calendar-selected-date').text(inputValue);\n      }\n\n      if ($inputEl && $inputEl.length && !onlyHeader) {\n        $inputEl.val(inputValue);\n        $inputEl.trigger('change');\n      }\n    }\n  }\n\n  updateCurrentMonthYear(dir) {\n    const calendar = this;\n    const {\n      $months,\n      $el,\n      monthNames\n    } = calendar;\n    let currentLocaleMonth;\n    let currentLocaleYear;\n\n    if (typeof dir === 'undefined') {\n      calendar.currentMonth = parseInt($months.eq(1).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(1).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(1).attr('data-locale-month');\n      currentLocaleYear = $months.eq(1).attr('data-locale-year');\n    } else {\n      calendar.currentMonth = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-month');\n      currentLocaleYear = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-year');\n    }\n\n    $el.find('.current-month-value').text(monthNames[currentLocaleMonth]);\n    $el.find('.current-year-value').text(currentLocaleYear);\n  }\n\n  update() {\n    const calendar = this;\n    const {\n      currentYear,\n      currentMonth,\n      $wrapperEl\n    } = calendar;\n    const currentDate = new Date(currentYear, currentMonth);\n    const prevMonthHtml = calendar.renderMonth(currentDate, 'prev');\n    const currentMonthHtml = calendar.renderMonth(currentDate);\n    const nextMonthHtml = calendar.renderMonth(currentDate, 'next');\n    $wrapperEl.transition(0).html(`${prevMonthHtml}${currentMonthHtml}${nextMonthHtml}`).transform('translate3d(0,0,0)');\n    calendar.$months = $wrapperEl.find('.calendar-month');\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate();\n    calendar.$months.each(monthEl => {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    });\n  }\n\n  onMonthChangeStart(dir) {\n    const calendar = this;\n    const {\n      $months,\n      currentYear,\n      currentMonth\n    } = calendar;\n    calendar.updateCurrentMonthYear(dir);\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    const currentIndex = dir === 'next' ? $months.length - 1 : 0;\n    $months.eq(currentIndex).addClass('calendar-month-current');\n    $months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'calendar-month-prev' : 'calendar-month-next');\n    calendar.emit('local::monthYearChangeStart calendarMonthYearChangeStart', calendar, currentYear, currentMonth);\n  }\n\n  onMonthChangeEnd(dir, rebuildBoth) {\n    const calendar = this;\n    const {\n      currentYear,\n      currentMonth,\n      $wrapperEl,\n      monthsTranslate\n    } = calendar;\n    calendar.animating = false;\n    let nextMonthHtml;\n    let prevMonthHtml;\n    let currentMonthHtml;\n    $wrapperEl.find('.calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)').remove();\n\n    if (typeof dir === 'undefined') {\n      dir = 'next'; // eslint-disable-line\n\n      rebuildBoth = true; // eslint-disable-line\n    }\n\n    if (!rebuildBoth) {\n      currentMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), dir);\n    } else {\n      $wrapperEl.find('.calendar-month-next, .calendar-month-prev').remove();\n      prevMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'prev');\n      nextMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'next');\n    }\n\n    if (dir === 'next' || rebuildBoth) {\n      $wrapperEl.append(currentMonthHtml || nextMonthHtml);\n    }\n\n    if (dir === 'prev' || rebuildBoth) {\n      $wrapperEl.prepend(currentMonthHtml || prevMonthHtml);\n    }\n\n    const $months = $wrapperEl.find('.calendar-month');\n    calendar.$months = $months;\n    calendar.setMonthsTranslate(monthsTranslate);\n    calendar.emit('local::monthAdd calendarMonthAdd', calendar, dir === 'next' ? $months.eq($months.length - 1)[0] : $months.eq(0)[0]);\n    calendar.emit('local::monthYearChangeEnd calendarMonthYearChangeEnd', calendar, currentYear, currentMonth);\n  }\n\n  setMonthsTranslate(translate) {\n    const calendar = this;\n    const {\n      $months,\n      isHorizontal: isH,\n      inverter\n    } = calendar; // eslint-disable-next-line\n\n    translate = translate || calendar.monthsTranslate || 0;\n\n    if (typeof calendar.monthsTranslate === 'undefined') {\n      calendar.monthsTranslate = translate;\n    }\n\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    const prevMonthTranslate = -(translate + 1) * 100 * inverter;\n    const currentMonthTranslate = -translate * 100 * inverter;\n    const nextMonthTranslate = -(translate - 1) * 100 * inverter;\n    $months.eq(0).transform(`translate3d(${isH ? prevMonthTranslate : 0}%, ${isH ? 0 : prevMonthTranslate}%, 0)`).addClass('calendar-month-prev');\n    $months.eq(1).transform(`translate3d(${isH ? currentMonthTranslate : 0}%, ${isH ? 0 : currentMonthTranslate}%, 0)`).addClass('calendar-month-current');\n    $months.eq(2).transform(`translate3d(${isH ? nextMonthTranslate : 0}%, ${isH ? 0 : nextMonthTranslate}%, 0)`).addClass('calendar-month-next');\n  }\n\n  nextMonth(transition) {\n    const calendar = this;\n    const {\n      params,\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH\n    } = calendar;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    const nextMonth = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-month'), 10);\n    const nextYear = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-year'), 10);\n    const nextDate = new Date(nextYear, nextMonth);\n    const nextDateTime = nextDate.getTime();\n    const transitionEndCallback = !calendar.animating;\n\n    if (params.maxDate) {\n      if (nextDateTime > new Date(params.maxDate).getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate -= 1;\n\n    if (nextMonth === calendar.currentMonth) {\n      const nextMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      const nextMonthHtml = $(calendar.renderMonth(nextDateTime, 'next')).transform(`translate3d(${isH ? nextMonthTranslate : 0}%, ${isH ? 0 : nextMonthTranslate}%, 0)`).addClass('calendar-month-next');\n      $wrapperEl.append(nextMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(calendar.$months.length - 1)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('next');\n    const translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd('next');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('next');\n    }\n  }\n\n  prevMonth(transition) {\n    const calendar = this;\n    const {\n      params,\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH\n    } = calendar;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    const prevMonth = parseInt(calendar.$months.eq(0).attr('data-month'), 10);\n    const prevYear = parseInt(calendar.$months.eq(0).attr('data-year'), 10);\n    const prevDate = new Date(prevYear, prevMonth + 1, -1);\n    const prevDateTime = prevDate.getTime();\n    const transitionEndCallback = !calendar.animating;\n\n    if (params.minDate) {\n      let minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (prevDateTime < minDate.getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate += 1;\n\n    if (prevMonth === calendar.currentMonth) {\n      const prevMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      const prevMonthHtml = $(calendar.renderMonth(prevDateTime, 'prev')).transform(`translate3d(${isH ? prevMonthTranslate : 0}%, ${isH ? 0 : prevMonthTranslate}%, 0)`).addClass('calendar-month-prev');\n      $wrapperEl.prepend(prevMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(0)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('prev');\n    const translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd('prev');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('prev');\n    }\n  }\n\n  resetMonth(transition) {\n    if (transition === void 0) {\n      transition = '';\n    }\n\n    const calendar = this;\n    const {\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH,\n      monthsTranslate\n    } = calendar;\n    const translate = monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n  } // eslint-disable-next-line\n\n\n  setYearMonth(year, month, transition) {\n    const calendar = this;\n    const {\n      params,\n      isHorizontal: isH,\n      $wrapperEl,\n      inverter\n    } = calendar; // eslint-disable-next-line\n\n    if (typeof year === 'undefined') year = calendar.currentYear; // eslint-disable-next-line\n\n    if (typeof month === 'undefined') month = calendar.currentMonth;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      // eslint-disable-next-line\n      transition = ''; // eslint-disable-next-line\n\n      if (!params.animate) transition = 0;\n    }\n\n    let targetDate;\n\n    if (year < calendar.currentYear) {\n      targetDate = new Date(year, month + 1, -1).getTime();\n    } else {\n      targetDate = new Date(year, month).getTime();\n    }\n\n    if (params.maxDate && targetDate > new Date(params.maxDate).getTime()) {\n      return false;\n    }\n\n    if (params.minDate) {\n      let minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (targetDate < minDate.getTime()) {\n        return false;\n      }\n    }\n\n    const currentDate = new Date(calendar.currentYear, calendar.currentMonth).getTime();\n    const dir = targetDate > currentDate ? 'next' : 'prev';\n    const newMonthHTML = calendar.renderMonth(new Date(year, month));\n    calendar.monthsTranslate = calendar.monthsTranslate || 0;\n    const prevTranslate = calendar.monthsTranslate;\n    let monthTranslate;\n    const transitionEndCallback = !calendar.animating && transition !== 0;\n\n    if (targetDate > currentDate) {\n      // To next\n      calendar.monthsTranslate -= 1;\n      if (!calendar.animating) calendar.$months.eq(calendar.$months.length - 1).remove();\n      $wrapperEl.append(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n      calendar.$months.eq(calendar.$months.length - 1).transform(`translate3d(${isH ? monthTranslate : 0}%, ${isH ? 0 : monthTranslate}%, 0)`).addClass('calendar-month-next');\n    } else {\n      // To prev\n      calendar.monthsTranslate += 1;\n      if (!calendar.animating) calendar.$months.eq(0).remove();\n      $wrapperEl.prepend(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n      calendar.$months.eq(0).transform(`translate3d(${isH ? monthTranslate : 0}%, ${isH ? 0 : monthTranslate}%, 0)`).addClass('calendar-month-prev');\n    }\n\n    calendar.emit('local::monthAdd calendarMonthAdd', dir === 'next' ? calendar.$months.eq(calendar.$months.length - 1)[0] : calendar.$months.eq(0)[0]);\n    calendar.animating = true;\n    calendar.onMonthChangeStart(dir);\n    const wrapperTranslate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? wrapperTranslate : 0}%, ${isH ? 0 : wrapperTranslate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd(dir, true);\n      });\n    }\n\n    if (!params.animate || transition === 0) {\n      calendar.onMonthChangeEnd(dir, true);\n    }\n  }\n\n  nextYear() {\n    const calendar = this;\n    calendar.setYearMonth(calendar.currentYear + 1);\n  }\n\n  prevYear() {\n    const calendar = this;\n    calendar.setYearMonth(calendar.currentYear - 1);\n  } // eslint-disable-next-line\n\n\n  dateInRange(dayDate, range) {\n    let match = false;\n    let i;\n    if (!range) return false;\n\n    if (Array.isArray(range)) {\n      for (i = 0; i < range.length; i += 1) {\n        if (range[i].from || range[i].to) {\n          if (range[i].from && range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime() && dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].from) {\n            if (dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime()) {\n              match = true;\n            }\n          }\n        } else if (range[i].date) {\n          if (dayDate === new Date(range[i].date).getTime()) {\n            match = true;\n          }\n        } else if (dayDate === new Date(range[i]).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.from || range.to) {\n      if (range.from && range.to) {\n        if (dayDate <= new Date(range.to).getTime() && dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.from) {\n        if (dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.to) {\n        if (dayDate <= new Date(range.to).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.date) {\n      match = dayDate === new Date(range.date).getTime();\n    } else if (typeof range === 'function') {\n      match = range(new Date(dayDate));\n    }\n\n    return match;\n  } // eslint-disable-next-line\n\n\n  daysInMonth(date) {\n    const d = new Date(date);\n    return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n  }\n\n  renderMonths(date) {\n    const calendar = this;\n\n    if (calendar.params.renderMonths) {\n      return calendar.params.renderMonths.call(calendar, date);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-months-wrapper\"\n    }, calendar.renderMonth(date, 'prev'), calendar.renderMonth(date), calendar.renderMonth(date, 'next'));\n  }\n\n  renderMonth(d, offset) {\n    const calendar = this;\n    const {\n      params,\n      value\n    } = calendar;\n\n    if (params.renderMonth) {\n      return params.renderMonth.call(calendar, d, offset);\n    }\n\n    let date = new Date(d);\n    let year = date.getFullYear();\n    let month = date.getMonth();\n    let localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter(date));\n    if (localeMonth < 0) localeMonth = month;\n    let localeYear = calendar.yearFormatter(date);\n\n    if (offset === 'next') {\n      if (month === 11) date = new Date(year + 1, 0);else date = new Date(year, month + 1, 1);\n    }\n\n    if (offset === 'prev') {\n      if (month === 0) date = new Date(year - 1, 11);else date = new Date(year, month - 1, 1);\n    }\n\n    if (offset === 'next' || offset === 'prev') {\n      month = date.getMonth();\n      year = date.getFullYear();\n      localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter(date));\n      if (localeMonth < 0) localeMonth = month;\n      localeYear = calendar.yearFormatter(date);\n    }\n\n    const currentValues = [];\n    const today = new Date().setHours(0, 0, 0, 0);\n    const minDate = params.minDate ? new Date(params.minDate).getTime() : null;\n    const maxDate = params.maxDate ? new Date(params.maxDate).getTime() : null;\n    const rows = 6;\n    const cols = 7;\n    const daysInPrevMonth = calendar.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000);\n    const daysInMonth = calendar.daysInMonth(date);\n    const minDayNumber = params.firstDay === 6 ? 0 : 1;\n    let monthHtml = '';\n    let dayIndex = 0 + (params.firstDay - 1);\n    let disabled;\n    let hasEvents;\n    let firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n    if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n\n    if (value && value.length) {\n      for (let i = 0; i < value.length; i += 1) {\n        currentValues.push(new Date(value[i]).setHours(0, 0, 0, 0));\n      }\n    }\n\n    for (let row = 1; row <= rows; row += 1) {\n      let rowHtml = '';\n\n      for (let col = 1; col <= cols; col += 1) {\n        dayIndex += 1;\n        let dayDate;\n        let dayNumber = dayIndex - firstDayOfMonthIndex;\n        let addClass = '';\n\n        if (row === 1 && col === 1 && dayNumber > minDayNumber && params.firstDay !== 1) {\n          dayIndex -= 7;\n          dayNumber = dayIndex - firstDayOfMonthIndex;\n        }\n\n        const weekDayIndex = col - 1 + params.firstDay > 6 ? col - 1 - 7 + params.firstDay : col - 1 + params.firstDay;\n\n        if (dayNumber < 0) {\n          dayNumber = daysInPrevMonth + dayNumber + 1;\n          addClass += ' calendar-day-prev';\n          dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n        } else {\n          dayNumber += 1;\n\n          if (dayNumber > daysInMonth) {\n            dayNumber -= daysInMonth;\n            addClass += ' calendar-day-next';\n            dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n          } else {\n            dayDate = new Date(year, month, dayNumber).getTime();\n          }\n        } // Today\n\n\n        if (dayDate === today) addClass += ' calendar-day-today'; // Selected\n\n        if (params.rangePicker && currentValues.length === 2) {\n          if (dayDate >= currentValues[0] && dayDate <= currentValues[1]) {\n            addClass += ' calendar-day-selected';\n          }\n\n          if (currentValues[0] !== currentValues[1]) {\n            if (dayDate > currentValues[0] && dayDate < currentValues[1]) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (dayDate === currentValues[0]) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (dayDate === currentValues[1]) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n        } else if (currentValues.indexOf(dayDate) >= 0) addClass += ' calendar-day-selected'; // Weekend\n\n\n        if (params.weekendDays.indexOf(weekDayIndex) >= 0) {\n          addClass += ' calendar-day-weekend';\n        } // Events\n\n\n        let eventsHtml = '';\n        hasEvents = false;\n\n        if (params.events) {\n          if (calendar.dateInRange(dayDate, params.events)) {\n            hasEvents = true;\n          }\n        }\n\n        if (hasEvents) {\n          addClass += ' calendar-day-has-events'; // prettier-ignore\n\n          eventsHtml = `\n            <span class=\"calendar-day-events\">\n              <span class=\"calendar-day-event\"></span>\n            </span>\n          `;\n\n          if (Array.isArray(params.events)) {\n            const eventDots = [];\n            params.events.forEach(ev => {\n              const color = ev.color || '';\n\n              if (eventDots.indexOf(color) < 0 && calendar.dateInRange(dayDate, ev)) {\n                eventDots.push(color);\n              }\n            }); // prettier-ignore\n\n            eventsHtml = `\n              <span class=\"calendar-day-events\">\n                ${eventDots.map(color => `\n                  <span class=\"calendar-day-event\" style=\"${color ? `background-color: ${color}` : ''}\"></span>\n                `.trim()).join('')}\n              </span>\n            `;\n          }\n        } // Custom Ranges\n\n\n        if (params.rangesClasses) {\n          for (let k = 0; k < params.rangesClasses.length; k += 1) {\n            if (calendar.dateInRange(dayDate, params.rangesClasses[k].range)) {\n              addClass += ` ${params.rangesClasses[k].cssClass}`;\n            }\n          }\n        } // Disabled\n\n\n        disabled = false;\n\n        if (minDate && dayDate < minDate || maxDate && dayDate > maxDate) {\n          disabled = true;\n        }\n\n        if (params.disabled) {\n          if (calendar.dateInRange(dayDate, params.disabled)) {\n            disabled = true;\n          }\n        }\n\n        if (disabled) {\n          addClass += ' calendar-day-disabled';\n        }\n\n        dayDate = new Date(dayDate);\n        const dayYear = dayDate.getFullYear();\n        const dayMonth = dayDate.getMonth();\n        const dayNumberDisplay = calendar.dayFormatter(dayDate); // prettier-ignore\n\n        rowHtml += `\n          <div data-year=\"${dayYear}\" data-month=\"${dayMonth}\" data-day=\"${dayNumber}\" class=\"calendar-day${addClass}\" data-date=\"${dayYear}-${dayMonth}-${dayNumber}\">\n            <span class=\"calendar-day-number\">${dayNumberDisplay}${eventsHtml}</span>\n          </div>`.trim();\n      }\n\n      monthHtml += `<div class=\"calendar-row\">${rowHtml}</div>`;\n    }\n\n    monthHtml = `<div class=\"calendar-month\" data-year=\"${year}\" data-month=\"${month}\" data-locale-year=\"${localeYear}\" data-locale-month=\"${localeMonth}\">${monthHtml}</div>`;\n    return monthHtml;\n  }\n\n  renderWeekHeader() {\n    const calendar = this;\n\n    if (calendar.params.renderWeekHeader) {\n      return calendar.params.renderWeekHeader.call(calendar);\n    }\n\n    const {\n      params\n    } = calendar;\n    let weekDaysHtml = '';\n\n    for (let i = 0; i < 7; i += 1) {\n      const dayIndex = i + params.firstDay > 6 ? i - 7 + params.firstDay : i + params.firstDay;\n      const dayName = calendar.dayNamesShort[dayIndex];\n      weekDaysHtml += `<div class=\"calendar-week-day\">${dayName}</div>`;\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-week-header\"\n    }, weekDaysHtml);\n  }\n\n  renderMonthSelector() {\n    const calendar = this;\n\n    if (calendar.params.renderMonthSelector) {\n      return calendar.params.renderMonthSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-month-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.monthPicker ? $jsx(\"a\", {\n      class: \"current-month-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-month-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  }\n\n  renderYearSelector() {\n    const calendar = this;\n\n    if (calendar.params.renderYearSelector) {\n      return calendar.params.renderYearSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-year-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.yearPicker ? $jsx(\"a\", {\n      class: \"current-year-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-year-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  } // eslint-disable-next-line\n\n\n  renderTimeSelector() {\n    const calendar = this;\n    const value = calendar.value && calendar.value[0];\n    let timeString;\n    if (value) timeString = calendar.timeSelectorFormatter(value);\n    return $jsx(\"div\", {\n      class: \"calendar-time-selector\"\n    }, $jsx(\"span\", null, calendar.params.timePickerLabel), $jsx(\"a\", {\n      class: \"link\"\n    }, timeString || calendar.params.timePickerPlaceholder));\n  }\n\n  renderHeader() {\n    const calendar = this;\n\n    if (calendar.params.renderHeader) {\n      return calendar.params.renderHeader.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-header\"\n    }, $jsx(\"div\", {\n      class: \"calendar-selected-date\"\n    }, calendar.params.headerPlaceholder));\n  }\n\n  renderFooter() {\n    const calendar = this;\n    const app = calendar.app;\n\n    if (calendar.params.renderFooter) {\n      return calendar.params.renderFooter.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-footer\"\n    }, $jsx(\"a\", {\n      class: `${app.theme === 'md' ? 'button' : 'link'} calendar-close sheet-close popover-close`\n    }, calendar.params.toolbarCloseText));\n  }\n\n  renderToolbar() {\n    const calendar = this;\n\n    if (calendar.params.renderToolbar) {\n      return calendar.params.renderToolbar.call(calendar, calendar);\n    } // prettier-ignore\n\n\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, calendar.params.monthSelector ? calendar.renderMonthSelector() : '', calendar.params.yearSelector ? calendar.renderYearSelector() : ''));\n  } // eslint-disable-next-line\n\n\n  renderInline() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `calendar calendar-inline ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderCustomModal() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `calendar calendar-modal ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderSheet() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `sheet-modal calendar calendar-sheet ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"sheet-modal-inner calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderPopover() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"popover calendar-popover\"\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: `calendar ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter())));\n  }\n\n  render() {\n    const calendar = this;\n    const {\n      params\n    } = calendar;\n    if (params.render) return params.render.call(calendar);\n\n    if (!calendar.inline) {\n      let modalType = params.openIn;\n      if (modalType === 'auto') modalType = calendar.isPopover() ? 'popover' : 'sheet';\n      if (modalType === 'popover') return calendar.renderPopover();\n      if (modalType === 'sheet') return calendar.renderSheet();\n      return calendar.renderCustomModal();\n    }\n\n    return calendar.renderInline();\n  }\n\n  openMonthPicker() {\n    const calendar = this;\n    const {\n      $el,\n      app\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-month-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-month-picker\"></div></div></div>');\n    calendar.monthPickerPopover = app.popover.create({\n      el: $el.find('.calendar-month-picker-popover'),\n      targetEl: $el.find('.calendar-month-selector'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeMonthPicker();\n        },\n\n        closed() {\n          if (calendar.monthPickerPopover.$el) calendar.monthPickerPopover.$el.remove();\n          calendar.monthPickerPopover.destroy();\n\n          if (calendar.monthPickerInstance) {\n            calendar.monthPickerInstance.close();\n            calendar.monthPickerInstance.destroy();\n          }\n\n          delete calendar.monthPickerInstance;\n          delete calendar.monthPickerPopover;\n        }\n\n      }\n    });\n    calendar.monthPickerPopover.open();\n    const localeMonth = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n    const values = [];\n    const displayValues = [];\n    calendar.monthNames.forEach((m, index) => {\n      values.push(index);\n      displayValues.push(m);\n    });\n    calendar.monthPickerInstance = app.picker.create({\n      containerEl: calendar.monthPickerPopover.$el.find('.calendar-month-picker'),\n      value: [localeMonth],\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values,\n        displayValues\n      }]\n    });\n  }\n\n  closeMonthPicker() {\n    const calendar = this;\n    if (calendar.monthPickerPopover && calendar.monthPickerPopover.opened) calendar.monthPickerPopover.close();\n    const index = calendar.monthPickerInstance.value[0];\n    const localeMonthIndex = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n    const monthIndex = calendar.currentMonth;\n    const diff = localeMonthIndex - monthIndex;\n    const diffIndex = index - diff;\n    calendar.setYearMonth(calendar.currentYear, diffIndex, 0);\n  }\n\n  openYearPicker() {\n    const calendar = this;\n    const {\n      $el,\n      app\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-year-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-year-picker\"></div></div></div>');\n    calendar.yearPickerPopover = app.popover.create({\n      el: $el.find('.calendar-year-picker-popover'),\n      targetEl: $el.find('.calendar-year-selector'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeYearPicker();\n        },\n\n        closed() {\n          if (calendar.yearPickerPopover.$el) calendar.yearPickerPopover.$el.remove();\n          calendar.yearPickerPopover.destroy();\n\n          if (calendar.yearPickerInstance) {\n            calendar.yearPickerInstance.close();\n            calendar.yearPickerInstance.destroy();\n          }\n\n          delete calendar.yearPickerInstance;\n          delete calendar.yearPickerPopover;\n        }\n\n      }\n    });\n    calendar.yearPickerPopover.open();\n    const currentYear = calendar.currentYear;\n    let yearMin = calendar.params.yearPickerMin || new Date().getFullYear() - 100;\n\n    if (calendar.params.minDate) {\n      yearMin = Math.max(yearMin, new Date(calendar.params.minDate).getFullYear());\n    }\n\n    let yearMax = calendar.params.yearPickerMax || new Date().getFullYear() + 100;\n\n    if (calendar.params.maxDate) {\n      yearMax = Math.min(yearMax, new Date(calendar.params.maxDate).getFullYear());\n    }\n\n    const years = [];\n\n    for (let i = yearMin; i <= yearMax; i += 1) {\n      years.push(i);\n    }\n\n    calendar.yearPickerInstance = app.picker.create({\n      containerEl: calendar.yearPickerPopover.$el.find('.calendar-year-picker'),\n      value: [currentYear],\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values: years\n      }]\n    });\n  }\n\n  closeYearPicker() {\n    const calendar = this;\n    if (calendar.yearPickerPopover && calendar.yearPickerPopover.opened) calendar.yearPickerPopover.close();\n    calendar.setYearMonth(calendar.yearPickerInstance.value[0], undefined, 0);\n  }\n\n  openTimePicker() {\n    const calendar = this;\n    const {\n      $el,\n      app,\n      is12HoursFormat\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-time-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-time-picker\"></div></div></div>');\n    const hoursArr = [];\n    const minutesArr = [];\n    const hoursMin = is12HoursFormat ? 1 : 0;\n    const hoursMax = is12HoursFormat ? 12 : 23;\n\n    for (let i = hoursMin; i <= hoursMax; i += 1) {\n      hoursArr.push(i);\n    }\n\n    for (let i = 0; i <= 59; i += 1) {\n      minutesArr.push(i);\n    }\n\n    let value;\n\n    if (calendar.value && calendar.value.length) {\n      value = [calendar.value[0].getHours(), calendar.value[0].getMinutes()];\n    } else {\n      value = [new Date().getHours(), new Date().getMinutes()];\n    }\n\n    if (is12HoursFormat) {\n      value.push(value[0] < 12 ? 'AM' : 'PM');\n      if (value[0] > 12) value[0] -= 12;\n      if (value[0] === 0) value[0] = 12;\n    }\n\n    calendar.timePickerPopover = app.popover.create({\n      el: $el.find('.calendar-time-picker-popover'),\n      targetEl: $el.find('.calendar-time-selector .link'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeTimePicker();\n        },\n\n        closed() {\n          if (calendar.timePickerPopover.$el) calendar.timePickerPopover.$el.remove();\n          calendar.timePickerPopover.destroy();\n\n          if (calendar.timePickerInstance) {\n            calendar.timePickerInstance.close();\n            calendar.timePickerInstance.destroy();\n          }\n\n          delete calendar.timePickerInstance;\n          delete calendar.timePickerPopover;\n        }\n\n      }\n    });\n    calendar.timePickerPopover.open();\n    calendar.timePickerInstance = app.picker.create({\n      containerEl: calendar.timePickerPopover.$el.find('.calendar-time-picker'),\n      value,\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values: hoursArr\n      }, {\n        divider: true,\n        content: ':'\n      }, {\n        values: minutesArr,\n        displayValues: minutesArr.map(m => m < 10 ? `0${m}` : m)\n      }, ...(is12HoursFormat ? [{\n        values: ['AM', 'PM']\n      }] : [])]\n    });\n  }\n\n  closeTimePicker() {\n    const calendar = this;\n    const {\n      is12HoursFormat\n    } = calendar;\n\n    if (calendar.timePickerInstance) {\n      const timePickerValue = calendar.timePickerInstance.value;\n      let hours = parseInt(timePickerValue[0], 10);\n      const minutes = parseInt(timePickerValue[1], 10);\n      const period = calendar.timePickerInstance.value[2];\n\n      if (is12HoursFormat) {\n        if (period === 'AM' && hours === 12) {\n          hours = 0;\n        } else if (period === 'PM' && hours !== 12) {\n          hours += 12;\n        }\n      }\n\n      let value = calendar.value && calendar.value.length && calendar.value[0];\n\n      if (!value) {\n        value = new Date();\n        value.setHours(hours, minutes, 0, 0);\n      } else {\n        value = new Date(value);\n        value.setHours(hours, minutes);\n      }\n\n      calendar.setValue([value]);\n      if (calendar.timePickerPopover && calendar.timePickerPopover.opened) calendar.timePickerPopover.close();\n    }\n  }\n\n  onOpen() {\n    const calendar = this;\n    const {\n      initialized,\n      $el,\n      app,\n      $inputEl,\n      inline,\n      value,\n      params\n    } = calendar;\n    calendar.closing = false;\n    calendar.opened = true;\n    calendar.opening = true; // Init main events\n\n    calendar.attachCalendarEvents();\n    const updateValue = !value && params.value; // Set value\n\n    if (!initialized) {\n      if (value) calendar.setValue(value, 0);else if (params.value) {\n        calendar.setValue(calendar.normalizeValues(params.value), 0);\n      }\n    } else if (value) {\n      calendar.setValue(value, 0);\n    } // Update current month and year\n\n\n    calendar.updateCurrentMonthYear(); // Set initial translate\n\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate(); // Update input value\n\n    if (updateValue) calendar.updateValue();else if (params.header && value) {\n      calendar.updateValue(true);\n    } // Extra focus\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    calendar.initialized = true;\n    calendar.$months.each(monthEl => {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    }); // Trigger events\n\n    if ($el) {\n      $el.trigger('calendar:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('calendar:open');\n    }\n\n    calendar.emit('local::open calendarOpen', calendar);\n  }\n\n  onOpened() {\n    const calendar = this;\n    calendar.opening = false;\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:opened');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:opened');\n    }\n\n    calendar.emit('local::opened calendarOpened', calendar);\n  }\n\n  onClose() {\n    const calendar = this;\n    const app = calendar.app;\n    calendar.opening = false;\n    calendar.closing = true;\n\n    if (calendar.$inputEl) {\n      if (app.theme === 'md') {\n        calendar.$inputEl.trigger('blur');\n      } else {\n        const validate = calendar.$inputEl.attr('validate');\n        const required = calendar.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(calendar.$inputEl);\n        }\n      }\n    }\n\n    if (calendar.detachCalendarEvents) {\n      calendar.detachCalendarEvents();\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:close');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:close');\n    }\n\n    calendar.emit('local::close calendarClose', calendar);\n  }\n\n  onClosed() {\n    const calendar = this;\n    calendar.opened = false;\n    calendar.closing = false;\n\n    if (!calendar.inline) {\n      nextTick(() => {\n        if (calendar.modal && calendar.modal.el && calendar.modal.destroy) {\n          if (!calendar.params.routableModals) {\n            calendar.modal.destroy();\n          }\n        }\n\n        delete calendar.modal;\n      });\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:closed');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:closed');\n    }\n\n    calendar.emit('local::closed calendarClosed', calendar);\n  }\n\n  open() {\n    const calendar = this;\n    const {\n      app,\n      opened,\n      inline,\n      $inputEl,\n      params\n    } = calendar;\n    if (opened) return;\n\n    if (inline) {\n      calendar.$el = $(calendar.render());\n      calendar.$el[0].f7Calendar = calendar;\n      calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n      calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n      calendar.$containerEl.append(calendar.$el);\n      calendar.onOpen();\n      calendar.onOpened();\n      return;\n    }\n\n    let modalType = params.openIn;\n\n    if (modalType === 'auto') {\n      modalType = calendar.isPopover() ? 'popover' : 'sheet';\n    }\n\n    const modalContent = calendar.render();\n    const modalParams = {\n      targetEl: $inputEl,\n      scrollToEl: params.scrollToInput ? $inputEl : undefined,\n      content: modalContent,\n      backdrop: params.backdrop === true || modalType === 'popover' && app.params.popover.backdrop !== false && params.backdrop !== false,\n      closeByBackdropClick: params.closeByBackdropClick,\n      on: {\n        open() {\n          const modal = this;\n          calendar.modal = modal;\n          calendar.$el = modalType === 'popover' ? modal.$el.find('.calendar') : modal.$el;\n          calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n          calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n          calendar.$el[0].f7Calendar = calendar;\n\n          if (modalType === 'customModal') {\n            $(calendar.$el).find('.calendar-close').once('click', () => {\n              calendar.close();\n            });\n          }\n\n          calendar.onOpen();\n        },\n\n        opened() {\n          calendar.onOpened();\n        },\n\n        close() {\n          calendar.onClose();\n        },\n\n        closed() {\n          calendar.onClosed();\n        }\n\n      }\n    };\n\n    if (modalType === 'sheet') {\n      modalParams.push = params.sheetPush;\n      modalParams.swipeToClose = params.sheetSwipeToClose;\n    }\n\n    if (params.routableModals && calendar.view) {\n      calendar.view.router.navigate({\n        url: calendar.url,\n        route: {\n          path: calendar.url,\n          [modalType]: modalParams\n        }\n      });\n    } else {\n      calendar.modal = app[modalType].create(modalParams);\n      calendar.modal.open();\n    }\n  }\n\n  close() {\n    const calendar = this;\n    const {\n      opened,\n      inline\n    } = calendar;\n    if (!opened) return;\n\n    if (inline) {\n      calendar.onClose();\n      calendar.onClosed();\n      return;\n    }\n\n    if (calendar.params.routableModals && calendar.view) {\n      calendar.view.router.back();\n    } else {\n      calendar.modal.close();\n    }\n  }\n\n  init() {\n    const calendar = this;\n    calendar.initInput();\n\n    if (calendar.inline) {\n      calendar.open();\n      calendar.emit('local::init calendarInit', calendar);\n      return;\n    }\n\n    if (!calendar.initialized && calendar.params.value) {\n      calendar.setValue(calendar.normalizeValues(calendar.params.value));\n    } // Attach input Events\n\n\n    if (calendar.$inputEl) {\n      calendar.attachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.attachHtmlEvents();\n    }\n\n    calendar.emit('local::init calendarInit', calendar);\n  }\n\n  destroy() {\n    const calendar = this;\n    if (calendar.destroyed) return;\n    const {\n      $el\n    } = calendar;\n    calendar.emit('local::beforeDestroy calendarBeforeDestroy', calendar);\n    if ($el) $el.trigger('calendar:beforedestroy');\n    calendar.close(); // Detach Events\n\n    if (calendar.$inputEl) {\n      calendar.detachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.detachHtmlEvents();\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if ($el && $el.length) delete calendar.$el[0].f7Calendar;\n    deleteProps(calendar);\n    calendar.destroyed = true;\n  }\n\n}\n\nexport default Calendar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}