{"ast":null,"code":"import _toConsumableArray from\"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{f7,Page,Navbar,Card,CardHeader,CardContent,CardFooter,Panel,Block,Link}from'framework7-react';import'./Cards.css';import'./Panel.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var pokeapiUrl='https://pokeapi.co/api/v2/pokemon?limit=5';var WarningAlertTitle='<i class=\"icon f7-icons color-orange\" style=\"font-size: 35px;\">exclamationmark</i>';var ListPage=function ListPage(_ref){var myPokemonList=_ref.myPokemonList,f7router=_ref.f7router;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),consumePokeapi=_useState2[0],setConsumePokeapi=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pokemonList=_useState4[0],setPokemonList=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showPreloader=_useState6[0],setShowPreloader=_useState6[1];var listItem=[];var loadMore=function loadMore(){if(!consumePokeapi)setConsumePokeapi(true);};var getPokemonDetail=function getPokemonDetail(pokeapiResultsArray){pokeapiResultsArray.forEach(function(element){fetch(element.url,{method:'GET'}).then(function(response){return response.json();}).then(function(response){if(response.sprites.length<=0){f7.dialog.alert(\"Data from Pokeapi can't be processed\",WarningAlertTitle);setShowPreloader(false);console.error('error: sprites from pokeapi is not an array\\nsprites:',response.sprites);return;}if(!Array.isArray(response.moves)||response.moves.length<=0){f7.dialog.alert(\"Data from Pokeapi can't be processed\",WarningAlertTitle);setShowPreloader(false);console.error('error: moves from pokeapi is not an array\\nmoves:',response.moves);return;}if(!Array.isArray(response.types)||response.types.length<=0){f7.dialog.alert(\"Data from Pokeapi can't be processed\",WarningAlertTitle);setShowPreloader(false);console.error('error: types from pokeapi is not an array\\ntypes:',response.types);return;}setPokemonList(function(state){return[].concat(_toConsumableArray(state),[{title:response.name,subtitle:response.id,slot:'media',src:response.sprites.other.dream_world.front_default,width:'44',moves:response.moves,types:response.types,alt:\"artwork of \".concat(response.name)}]);});}).catch(function(error){f7.dialog.alert('Pokeapi error',WarningAlertTitle);setShowPreloader(false);console.error('error:',error);return;});});};useEffect(function(){fetch(pokeapiUrl,{method:'GET'}).then(function(response){return response.json();}).then(function(response){setConsumePokeapi(false);if(Array.isArray(response.results)&&response.results.length>0){console.info('info: render pokemon data from',pokeapiUrl);pokeapiUrl=response.next;getPokemonDetail(response.results);return;}f7.dialog.alert(\"Data from Pokeapi can't be processed\",WarningAlertTitle);setShowPreloader(false);console.error('error: results from pokeapi is not an array');}).catch(function(error){f7.dialog.alert('Pokeapi error',WarningAlertTitle);setConsumePokeapi(false);setShowPreloader(false);console.error('error:',error);});},[consumePokeapi,myPokemonList]);pokemonList.forEach(function(element){listItem.push(/*#__PURE__*/_jsxs(Card,{className:\"pokemon-card-header-pic\",children:[/*#__PURE__*/_jsx(CardHeader,{className:\"no-border\",valign:\"bottom\",style:{backgroundImage:\"url(\".concat(element.src,\")\")}}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(\"h1\",{children:element.title.charAt(0).toUpperCase()+element.title.slice(1)})}),/*#__PURE__*/_jsx(CardFooter,{children:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){f7router.navigate('/detail/',{props:{myPokemonList:myPokemonList,title:element.title.charAt(0).toUpperCase()+element.title.slice(1),src:element.src,moves:element.moves,types:element.types}});},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Detail\"})})})]}));});return/*#__PURE__*/_jsxs(Page,{name:\"list\",infinite:true,infiniteDistance:50,infinitePreloader:showPreloader,onInfinite:loadMore,onPageAfterOut:function onPageAfterOut(){pokeapiUrl='https://pokeapi.co/api/v2/pokemon?limit=5';},children:[/*#__PURE__*/_jsx(Navbar,{title:\"Pokemon List\",children:/*#__PURE__*/_jsx(Link,{slot:\"right\",iconF7:\"menu\",panelOpen:\"#panel-menu\"})}),/*#__PURE__*/_jsx(Panel,{right:true,cover:true,containerEl:\"#list\",id:\"panel-menu\",children:/*#__PURE__*/_jsx(Page,{children:/*#__PURE__*/_jsx(Block,{strong:true,children:/*#__PURE__*/_jsx(Link,{panelClose:true,onClick:function onClick(){f7router.navigate('/mypokemon/',{props:{myPokemonList:myPokemonList}});},children:\"My Pokemon List\"})})})}),listItem]});};export default ListPage;","map":{"version":3,"names":["React","useState","useEffect","f7","Page","Navbar","Card","CardHeader","CardContent","CardFooter","Panel","Block","Link","pokeapiUrl","WarningAlertTitle","ListPage","myPokemonList","f7router","consumePokeapi","setConsumePokeapi","pokemonList","setPokemonList","showPreloader","setShowPreloader","listItem","loadMore","getPokemonDetail","pokeapiResultsArray","forEach","element","fetch","url","method","then","response","json","sprites","length","dialog","alert","console","error","Array","isArray","moves","types","state","title","name","subtitle","id","slot","src","other","dream_world","front_default","width","alt","catch","results","info","next","push","backgroundImage","charAt","toUpperCase","slice","navigate","props"],"sources":["/root/Pokemon/ui/src/ListPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n    f7,\n    Page,\n    Navbar,\n    Card,\n    CardHeader,\n    CardContent,\n    CardFooter,\n    Panel,\n    Block,\n    Link\n} from 'framework7-react';\nimport './Cards.css';\nimport './Panel.css';\n\nvar pokeapiUrl = 'https://pokeapi.co/api/v2/pokemon?limit=5';\nconst WarningAlertTitle = '<i class=\"icon f7-icons color-orange\" style=\"font-size: 35px;\">exclamationmark</i>';\n\nconst ListPage = ({ myPokemonList, f7router }) => {\n    const [consumePokeapi, setConsumePokeapi] = useState(true);\n    const [pokemonList, setPokemonList] = useState([]);\n    const [showPreloader, setShowPreloader] = useState(true);\n    const listItem = [];\n\n    const loadMore = () => { if (!consumePokeapi) setConsumePokeapi(true) }\n    \n    const getPokemonDetail = (pokeapiResultsArray) => {\n        pokeapiResultsArray.forEach(element => {\n            fetch(element.url, {method: 'GET'})\n            .then((response) => response.json())\n            .then((response) => {\n                if (response.sprites.length <= 0) {\n                    f7.dialog.alert(\n                        \"Data from Pokeapi can't be processed\",\n                        WarningAlertTitle\n                    );\n                    setShowPreloader(false);\n                    console.error('error: sprites from pokeapi is not an array\\nsprites:', response.sprites);\n                    return;\n                }\n                if (!Array.isArray(response.moves) || response.moves.length <= 0) {\n                    f7.dialog.alert(\n                        \"Data from Pokeapi can't be processed\",\n                        WarningAlertTitle\n                    );\n                    setShowPreloader(false);\n                    console.error('error: moves from pokeapi is not an array\\nmoves:', response.moves);\n                    return;\n                }\n                if (!Array.isArray(response.types) || response.types.length <= 0) {\n                    f7.dialog.alert(\n                        \"Data from Pokeapi can't be processed\",\n                        WarningAlertTitle\n                    );\n                    setShowPreloader(false);\n                    console.error('error: types from pokeapi is not an array\\ntypes:', response.types);\n                    return;\n                }\n                setPokemonList(state => [\n                    ...state,\n                    {\n                        title: response.name,\n                        subtitle: response.id,\n                        slot: 'media',\n                        src: response.sprites.other.dream_world.front_default,\n                        width: '44',\n                        moves: response.moves,\n                        types: response.types,\n                        alt: `artwork of ${response.name}`,\n                    }\n                ]);\n            })\n            .catch(error => {\n                f7.dialog.alert(\n                    'Pokeapi error',\n                    WarningAlertTitle\n                );\n                setShowPreloader(false);\n                console.error('error:', error);\n                return;\n            });\n        });\n    }\n\n    useEffect(() => {\n        fetch(pokeapiUrl, {method: 'GET'})\n        .then((response) => response.json())\n        .then((response) => {\n            setConsumePokeapi(false);\n            if (Array.isArray(response.results) && response.results.length > 0) {\n                console.info('info: render pokemon data from', pokeapiUrl);\n                pokeapiUrl = response.next;\n                getPokemonDetail(response.results);\n                return;\n            }\n            f7.dialog.alert(\n                \"Data from Pokeapi can't be processed\",\n                WarningAlertTitle\n            );\n            setShowPreloader(false);\n            console.error('error: results from pokeapi is not an array');\n        })\n        .catch(error => {\n            f7.dialog.alert(\n                'Pokeapi error',\n                WarningAlertTitle\n            );\n            setConsumePokeapi(false);\n            setShowPreloader(false);\n            console.error('error:', error);\n        });\n    }, [consumePokeapi, myPokemonList]);\n\n    pokemonList.forEach(element => {\n        listItem.push(\n           <Card className=\"pokemon-card-header-pic\">\n                <CardHeader\n                    className=\"no-border\"\n                    valign=\"bottom\"\n                    style={{\n                        backgroundImage: `url(${element.src})`,\n                    }}\n                />\n                <CardContent>\n                    <h1>{element.title.charAt(0).toUpperCase() + element.title.slice(1)}</h1>\n                </CardContent>\n                <CardFooter>\n                    <Link onClick={() => {\n                        f7router.navigate('/detail/', {\n                            props: {\n                                myPokemonList: myPokemonList,\n                                title: element.title.charAt(0).toUpperCase() + element.title.slice(1),\n                                src: element.src,\n                                moves: element.moves,\n                                types: element.types,\n                            }\n                        });\n                    }}><h3>Detail</h3></Link>\n                </CardFooter>\n            </Card>\n        );\n    });\n\n    return (\n        <Page \n            name=\"list\"\n            infinite\n            infiniteDistance={50}\n            infinitePreloader={showPreloader}\n            onInfinite={loadMore}\n            onPageAfterOut={() => {\n                pokeapiUrl = 'https://pokeapi.co/api/v2/pokemon?limit=5';\n            }}\n        >\n            <Navbar title=\"Pokemon List\">\n                <Link slot=\"right\" iconF7=\"menu\" panelOpen=\"#panel-menu\"></Link>\n            </Navbar>\n            <Panel right cover containerEl=\"#list\" id=\"panel-menu\">\n                <Page>\n                    <Block strong>\n                        <Link panelClose onClick={() => {\n                            f7router.navigate('/mypokemon/', {\n                                props: {\n                                    myPokemonList: myPokemonList\n                                }\n                            });\n                        }}>My Pokemon List</Link>\n                    </Block>\n                </Page>\n            </Panel>\n            {listItem}\n        </Page>\n    )\n}\n\nexport default ListPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}