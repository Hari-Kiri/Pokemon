{"ast":null,"code":"import _classCallCheck from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n\n/* eslint indent: [\"off\"] */\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, now, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nvar PhotoBrowser = /*#__PURE__*/function (_Framework7Class) {\n  _inherits(PhotoBrowser, _Framework7Class);\n\n  var _super = _createSuper(PhotoBrowser);\n\n  function PhotoBrowser(app, params) {\n    var _this;\n\n    _classCallCheck(this, PhotoBrowser);\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    _this = _super.call(this, params, [app]);\n\n    var pb = _assertThisInitialized(_this);\n\n    pb.app = app;\n    var defaults = extend({\n      on: {}\n    }, app.params.photoBrowser); // Extend defaults with modules params\n\n    pb.useModulesParams(defaults);\n    pb.params = extend(defaults, params);\n    extend(pb, {\n      exposed: false,\n      opened: false,\n      activeIndex: pb.params.swiper.initialSlide,\n      url: pb.params.url,\n      swipeToClose: {\n        allow: true,\n        isTouched: false,\n        diff: undefined,\n        start: undefined,\n        current: undefined,\n        started: false,\n        activeSlide: undefined,\n        timeStart: undefined\n      }\n    }); // Install Modules\n\n    pb.useModules(); // Init\n\n    pb.init();\n    return _this;\n  }\n\n  _createClass(PhotoBrowser, [{\n    key: \"view\",\n    get: function get() {\n      var params = this.params,\n          app = this.app;\n      return params.view || app.views.main;\n    }\n  }, {\n    key: \"onSlideChange\",\n    value: function onSlideChange(swiper) {\n      var pb = this;\n      pb.activeIndex = swiper.activeIndex;\n      var current = swiper.activeIndex + 1;\n      var total = pb.params.virtualSlides ? pb.params.photos.length : swiper.slides.length;\n\n      if (swiper.params.loop) {\n        total -= 2;\n        current -= swiper.loopedSlides;\n        if (current < 1) current = total + current;\n        if (current > total) current -= total;\n      }\n\n      var $activeSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(\".swiper-slide[data-swiper-slide-index=\\\"\".concat(swiper.activeIndex, \"\\\"]\")) : swiper.slides.eq(swiper.activeIndex);\n      var $previousSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(\".swiper-slide[data-swiper-slide-index=\\\"\".concat(swiper.previousIndex, \"\\\"]\")) : swiper.slides.eq(swiper.previousIndex);\n      var $currentEl = pb.$el.find('.photo-browser-current');\n      var $totalEl = pb.$el.find('.photo-browser-total');\n      var navbarEl;\n\n      if (pb.params.type === 'page' && pb.params.navbar && $currentEl.length === 0 && pb.app.theme === 'ios') {\n        navbarEl = pb.app.navbar.getElByPage(pb.$el);\n\n        if (navbarEl) {\n          $currentEl = $(navbarEl).find('.photo-browser-current');\n          $totalEl = $(navbarEl).find('.photo-browser-total');\n        }\n      }\n\n      if ($currentEl.length && $totalEl.length) {\n        $currentEl.text(current);\n        $totalEl.text(total);\n        if (!navbarEl) navbarEl = $currentEl.parents('.navbar')[0];\n\n        if (navbarEl) {\n          pb.app.navbar.size(navbarEl);\n        }\n      } // Update captions\n\n\n      if (pb.captions.length > 0) {\n        var captionIndex = swiper.params.loop ? $activeSlideEl.attr('data-swiper-slide-index') : pb.activeIndex;\n        pb.$captionsContainerEl.find('.photo-browser-caption-active').removeClass('photo-browser-caption-active');\n        pb.$captionsContainerEl.find(\"[data-caption-index=\\\"\".concat(captionIndex, \"\\\"]\")).addClass('photo-browser-caption-active');\n      } // Stop Video\n\n\n      var previousSlideVideo = $previousSlideEl.find('video');\n\n      if (previousSlideVideo.length > 0) {\n        if ('pause' in previousSlideVideo[0]) previousSlideVideo[0].pause();\n      }\n    }\n  }, {\n    key: \"onTouchStart\",\n    value: function onTouchStart() {\n      var pb = this;\n      var swipeToClose = pb.swipeToClose;\n      if (!swipeToClose.allow) return;\n      swipeToClose.isTouched = true;\n    }\n  }, {\n    key: \"onTouchMove\",\n    value: function onTouchMove(e) {\n      var pb = this;\n      var swipeToClose = pb.swipeToClose;\n      if (!swipeToClose.isTouched) return;\n\n      if (!swipeToClose.started) {\n        swipeToClose.started = true;\n        swipeToClose.start = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n        if (pb.params.virtualSlides) {\n          swipeToClose.activeSlide = pb.swiper.$wrapperEl.children('.swiper-slide-active');\n        } else {\n          swipeToClose.activeSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n        }\n\n        swipeToClose.timeStart = now();\n      }\n\n      e.preventDefault();\n      swipeToClose.current = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n      swipeToClose.diff = swipeToClose.start - swipeToClose.current;\n      pb.$el.transition(0).transform(\"translate3d(0,\".concat(-swipeToClose.diff, \"px,0)\"));\n    }\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd() {\n      var pb = this;\n      var swipeToClose = pb.swipeToClose;\n      swipeToClose.isTouched = false;\n\n      if (!swipeToClose.started) {\n        swipeToClose.started = false;\n        return;\n      }\n\n      swipeToClose.started = false;\n      swipeToClose.allow = false;\n      var diff = Math.abs(swipeToClose.diff);\n      var timeDiff = new Date().getTime() - swipeToClose.timeStart;\n\n      if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n        nextTick(function () {\n          if (pb.$el) {\n            if (swipeToClose.diff < 0) pb.$el.addClass('swipe-close-to-bottom');else pb.$el.addClass('swipe-close-to-top');\n          }\n\n          pb.emit('local::swipeToClose', pb);\n          pb.$el.transform('').transition('');\n          pb.close();\n          swipeToClose.allow = true;\n        });\n        return;\n      }\n\n      if (diff !== 0) {\n        pb.$el.addClass('photo-browser-transitioning').transitionEnd(function () {\n          swipeToClose.allow = true;\n          pb.$el.removeClass('photo-browser-transitioning');\n        });\n      } else {\n        swipeToClose.allow = true;\n      }\n\n      nextTick(function () {\n        pb.$el.transform('').transition('');\n      });\n    } // Render Functions\n\n  }, {\n    key: \"renderNavbar\",\n    value: function renderNavbar() {\n      var pb = this;\n      if (pb.params.renderNavbar) return pb.params.renderNavbar.call(pb);\n      var iconsColor = pb.params.iconsColor;\n      if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n      var pageBackLinkText = (pb.app.theme === 'ios' || pb.app.theme === 'aurora') && pb.params.pageBackLinkText ? pb.params.pageBackLinkText : '';\n      var renderNavbarCount = typeof pb.params.navbarShowCount === 'undefined' ? pb.params.photos.length > 1 : pb.params.navbarShowCount;\n      var isPopup = pb.params.type !== 'page';\n      return $jsx(\"div\", {\n        class: \"navbar navbar-photo-browser \".concat(pb.params.theme === 'dark' ? 'navbar-photo-browser-dark' : '')\n      }, $jsx(\"div\", {\n        class: \"navbar-bg\"\n      }), $jsx(\"div\", {\n        class: \"navbar-inner navbar-inner-centered-title sliding\"\n      }, !isPopup && $jsx(\"div\", {\n        class: \"left\"\n      }, $jsx(\"a\", {\n        class: \"link \".concat(!pageBackLinkText ? 'icon-only' : '', \" back\")\n      }, $jsx(\"i\", {\n        class: \"icon icon-back \".concat(iconsColor ? \"color-\".concat(iconsColor) : '')\n      }), pageBackLinkText && $jsx(\"span\", null, pageBackLinkText))), renderNavbarCount && $jsx(\"div\", {\n        class: \"title\"\n      }, $jsx(\"span\", {\n        class: \"photo-browser-current\"\n      }), $jsx(\"span\", {\n        class: \"photo-browser-of\"\n      }, pb.params.navbarOfText), $jsx(\"span\", {\n        class: \"photo-browser-total\"\n      })), isPopup && $jsx(\"div\", {\n        class: \"right\"\n      }, $jsx(\"a\", {\n        class: \"link popup-close\",\n        \"data-popup\": \".photo-browser-popup\"\n      }, $jsx(\"span\", null, pb.params.popupCloseLinkText)))));\n    }\n  }, {\n    key: \"renderToolbar\",\n    value: function renderToolbar() {\n      var pb = this;\n      if (pb.params.renderToolbar) return pb.params.renderToolbar.call(pb);\n      var iconsColor = pb.params.iconsColor;\n      if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n      return $jsx(\"div\", {\n        class: \"toolbar toolbar-bottom tabbar\"\n      }, $jsx(\"div\", {\n        class: \"toolbar-inner\"\n      }, $jsx(\"a\", {\n        class: \"link photo-browser-prev\"\n      }, $jsx(\"i\", {\n        class: \"icon icon-back \".concat(iconsColor ? \"color-\".concat(iconsColor) : '')\n      })), $jsx(\"a\", {\n        class: \"link photo-browser-next\"\n      }, $jsx(\"i\", {\n        class: \"icon icon-forward \".concat(iconsColor ? \"color-\".concat(iconsColor) : '')\n      }))));\n    }\n  }, {\n    key: \"renderCaption\",\n    value: function renderCaption(caption, index) {\n      var pb = this;\n      if (pb.params.renderCaption) return pb.params.renderCaption.call(pb, caption, index);\n      return $jsx(\"div\", {\n        class: \"photo-browser-caption\",\n        \"data-caption-index\": index\n      }, caption);\n    }\n  }, {\n    key: \"renderObject\",\n    value: function renderObject(photo, index) {\n      var pb = this;\n      if (pb.params.renderObject) return pb.params.renderObject.call(pb, photo, index);\n      return $jsx(\"div\", {\n        class: \"photo-browser-slide photo-browser-object-slide swiper-slide\",\n        \"data-swiper-slide-index\": index\n      }, photo.html ? photo.html : photo);\n    }\n  }, {\n    key: \"renderLazyPhoto\",\n    value: function renderLazyPhoto(photo, index) {\n      var pb = this;\n      if (pb.params.renderLazyPhoto) return pb.params.renderLazyPhoto.call(pb, photo, index);\n      return $jsx(\"div\", {\n        class: \"photo-browser-slide photo-browser-slide-lazy swiper-slide\",\n        \"data-swiper-slide-index\": index\n      }, $jsx(\"div\", {\n        class: \"swiper-lazy-preloader\"\n      }), $jsx(\"span\", {\n        class: \"swiper-zoom-container\"\n      }, $jsx(\"img\", {\n        \"data-src\": photo.url ? photo.url : photo,\n        class: \"swiper-lazy\"\n      })));\n    }\n  }, {\n    key: \"renderPhoto\",\n    value: function renderPhoto(photo, index) {\n      var pb = this;\n      if (pb.params.renderPhoto) return pb.params.renderPhoto.call(pb, photo, index);\n      return $jsx(\"div\", {\n        class: \"photo-browser-slide swiper-slide\",\n        \"data-swiper-slide-index\": index\n      }, $jsx(\"span\", {\n        class: \"swiper-zoom-container\"\n      }, $jsx(\"img\", {\n        src: photo.url ? photo.url : photo\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var pb = this;\n      if (pb.params.render) return pb.params.render.call(pb, pb.params);\n      return $jsx(\"div\", {\n        class: \"photo-browser photo-browser-\".concat(pb.params.theme)\n      }, $jsx(\"div\", {\n        class: \"view\"\n      }, $jsx(\"div\", {\n        class: \"page photo-browser-page photo-browser-page-\".concat(pb.params.theme, \" no-toolbar \").concat(!pb.params.navbar ? 'no-navbar' : ''),\n        \"data-name\": \"photo-browser-page\"\n      }, pb.params.navbar && pb.renderNavbar(), pb.params.toolbar && pb.renderToolbar(), $jsx(\"div\", {\n        class: \"photo-browser-captions photo-browser-captions-\".concat(pb.params.captionsTheme || pb.params.theme)\n      }, pb.params.photos.map(function (photo, index) {\n        if (photo.caption) return pb.renderCaption(photo.caption, index);\n        return '';\n      })), $jsx(\"div\", {\n        class: \"photo-browser-swiper-container swiper\"\n      }, $jsx(\"div\", {\n        class: \"photo-browser-swiper-wrapper swiper-wrapper\"\n      }, !pb.params.virtualSlides && pb.params.photos.map(function (photo, index) {\n        if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n          return pb.renderObject(photo, index);\n        }\n\n        if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n          return pb.renderLazyPhoto(photo, index);\n        }\n\n        return pb.renderPhoto(photo, index);\n      }))))));\n    }\n  }, {\n    key: \"renderStandalone\",\n    value: function renderStandalone() {\n      var pb = this;\n      if (pb.params.renderStandalone) return pb.params.renderStandalone.call(pb);\n      var standaloneHtml = \"<div class=\\\"popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen\\\">\".concat(pb.render(), \"</div>\");\n      return standaloneHtml;\n    }\n  }, {\n    key: \"renderPage\",\n    value: function renderPage() {\n      var pb = this;\n      if (pb.params.renderPage) return pb.params.renderPage.call(pb);\n      var pageHtml = pb.render();\n      return pageHtml;\n    }\n  }, {\n    key: \"renderPopup\",\n    value: function renderPopup() {\n      var pb = this;\n      if (pb.params.renderPopup) return pb.params.renderPopup.call(pb);\n      var popupHtml = \"<div class=\\\"popup photo-browser-popup\\\">\".concat(pb.render(), \"</div>\");\n      return popupHtml;\n    } // Callbacks\n\n  }, {\n    key: \"onOpen\",\n    value: function onOpen(type, el) {\n      var pb = this;\n      var app = pb.app;\n      var $el = $(el);\n      $el[0].f7PhotoBrowser = pb;\n      pb.$el = $el;\n      pb.el = $el[0];\n      pb.openedIn = type;\n      pb.opened = true;\n      pb.$swiperContainerEl = pb.$el.find('.photo-browser-swiper-container');\n      pb.$swiperWrapperEl = pb.$el.find('.photo-browser-swiper-wrapper');\n      pb.slides = pb.$el.find('.photo-browser-slide');\n      pb.$captionsContainerEl = pb.$el.find('.photo-browser-captions');\n      pb.captions = pb.$el.find('.photo-browser-caption'); // Init Swiper\n\n      var clickTimeout;\n      var swiperParams = extend({}, pb.params.swiper, {\n        initialSlide: pb.activeIndex,\n        cssMode: typeof pb.params.swiper.cssMode === 'undefined' && (app.device.ios || app.device.android) ? true : pb.params.swiper.cssMode,\n        on: {\n          click: function click(e) {\n            clearTimeout(clickTimeout);\n\n            if (pb.params.exposition) {\n              clickTimeout = setTimeout(function () {\n                pb.expositionToggle();\n              }, 350);\n            }\n\n            pb.emit('local::tap', e);\n            pb.emit('local::click', e);\n          },\n          doubleClick: function doubleClick(e) {\n            clearTimeout(clickTimeout);\n            pb.emit('local::doubleTap', e);\n            pb.emit('local::doubleClick', e);\n          },\n          slideChange: function slideChange() {\n            var swiper = this;\n            pb.onSlideChange(swiper);\n\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            pb.emit.apply(pb, ['local::slideChange'].concat(args));\n          },\n          transitionStart: function transitionStart() {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n\n            pb.emit.apply(pb, ['local::transitionStart'].concat(args));\n          },\n          transitionEnd: function transitionEnd() {\n            for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n              args[_key3] = arguments[_key3];\n            }\n\n            pb.emit.apply(pb, ['local::transitionEnd'].concat(args));\n          },\n          slideChangeTransitionStart: function slideChangeTransitionStart() {\n            var swiper = this;\n            pb.onSlideChange(swiper);\n\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n              args[_key4] = arguments[_key4];\n            }\n\n            pb.emit.apply(pb, ['local::slideChangeTransitionStart'].concat(args));\n          },\n          slideChangeTransitionEnd: function slideChangeTransitionEnd() {\n            for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n              args[_key5] = arguments[_key5];\n            }\n\n            pb.emit.apply(pb, ['local::slideChangeTransitionEnd'].concat(args));\n          },\n          lazyImageLoad: function lazyImageLoad() {\n            for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n              args[_key6] = arguments[_key6];\n            }\n\n            pb.emit.apply(pb, ['local::lazyImageLoad'].concat(args));\n          },\n          lazyImageReady: function lazyImageReady() {\n            for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n              args[_key7] = arguments[_key7];\n            }\n\n            var slideEl = args[0];\n            $(slideEl).removeClass('photo-browser-slide-lazy');\n            pb.emit.apply(pb, ['local::lazyImageReady'].concat(args));\n          }\n        }\n      });\n\n      if (pb.params.swipeToClose && pb.params.type !== 'page') {\n        extend(swiperParams.on, {\n          touchStart: function touchStart(swiper, e) {\n            pb.onTouchStart(e);\n            pb.emit('local::touchStart', e);\n          },\n          touchMoveOpposite: function touchMoveOpposite(swiper, e) {\n            pb.onTouchMove(e);\n            pb.emit('local::touchMoveOpposite', e);\n          },\n          touchEnd: function touchEnd(swiper, e) {\n            pb.onTouchEnd(e);\n            pb.emit('local::touchEnd', e);\n          }\n        });\n      }\n\n      if (pb.params.virtualSlides) {\n        extend(swiperParams, {\n          virtual: {\n            slides: pb.params.photos,\n            renderSlide: function renderSlide(photo, index) {\n              if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n                return pb.renderObject(photo, index);\n              }\n\n              if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n                return pb.renderLazyPhoto(photo, index);\n              }\n\n              return pb.renderPhoto(photo, index);\n            }\n          }\n        });\n      }\n\n      var window = getWindow();\n      pb.swiper = app.swiper ? app.swiper.create(pb.$swiperContainerEl, swiperParams) : new window.Swiper(pb.$swiperContainerEl, swiperParams);\n\n      if (pb.activeIndex === 0) {\n        pb.onSlideChange(pb.swiper);\n      }\n\n      if (pb.$el) {\n        pb.$el.trigger('photobrowser:open');\n      }\n\n      pb.emit('local::open photoBrowserOpen', pb);\n    }\n  }, {\n    key: \"onOpened\",\n    value: function onOpened() {\n      var pb = this;\n\n      if (pb.$el && pb.params.type === 'standalone') {\n        pb.$el.css('animation', 'none');\n      }\n\n      if (pb.$el) {\n        pb.$el.trigger('photobrowser:opened');\n      }\n\n      pb.emit('local::opened photoBrowserOpened', pb);\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      var pb = this;\n      if (pb.destroyed) return; // Destroy Swiper\n\n      if (pb.swiper && pb.swiper.destroy) {\n        pb.swiper.destroy(true, false);\n        pb.swiper = null;\n        delete pb.swiper;\n      }\n\n      if (pb.$el) {\n        pb.$el.trigger('photobrowser:close');\n      }\n\n      pb.emit('local::close photoBrowserClose', pb);\n    }\n  }, {\n    key: \"onClosed\",\n    value: function onClosed() {\n      var pb = this;\n      if (pb.destroyed) return;\n      pb.opened = false;\n      pb.$el = null;\n      pb.el = null;\n      delete pb.$el;\n      delete pb.el;\n\n      if (pb.$el) {\n        pb.$el.trigger('photobrowser:closed');\n      }\n\n      pb.emit('local::closed photoBrowserClosed', pb);\n    } // Open\n\n  }, {\n    key: \"openPage\",\n    value: function openPage() {\n      var pb = this;\n      if (pb.opened) return pb;\n      var pageHtml = pb.renderPage();\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          content: pageHtml,\n          path: pb.url,\n          on: {\n            pageBeforeIn: function pageBeforeIn(e, page) {\n              pb.view.$el.addClass(\"with-photo-browser-page with-photo-browser-page-\".concat(pb.params.theme));\n              pb.onOpen('page', page.el);\n            },\n            pageAfterIn: function pageAfterIn(e, page) {\n              pb.onOpened('page', page.el);\n            },\n            pageBeforeOut: function pageBeforeOut(e, page) {\n              pb.view.$el.removeClass(\"with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-\".concat(pb.params.theme));\n              pb.onClose('page', page.el);\n            },\n            pageAfterOut: function pageAfterOut(e, page) {\n              pb.onClosed('page', page.el);\n            }\n          }\n        }\n      });\n      return pb;\n    }\n  }, {\n    key: \"openStandalone\",\n    value: function openStandalone() {\n      var pb = this;\n      if (pb.opened) return pb;\n      var standaloneHtml = pb.renderStandalone();\n      var popupParams = {\n        backdrop: false,\n        content: standaloneHtml,\n        on: {\n          popupOpen: function popupOpen(popup) {\n            pb.onOpen('popup', popup.el);\n          },\n          popupOpened: function popupOpened(popup) {\n            pb.onOpened('popup', popup.el);\n          },\n          popupClose: function popupClose(popup) {\n            pb.onClose('popup', popup.el);\n          },\n          popupClosed: function popupClosed(popup) {\n            pb.onClosed('popup', popup.el);\n          }\n        }\n      };\n\n      if (pb.params.routableModals && pb.view) {\n        pb.view.router.navigate({\n          url: pb.url,\n          route: {\n            path: pb.url,\n            popup: popupParams\n          }\n        });\n      } else {\n        pb.modal = pb.app.popup.create(popupParams).open();\n      }\n\n      return pb;\n    }\n  }, {\n    key: \"openPopup\",\n    value: function openPopup() {\n      var pb = this;\n      if (pb.opened) return pb;\n      var popupHtml = pb.renderPopup();\n      var popupParams = {\n        content: popupHtml,\n        push: pb.params.popupPush,\n        on: {\n          popupOpen: function popupOpen(popup) {\n            pb.onOpen('popup', popup.el);\n          },\n          popupOpened: function popupOpened(popup) {\n            pb.onOpened('popup', popup.el);\n          },\n          popupClose: function popupClose(popup) {\n            pb.onClose('popup', popup.el);\n          },\n          popupClosed: function popupClosed(popup) {\n            pb.onClosed('popup', popup.el);\n          }\n        }\n      };\n\n      if (pb.params.routableModals && pb.view) {\n        pb.view.router.navigate({\n          url: pb.url,\n          route: {\n            path: pb.url,\n            popup: popupParams\n          }\n        });\n      } else {\n        pb.modal = pb.app.popup.create(popupParams).open();\n      }\n\n      return pb;\n    } // Exposition\n\n  }, {\n    key: \"expositionEnable\",\n    value: function expositionEnable() {\n      var pb = this;\n\n      if (pb.params.type === 'page') {\n        pb.view.$el.addClass('with-photo-browser-page-exposed');\n      }\n\n      if (pb.$el) pb.$el.addClass('photo-browser-exposed');\n      if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.addClass('photo-browser-captions-exposed');\n      pb.exposed = true;\n      return pb;\n    }\n  }, {\n    key: \"expositionDisable\",\n    value: function expositionDisable() {\n      var pb = this;\n\n      if (pb.params.type === 'page') {\n        pb.view.$el.removeClass('with-photo-browser-page-exposed');\n      }\n\n      if (pb.$el) pb.$el.removeClass('photo-browser-exposed');\n      if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.removeClass('photo-browser-captions-exposed');\n      pb.exposed = false;\n      return pb;\n    }\n  }, {\n    key: \"expositionToggle\",\n    value: function expositionToggle() {\n      var pb = this;\n\n      if (pb.params.type === 'page') {\n        pb.view.$el.toggleClass('with-photo-browser-page-exposed');\n      }\n\n      if (pb.$el) pb.$el.toggleClass('photo-browser-exposed');\n      if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.toggleClass('photo-browser-captions-exposed');\n      pb.exposed = !pb.exposed;\n      return pb;\n    }\n  }, {\n    key: \"open\",\n    value: function open(index) {\n      var pb = this;\n      var type = pb.params.type;\n\n      if (pb.opened) {\n        if (pb.swiper && typeof index !== 'undefined') {\n          pb.swiper.slideTo(parseInt(index, 10));\n        }\n\n        return pb;\n      }\n\n      if (typeof index !== 'undefined') {\n        pb.activeIndex = index;\n      }\n\n      if (type === 'standalone') {\n        pb.openStandalone();\n      }\n\n      if (type === 'page') {\n        pb.openPage();\n      }\n\n      if (type === 'popup') {\n        pb.openPopup();\n      }\n\n      return pb;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var pb = this;\n      if (!pb.opened) return pb;\n\n      if (pb.params.routableModals && pb.view || pb.openedIn === 'page') {\n        pb.view.router.back();\n      } else {\n        pb.modal.once('modalClosed', function () {\n          nextTick(function () {\n            if (pb.destroyed) return;\n            pb.modal.destroy();\n            delete pb.modal;\n          });\n        });\n        pb.modal.close();\n      }\n\n      return pb;\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"init\",\n    value: function init() {}\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var pb = this;\n      pb.emit('local::beforeDestroy photoBrowserBeforeDestroy', pb);\n\n      if (pb.$el) {\n        pb.$el.trigger('photobrowser:beforedestroy');\n        pb.$el[0].f7PhotoBrowser = null;\n        delete pb.$el[0].f7PhotoBrowser;\n      }\n\n      deleteProps(pb);\n      pb.destroyed = true;\n      pb = null;\n    }\n  }]);\n\n  return PhotoBrowser;\n}(Framework7Class);\n\nexport default PhotoBrowser;","map":{"version":3,"names":["getWindow","$","extend","now","nextTick","deleteProps","Framework7Class","$jsx","PhotoBrowser","app","params","pb","defaults","on","photoBrowser","useModulesParams","exposed","opened","activeIndex","swiper","initialSlide","url","swipeToClose","allow","isTouched","diff","undefined","start","current","started","activeSlide","timeStart","useModules","init","view","views","main","total","virtualSlides","photos","length","slides","loop","loopedSlides","$activeSlideEl","$wrapperEl","find","eq","$previousSlideEl","previousIndex","$currentEl","$el","$totalEl","navbarEl","type","navbar","theme","getElByPage","text","parents","size","captions","captionIndex","attr","$captionsContainerEl","removeClass","addClass","previousSlideVideo","pause","e","targetTouches","pageY","children","preventDefault","transition","transform","Math","abs","timeDiff","Date","getTime","emit","close","transitionEnd","renderNavbar","call","iconsColor","pageBackLinkText","renderNavbarCount","navbarShowCount","isPopup","class","navbarOfText","popupCloseLinkText","renderToolbar","caption","index","renderCaption","photo","renderObject","html","renderLazyPhoto","renderPhoto","src","render","toolbar","captionsTheme","map","String","indexOf","lazy","enabled","renderStandalone","standaloneHtml","renderPage","pageHtml","renderPopup","popupHtml","el","f7PhotoBrowser","openedIn","$swiperContainerEl","$swiperWrapperEl","clickTimeout","swiperParams","cssMode","device","ios","android","click","clearTimeout","exposition","setTimeout","expositionToggle","doubleClick","slideChange","onSlideChange","_len","arguments","args","Array","_key","transitionStart","_len2","_key2","_len3","_key3","slideChangeTransitionStart","_len4","_key4","slideChangeTransitionEnd","_len5","_key5","lazyImageLoad","_len6","_key6","lazyImageReady","_len7","_key7","slideEl","touchStart","onTouchStart","touchMoveOpposite","onTouchMove","touchEnd","onTouchEnd","virtual","renderSlide","window","create","Swiper","trigger","css","destroyed","destroy","router","navigate","route","content","path","pageBeforeIn","page","onOpen","pageAfterIn","onOpened","pageBeforeOut","onClose","pageAfterOut","onClosed","popupParams","backdrop","popupOpen","popup","popupOpened","popupClose","popupClosed","routableModals","modal","open","push","popupPush","expositionHideCaptions","toggleClass","slideTo","parseInt","openStandalone","openPage","openPopup","back","once"],"sources":["/root/Pokemon/ui/node_modules/framework7/components/photo-browser/photo-browser-class.js"],"sourcesContent":["/* eslint indent: [\"off\"] */\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, now, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass PhotoBrowser extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const pb = this;\n    pb.app = app;\n    const defaults = extend({\n      on: {}\n    }, app.params.photoBrowser); // Extend defaults with modules params\n\n    pb.useModulesParams(defaults);\n    pb.params = extend(defaults, params);\n    extend(pb, {\n      exposed: false,\n      opened: false,\n      activeIndex: pb.params.swiper.initialSlide,\n      url: pb.params.url,\n      swipeToClose: {\n        allow: true,\n        isTouched: false,\n        diff: undefined,\n        start: undefined,\n        current: undefined,\n        started: false,\n        activeSlide: undefined,\n        timeStart: undefined\n      }\n    }); // Install Modules\n\n    pb.useModules(); // Init\n\n    pb.init();\n  }\n\n  get view() {\n    const {\n      params,\n      app\n    } = this;\n    return params.view || app.views.main;\n  }\n\n  onSlideChange(swiper) {\n    const pb = this;\n    pb.activeIndex = swiper.activeIndex;\n    let current = swiper.activeIndex + 1;\n    let total = pb.params.virtualSlides ? pb.params.photos.length : swiper.slides.length;\n\n    if (swiper.params.loop) {\n      total -= 2;\n      current -= swiper.loopedSlides;\n      if (current < 1) current = total + current;\n      if (current > total) current -= total;\n    }\n\n    const $activeSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(`.swiper-slide[data-swiper-slide-index=\"${swiper.activeIndex}\"]`) : swiper.slides.eq(swiper.activeIndex);\n    const $previousSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(`.swiper-slide[data-swiper-slide-index=\"${swiper.previousIndex}\"]`) : swiper.slides.eq(swiper.previousIndex);\n    let $currentEl = pb.$el.find('.photo-browser-current');\n    let $totalEl = pb.$el.find('.photo-browser-total');\n    let navbarEl;\n\n    if (pb.params.type === 'page' && pb.params.navbar && $currentEl.length === 0 && pb.app.theme === 'ios') {\n      navbarEl = pb.app.navbar.getElByPage(pb.$el);\n\n      if (navbarEl) {\n        $currentEl = $(navbarEl).find('.photo-browser-current');\n        $totalEl = $(navbarEl).find('.photo-browser-total');\n      }\n    }\n\n    if ($currentEl.length && $totalEl.length) {\n      $currentEl.text(current);\n      $totalEl.text(total);\n      if (!navbarEl) navbarEl = $currentEl.parents('.navbar')[0];\n\n      if (navbarEl) {\n        pb.app.navbar.size(navbarEl);\n      }\n    } // Update captions\n\n\n    if (pb.captions.length > 0) {\n      const captionIndex = swiper.params.loop ? $activeSlideEl.attr('data-swiper-slide-index') : pb.activeIndex;\n      pb.$captionsContainerEl.find('.photo-browser-caption-active').removeClass('photo-browser-caption-active');\n      pb.$captionsContainerEl.find(`[data-caption-index=\"${captionIndex}\"]`).addClass('photo-browser-caption-active');\n    } // Stop Video\n\n\n    const previousSlideVideo = $previousSlideEl.find('video');\n\n    if (previousSlideVideo.length > 0) {\n      if ('pause' in previousSlideVideo[0]) previousSlideVideo[0].pause();\n    }\n  }\n\n  onTouchStart() {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.allow) return;\n    swipeToClose.isTouched = true;\n  }\n\n  onTouchMove(e) {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.isTouched) return;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = true;\n      swipeToClose.start = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (pb.params.virtualSlides) {\n        swipeToClose.activeSlide = pb.swiper.$wrapperEl.children('.swiper-slide-active');\n      } else {\n        swipeToClose.activeSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n      }\n\n      swipeToClose.timeStart = now();\n    }\n\n    e.preventDefault();\n    swipeToClose.current = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n    swipeToClose.diff = swipeToClose.start - swipeToClose.current;\n    pb.$el.transition(0).transform(`translate3d(0,${-swipeToClose.diff}px,0)`);\n  }\n\n  onTouchEnd() {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    swipeToClose.isTouched = false;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = false;\n      return;\n    }\n\n    swipeToClose.started = false;\n    swipeToClose.allow = false;\n    const diff = Math.abs(swipeToClose.diff);\n    const timeDiff = new Date().getTime() - swipeToClose.timeStart;\n\n    if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n      nextTick(() => {\n        if (pb.$el) {\n          if (swipeToClose.diff < 0) pb.$el.addClass('swipe-close-to-bottom');else pb.$el.addClass('swipe-close-to-top');\n        }\n\n        pb.emit('local::swipeToClose', pb);\n        pb.$el.transform('').transition('');\n        pb.close();\n        swipeToClose.allow = true;\n      });\n      return;\n    }\n\n    if (diff !== 0) {\n      pb.$el.addClass('photo-browser-transitioning').transitionEnd(() => {\n        swipeToClose.allow = true;\n        pb.$el.removeClass('photo-browser-transitioning');\n      });\n    } else {\n      swipeToClose.allow = true;\n    }\n\n    nextTick(() => {\n      pb.$el.transform('').transition('');\n    });\n  } // Render Functions\n\n\n  renderNavbar() {\n    const pb = this;\n    if (pb.params.renderNavbar) return pb.params.renderNavbar.call(pb);\n    let iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    const pageBackLinkText = (pb.app.theme === 'ios' || pb.app.theme === 'aurora') && pb.params.pageBackLinkText ? pb.params.pageBackLinkText : '';\n    const renderNavbarCount = typeof pb.params.navbarShowCount === 'undefined' ? pb.params.photos.length > 1 : pb.params.navbarShowCount;\n    const isPopup = pb.params.type !== 'page';\n    return $jsx(\"div\", {\n      class: `navbar navbar-photo-browser ${pb.params.theme === 'dark' ? 'navbar-photo-browser-dark' : ''}`\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner navbar-inner-centered-title sliding\"\n    }, !isPopup && $jsx(\"div\", {\n      class: \"left\"\n    }, $jsx(\"a\", {\n      class: `link ${!pageBackLinkText ? 'icon-only' : ''} back`\n    }, $jsx(\"i\", {\n      class: `icon icon-back ${iconsColor ? `color-${iconsColor}` : ''}`\n    }), pageBackLinkText && $jsx(\"span\", null, pageBackLinkText))), renderNavbarCount && $jsx(\"div\", {\n      class: \"title\"\n    }, $jsx(\"span\", {\n      class: \"photo-browser-current\"\n    }), $jsx(\"span\", {\n      class: \"photo-browser-of\"\n    }, pb.params.navbarOfText), $jsx(\"span\", {\n      class: \"photo-browser-total\"\n    })), isPopup && $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".photo-browser-popup\"\n    }, $jsx(\"span\", null, pb.params.popupCloseLinkText)))));\n  }\n\n  renderToolbar() {\n    const pb = this;\n    if (pb.params.renderToolbar) return pb.params.renderToolbar.call(pb);\n    let iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-bottom tabbar\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"a\", {\n      class: \"link photo-browser-prev\"\n    }, $jsx(\"i\", {\n      class: `icon icon-back ${iconsColor ? `color-${iconsColor}` : ''}`\n    })), $jsx(\"a\", {\n      class: \"link photo-browser-next\"\n    }, $jsx(\"i\", {\n      class: `icon icon-forward ${iconsColor ? `color-${iconsColor}` : ''}`\n    }))));\n  }\n\n  renderCaption(caption, index) {\n    const pb = this;\n    if (pb.params.renderCaption) return pb.params.renderCaption.call(pb, caption, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-caption\",\n      \"data-caption-index\": index\n    }, caption);\n  }\n\n  renderObject(photo, index) {\n    const pb = this;\n    if (pb.params.renderObject) return pb.params.renderObject.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-object-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, photo.html ? photo.html : photo);\n  }\n\n  renderLazyPhoto(photo, index) {\n    const pb = this;\n    if (pb.params.renderLazyPhoto) return pb.params.renderLazyPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-slide-lazy swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"div\", {\n      class: \"swiper-lazy-preloader\"\n    }), $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      \"data-src\": photo.url ? photo.url : photo,\n      class: \"swiper-lazy\"\n    })));\n  }\n\n  renderPhoto(photo, index) {\n    const pb = this;\n    if (pb.params.renderPhoto) return pb.params.renderPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      src: photo.url ? photo.url : photo\n    })));\n  }\n\n  render() {\n    const pb = this;\n    if (pb.params.render) return pb.params.render.call(pb, pb.params);\n    return $jsx(\"div\", {\n      class: `photo-browser photo-browser-${pb.params.theme}`\n    }, $jsx(\"div\", {\n      class: \"view\"\n    }, $jsx(\"div\", {\n      class: `page photo-browser-page photo-browser-page-${pb.params.theme} no-toolbar ${!pb.params.navbar ? 'no-navbar' : ''}`,\n      \"data-name\": \"photo-browser-page\"\n    }, pb.params.navbar && pb.renderNavbar(), pb.params.toolbar && pb.renderToolbar(), $jsx(\"div\", {\n      class: `photo-browser-captions photo-browser-captions-${pb.params.captionsTheme || pb.params.theme}`\n    }, pb.params.photos.map((photo, index) => {\n      if (photo.caption) return pb.renderCaption(photo.caption, index);\n      return '';\n    })), $jsx(\"div\", {\n      class: \"photo-browser-swiper-container swiper\"\n    }, $jsx(\"div\", {\n      class: \"photo-browser-swiper-wrapper swiper-wrapper\"\n    }, !pb.params.virtualSlides && pb.params.photos.map((photo, index) => {\n      if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n        return pb.renderObject(photo, index);\n      }\n\n      if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n        return pb.renderLazyPhoto(photo, index);\n      }\n\n      return pb.renderPhoto(photo, index);\n    }))))));\n  }\n\n  renderStandalone() {\n    const pb = this;\n    if (pb.params.renderStandalone) return pb.params.renderStandalone.call(pb);\n    const standaloneHtml = `<div class=\"popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen\">${pb.render()}</div>`;\n    return standaloneHtml;\n  }\n\n  renderPage() {\n    const pb = this;\n    if (pb.params.renderPage) return pb.params.renderPage.call(pb);\n    const pageHtml = pb.render();\n    return pageHtml;\n  }\n\n  renderPopup() {\n    const pb = this;\n    if (pb.params.renderPopup) return pb.params.renderPopup.call(pb);\n    const popupHtml = `<div class=\"popup photo-browser-popup\">${pb.render()}</div>`;\n    return popupHtml;\n  } // Callbacks\n\n\n  onOpen(type, el) {\n    const pb = this;\n    const app = pb.app;\n    const $el = $(el);\n    $el[0].f7PhotoBrowser = pb;\n    pb.$el = $el;\n    pb.el = $el[0];\n    pb.openedIn = type;\n    pb.opened = true;\n    pb.$swiperContainerEl = pb.$el.find('.photo-browser-swiper-container');\n    pb.$swiperWrapperEl = pb.$el.find('.photo-browser-swiper-wrapper');\n    pb.slides = pb.$el.find('.photo-browser-slide');\n    pb.$captionsContainerEl = pb.$el.find('.photo-browser-captions');\n    pb.captions = pb.$el.find('.photo-browser-caption'); // Init Swiper\n\n    let clickTimeout;\n    const swiperParams = extend({}, pb.params.swiper, {\n      initialSlide: pb.activeIndex,\n      cssMode: typeof pb.params.swiper.cssMode === 'undefined' && (app.device.ios || app.device.android) ? true : pb.params.swiper.cssMode,\n      on: {\n        click(e) {\n          clearTimeout(clickTimeout);\n\n          if (pb.params.exposition) {\n            clickTimeout = setTimeout(() => {\n              pb.expositionToggle();\n            }, 350);\n          }\n\n          pb.emit('local::tap', e);\n          pb.emit('local::click', e);\n        },\n\n        doubleClick(e) {\n          clearTimeout(clickTimeout);\n          pb.emit('local::doubleTap', e);\n          pb.emit('local::doubleClick', e);\n        },\n\n        slideChange() {\n          const swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          pb.emit('local::slideChange', ...args);\n        },\n\n        transitionStart() {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          pb.emit('local::transitionStart', ...args);\n        },\n\n        transitionEnd() {\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          pb.emit('local::transitionEnd', ...args);\n        },\n\n        slideChangeTransitionStart() {\n          const swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          pb.emit('local::slideChangeTransitionStart', ...args);\n        },\n\n        slideChangeTransitionEnd() {\n          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n          }\n\n          pb.emit('local::slideChangeTransitionEnd', ...args);\n        },\n\n        lazyImageLoad() {\n          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n          }\n\n          pb.emit('local::lazyImageLoad', ...args);\n        },\n\n        lazyImageReady() {\n          for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n            args[_key7] = arguments[_key7];\n          }\n\n          const slideEl = args[0];\n          $(slideEl).removeClass('photo-browser-slide-lazy');\n          pb.emit('local::lazyImageReady', ...args);\n        }\n\n      }\n    });\n\n    if (pb.params.swipeToClose && pb.params.type !== 'page') {\n      extend(swiperParams.on, {\n        touchStart(swiper, e) {\n          pb.onTouchStart(e);\n          pb.emit('local::touchStart', e);\n        },\n\n        touchMoveOpposite(swiper, e) {\n          pb.onTouchMove(e);\n          pb.emit('local::touchMoveOpposite', e);\n        },\n\n        touchEnd(swiper, e) {\n          pb.onTouchEnd(e);\n          pb.emit('local::touchEnd', e);\n        }\n\n      });\n    }\n\n    if (pb.params.virtualSlides) {\n      extend(swiperParams, {\n        virtual: {\n          slides: pb.params.photos,\n\n          renderSlide(photo, index) {\n            if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n              return pb.renderObject(photo, index);\n            }\n\n            if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n              return pb.renderLazyPhoto(photo, index);\n            }\n\n            return pb.renderPhoto(photo, index);\n          }\n\n        }\n      });\n    }\n\n    const window = getWindow();\n    pb.swiper = app.swiper ? app.swiper.create(pb.$swiperContainerEl, swiperParams) : new window.Swiper(pb.$swiperContainerEl, swiperParams);\n\n    if (pb.activeIndex === 0) {\n      pb.onSlideChange(pb.swiper);\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:open');\n    }\n\n    pb.emit('local::open photoBrowserOpen', pb);\n  }\n\n  onOpened() {\n    const pb = this;\n\n    if (pb.$el && pb.params.type === 'standalone') {\n      pb.$el.css('animation', 'none');\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:opened');\n    }\n\n    pb.emit('local::opened photoBrowserOpened', pb);\n  }\n\n  onClose() {\n    const pb = this;\n    if (pb.destroyed) return; // Destroy Swiper\n\n    if (pb.swiper && pb.swiper.destroy) {\n      pb.swiper.destroy(true, false);\n      pb.swiper = null;\n      delete pb.swiper;\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:close');\n    }\n\n    pb.emit('local::close photoBrowserClose', pb);\n  }\n\n  onClosed() {\n    const pb = this;\n    if (pb.destroyed) return;\n    pb.opened = false;\n    pb.$el = null;\n    pb.el = null;\n    delete pb.$el;\n    delete pb.el;\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:closed');\n    }\n\n    pb.emit('local::closed photoBrowserClosed', pb);\n  } // Open\n\n\n  openPage() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const pageHtml = pb.renderPage();\n    pb.view.router.navigate({\n      url: pb.url,\n      route: {\n        content: pageHtml,\n        path: pb.url,\n        on: {\n          pageBeforeIn(e, page) {\n            pb.view.$el.addClass(`with-photo-browser-page with-photo-browser-page-${pb.params.theme}`);\n            pb.onOpen('page', page.el);\n          },\n\n          pageAfterIn(e, page) {\n            pb.onOpened('page', page.el);\n          },\n\n          pageBeforeOut(e, page) {\n            pb.view.$el.removeClass(`with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-${pb.params.theme}`);\n            pb.onClose('page', page.el);\n          },\n\n          pageAfterOut(e, page) {\n            pb.onClosed('page', page.el);\n          }\n\n        }\n      }\n    });\n    return pb;\n  }\n\n  openStandalone() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const standaloneHtml = pb.renderStandalone();\n    const popupParams = {\n      backdrop: false,\n      content: standaloneHtml,\n      on: {\n        popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n\n        popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n\n        popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n\n        popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  }\n\n  openPopup() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const popupHtml = pb.renderPopup();\n    const popupParams = {\n      content: popupHtml,\n      push: pb.params.popupPush,\n      on: {\n        popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n\n        popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n\n        popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n\n        popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  } // Exposition\n\n\n  expositionEnable() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.addClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.addClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.addClass('photo-browser-captions-exposed');\n    pb.exposed = true;\n    return pb;\n  }\n\n  expositionDisable() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.removeClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.removeClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.removeClass('photo-browser-captions-exposed');\n    pb.exposed = false;\n    return pb;\n  }\n\n  expositionToggle() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.toggleClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.toggleClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.toggleClass('photo-browser-captions-exposed');\n    pb.exposed = !pb.exposed;\n    return pb;\n  }\n\n  open(index) {\n    const pb = this;\n    const type = pb.params.type;\n\n    if (pb.opened) {\n      if (pb.swiper && typeof index !== 'undefined') {\n        pb.swiper.slideTo(parseInt(index, 10));\n      }\n\n      return pb;\n    }\n\n    if (typeof index !== 'undefined') {\n      pb.activeIndex = index;\n    }\n\n    if (type === 'standalone') {\n      pb.openStandalone();\n    }\n\n    if (type === 'page') {\n      pb.openPage();\n    }\n\n    if (type === 'popup') {\n      pb.openPopup();\n    }\n\n    return pb;\n  }\n\n  close() {\n    const pb = this;\n    if (!pb.opened) return pb;\n\n    if (pb.params.routableModals && pb.view || pb.openedIn === 'page') {\n      pb.view.router.back();\n    } else {\n      pb.modal.once('modalClosed', () => {\n        nextTick(() => {\n          if (pb.destroyed) return;\n          pb.modal.destroy();\n          delete pb.modal;\n        });\n      });\n      pb.modal.close();\n    }\n\n    return pb;\n  } // eslint-disable-next-line\n\n\n  init() {}\n\n  destroy() {\n    let pb = this;\n    pb.emit('local::beforeDestroy photoBrowserBeforeDestroy', pb);\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:beforedestroy');\n      pb.$el[0].f7PhotoBrowser = null;\n      delete pb.$el[0].f7PhotoBrowser;\n    }\n\n    deleteProps(pb);\n    pb.destroyed = true;\n    pb = null;\n  }\n\n}\n\nexport default PhotoBrowser;"],"mappings":"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"},"metadata":{},"sourceType":"module"}