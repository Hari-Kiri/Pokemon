{"ast":null,"code":"import _createClass from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _possibleConstructorReturn from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _assertThisInitialized from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, now, nextTick } from '../../shared/utils.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport Modal from '../modal/modal-class.js';\n\nvar Popup = /*#__PURE__*/function (_Modal) {\n  _inherits(Popup, _Modal);\n\n  var _super = _createSuper(Popup);\n\n  function Popup(app, params) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    var extendedParams = extend({\n      on: {}\n    }, app.params.popup, params); // Extends with open/close Modal methods;\n\n    _this = _super.call(this, app, extendedParams);\n\n    var popup = _assertThisInitialized(_this);\n\n    var window = getWindow();\n    var document = getDocument();\n    var support = getSupport();\n    var device = getDevice();\n    popup.params = extendedParams; // Find Element\n\n    var $el;\n\n    if (!popup.params.el) {\n      $el = $(popup.params.content).filter(function (node) {\n        return node.nodeType === 1;\n      }).eq(0);\n    } else {\n      $el = $(popup.params.el).eq(0);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return _possibleConstructorReturn(_this, $el[0].f7Modal);\n    }\n\n    if ($el.length === 0) {\n      return _possibleConstructorReturn(_this, popup.destroy());\n    }\n\n    var $backdropEl;\n\n    if (popup.params.backdrop && popup.params.backdropEl) {\n      $backdropEl = $(popup.params.backdropEl);\n    } else if (popup.params.backdrop) {\n      if (popup.params.backdropUnique) {\n        $backdropEl = $('<div class=\"popup-backdrop popup-backdrop-unique\"></div>');\n        popup.$containerEl.append($backdropEl);\n      } else {\n        $backdropEl = popup.$containerEl.children('.popup-backdrop');\n      }\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"popup-backdrop\"></div>');\n        popup.$containerEl.append($backdropEl);\n      }\n    }\n\n    extend(popup, {\n      app: app,\n      push: $el.hasClass('popup-push') || popup.params.push,\n      $el: $el,\n      el: $el[0],\n      $backdropEl: $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'popup',\n      $htmlEl: $('html')\n    });\n\n    if (popup.params.push) {\n      $el.addClass('popup-push');\n    }\n\n    function handleClick(e) {\n      var target = e.target;\n      var $target = $(target);\n      var keyboardOpened = !device.desktop && device.cordova && (window.Keyboard && window.Keyboard.isVisible || window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.isVisible);\n      if (keyboardOpened) return;\n\n      if ($target.closest(popup.el).length === 0) {\n        if (popup.params && popup.params.closeByBackdropClick && popup.params.backdrop && popup.backdropEl && popup.backdropEl === target) {\n          var needToClose = true;\n          popup.$el.nextAll('.popup.modal-in').each(function (popupEl) {\n            var popupInstance = popupEl.f7Modal;\n            if (!popupInstance) return;\n\n            if (popupInstance.params.closeByBackdropClick && popupInstance.params.backdrop && popupInstance.backdropEl === popup.backdropEl) {\n              needToClose = false;\n            }\n          });\n\n          if (needToClose) {\n            popup.close();\n          }\n        }\n      }\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === 27 && popup.params.closeOnEscape) {\n        popup.close();\n      }\n    }\n\n    var pushOffset;\n    var isPush;\n\n    function pushViewScale(offset) {\n      return (app.height - offset * 2) / app.height;\n    }\n\n    var allowSwipeToClose = true;\n    var isTouched = false;\n    var startTouch;\n    var currentTouch;\n    var isScrolling;\n    var touchStartTime;\n    var touchesDiff;\n    var isMoved = false;\n    var pageContentEl;\n    var pageContentScrollTop;\n    var pageContentOffsetHeight;\n    var pageContentScrollHeight;\n    var popupHeight;\n    var $pushEl;\n\n    function handleTouchStart(e) {\n      if (isTouched || !allowSwipeToClose || !popup.params.swipeToClose) return;\n\n      if (popup.params.swipeHandler && $(e.target).closest(popup.params.swipeHandler).length === 0) {\n        return;\n      }\n\n      isTouched = true;\n      isMoved = false;\n      startTouch = {\n        x: e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY\n      };\n      touchStartTime = now();\n      isScrolling = undefined;\n\n      if (!popup.params.swipeHandler && e.type === 'touchstart') {\n        pageContentEl = $(e.target).closest('.page-content')[0];\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      currentTouch = {\n        x: e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY\n      };\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(currentTouch.x - startTouch.x) > Math.abs(currentTouch.y - startTouch.y));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      touchesDiff = startTouch.y - currentTouch.y;\n\n      if (isPush && pushOffset && touchesDiff > 0) {\n        touchesDiff = 0;\n      }\n\n      var direction = touchesDiff < 0 ? 'to-bottom' : 'to-top';\n      $el.transition(0);\n\n      if (typeof popup.params.swipeToClose === 'string' && direction !== popup.params.swipeToClose) {\n        $el.transform('');\n        $el.transition('');\n        return;\n      }\n\n      if (!isMoved) {\n        if (isPush && pushOffset) {\n          popupHeight = $el[0].offsetHeight;\n          $pushEl = $el.prevAll('.popup.modal-in').eq(0);\n\n          if ($pushEl.length === 0) {\n            $pushEl = app.$el.children('.view, .views');\n          }\n        }\n\n        if (pageContentEl) {\n          pageContentScrollTop = pageContentEl.scrollTop;\n          pageContentScrollHeight = pageContentEl.scrollHeight;\n          pageContentOffsetHeight = pageContentEl.offsetHeight;\n\n          if (!(pageContentScrollHeight === pageContentOffsetHeight) && !(direction === 'to-bottom' && pageContentScrollTop === 0) && !(direction === 'to-top' && pageContentScrollTop === pageContentScrollHeight - pageContentOffsetHeight)) {\n            $el.transform('');\n            $el.transition('');\n            isTouched = false;\n            isMoved = false;\n            return;\n          }\n        }\n\n        isMoved = true;\n        popup.emit('local::swipeStart popupSwipeStart', popup);\n        popup.$el.trigger('popup:swipestart');\n      } else {\n        popup.emit('local::swipeMove popupSwipeMove', popup);\n        popup.$el.trigger('popup:swipemove');\n      }\n\n      e.preventDefault();\n\n      if (isPush && pushOffset) {\n        var pushProgress = 1 - Math.abs(touchesDiff / popupHeight);\n        var scale = 1 - (1 - pushViewScale(pushOffset)) * pushProgress;\n\n        if ($pushEl.hasClass('popup')) {\n          if ($pushEl.hasClass('popup-push')) {\n            $pushEl.transition(0).forEach(function (el) {\n              el.style.setProperty('transform', \"translate3d(0, calc(-1 * \".concat(pushProgress, \" * (var(--f7-popup-push-offset) + 10px)) , 0px) scale(\").concat(scale, \")\"), 'important');\n            });\n          } else {\n            $pushEl.transition(0).forEach(function (el) {\n              el.style.setProperty('transform', \"translate3d(0, 0px , 0px) scale(\".concat(scale, \")\"), 'important');\n            });\n          }\n        } else {\n          $pushEl.transition(0).forEach(function (el) {\n            el.style.setProperty('transform', \"translate3d(0,0,0) scale(\".concat(scale, \")\"), 'important');\n          });\n        }\n      }\n\n      $el.transition(0).transform(\"translate3d(0,\".concat(-touchesDiff, \"px,0)\"));\n    }\n\n    function handleTouchEnd() {\n      isTouched = false;\n\n      if (!isMoved) {\n        return;\n      }\n\n      popup.emit('local::swipeEnd popupSwipeEnd', popup);\n      popup.$el.trigger('popup:swipeend');\n      isMoved = false;\n      allowSwipeToClose = false;\n      $el.transition('');\n\n      if (isPush && pushOffset) {\n        $pushEl.transition('').transform('');\n      }\n\n      var direction = touchesDiff <= 0 ? 'to-bottom' : 'to-top';\n\n      if (typeof popup.params.swipeToClose === 'string' && direction !== popup.params.swipeToClose) {\n        $el.transform('');\n        allowSwipeToClose = true;\n        return;\n      }\n\n      var diff = Math.abs(touchesDiff);\n      var timeDiff = new Date().getTime() - touchStartTime;\n\n      if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n        nextTick(function () {\n          if (direction === 'to-bottom') {\n            $el.addClass('swipe-close-to-bottom');\n          } else {\n            $el.addClass('swipe-close-to-top');\n          }\n\n          $el.transform('');\n          popup.emit('local::swipeclose popupSwipeClose', popup);\n          popup.$el.trigger('popup:swipeclose');\n          popup.close();\n          allowSwipeToClose = true;\n        });\n        return;\n      }\n\n      allowSwipeToClose = true;\n      $el.transform('');\n    }\n\n    var passive = support.passiveListener ? {\n      passive: true\n    } : false;\n\n    if (popup.params.swipeToClose) {\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      popup.once('popupDestroy', function () {\n        $el.off(app.touchEvents.start, handleTouchStart, passive);\n        app.off('touchmove', handleTouchMove);\n        app.off('touchend:passive', handleTouchEnd);\n      });\n    }\n\n    var hasPreviousPushPopup;\n\n    var updatePushOffset = function updatePushOffset() {\n      var wasPush = isPush;\n\n      if (popup.push) {\n        isPush = popup.push && (app.width < 630 || app.height < 630 || $el.hasClass('popup-tablet-fullscreen'));\n      }\n\n      if (isPush && !wasPush) {\n        // eslint-disable-next-line\n        setPushOffset();\n      } else if (isPush && wasPush) {\n        popup.$htmlEl[0].style.setProperty('--f7-popup-push-scale', pushViewScale(pushOffset));\n      } else if (!isPush && wasPush) {\n        popup.$htmlEl.removeClass('with-modal-popup-push');\n        popup.$htmlEl[0].style.removeProperty('--f7-popup-push-scale');\n      }\n    };\n\n    var setPushOffset = function setPushOffset() {\n      app.off('resize', updatePushOffset);\n\n      if (popup.push) {\n        isPush = popup.push && (app.width < 630 || app.height < 630 || $el.hasClass('popup-tablet-fullscreen'));\n      }\n\n      if (isPush) {\n        pushOffset = parseInt($el.css('--f7-popup-push-offset'), 10);\n        if (Number.isNaN(pushOffset)) pushOffset = 0;\n\n        if (pushOffset) {\n          $el.addClass('popup-push');\n          popup.$htmlEl.addClass('with-modal-popup-push');\n          popup.$htmlEl[0].style.setProperty('--f7-popup-push-scale', pushViewScale(pushOffset));\n        }\n      }\n\n      app.on('resize', updatePushOffset);\n    };\n\n    popup.on('open', function () {\n      hasPreviousPushPopup = false;\n\n      if (popup.params.closeOnEscape) {\n        $(document).on('keydown', onKeyDown);\n      }\n\n      $el.prevAll('.popup.modal-in').addClass('popup-behind');\n      setPushOffset();\n    });\n    popup.on('opened', function () {\n      $el.removeClass('swipe-close-to-bottom swipe-close-to-top');\n\n      if (popup.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    popup.on('close', function () {\n      hasPreviousPushPopup = popup.$el.prevAll('.popup-push.modal-in').length > 0;\n\n      if (popup.params.closeOnEscape) {\n        $(document).off('keydown', onKeyDown);\n      }\n\n      if (popup.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n\n      $el.prevAll('.popup.modal-in').eq(0).removeClass('popup-behind');\n\n      if (isPush && pushOffset && !hasPreviousPushPopup) {\n        popup.$htmlEl.removeClass('with-modal-popup-push');\n        popup.$htmlEl.addClass('with-modal-popup-push-closing');\n      }\n\n      app.off('resize', updatePushOffset);\n    });\n    popup.on('closed', function () {\n      $el.removeClass('popup-behind');\n\n      if (isPush && pushOffset && !hasPreviousPushPopup) {\n        popup.$htmlEl.removeClass('with-modal-popup-push-closing');\n        popup.$htmlEl[0].style.removeProperty('--f7-popup-push-scale');\n      }\n    });\n    $el[0].f7Modal = popup;\n    return _possibleConstructorReturn(_this, popup);\n  }\n\n  return _createClass(Popup);\n}(Modal);\n\nexport default Popup;","map":{"version":3,"names":["getWindow","getDocument","$","extend","now","nextTick","getSupport","getDevice","Modal","Popup","app","params","extendedParams","on","popup","window","document","support","device","$el","el","content","filter","node","nodeType","eq","length","f7Modal","destroy","$backdropEl","backdrop","backdropEl","backdropUnique","$containerEl","append","children","push","hasClass","type","$htmlEl","addClass","handleClick","e","target","$target","keyboardOpened","desktop","cordova","Keyboard","isVisible","plugins","closest","closeByBackdropClick","needToClose","nextAll","each","popupEl","popupInstance","close","onKeyDown","keyCode","closeOnEscape","pushOffset","isPush","pushViewScale","offset","height","allowSwipeToClose","isTouched","startTouch","currentTouch","isScrolling","touchStartTime","touchesDiff","isMoved","pageContentEl","pageContentScrollTop","pageContentOffsetHeight","pageContentScrollHeight","popupHeight","$pushEl","handleTouchStart","swipeToClose","swipeHandler","x","targetTouches","pageX","y","pageY","undefined","handleTouchMove","Math","abs","direction","transition","transform","offsetHeight","prevAll","scrollTop","scrollHeight","emit","trigger","preventDefault","pushProgress","scale","forEach","style","setProperty","handleTouchEnd","diff","timeDiff","Date","getTime","passive","passiveListener","touchEvents","start","once","off","hasPreviousPushPopup","updatePushOffset","wasPush","width","setPushOffset","removeClass","removeProperty","parseInt","css","Number","isNaN"],"sources":["/root/Pokemon/ui/node_modules/framework7/components/popup/popup-class.js"],"sourcesContent":["import { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, now, nextTick } from '../../shared/utils.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport Modal from '../modal/modal-class.js';\n\nclass Popup extends Modal {\n  constructor(app, params) {\n    const extendedParams = extend({\n      on: {}\n    }, app.params.popup, params); // Extends with open/close Modal methods;\n\n    super(app, extendedParams);\n    const popup = this;\n    const window = getWindow();\n    const document = getDocument();\n    const support = getSupport();\n    const device = getDevice();\n    popup.params = extendedParams; // Find Element\n\n    let $el;\n\n    if (!popup.params.el) {\n      $el = $(popup.params.content).filter(node => node.nodeType === 1).eq(0);\n    } else {\n      $el = $(popup.params.el).eq(0);\n    }\n\n    if ($el && $el.length > 0 && $el[0].f7Modal) {\n      return $el[0].f7Modal;\n    }\n\n    if ($el.length === 0) {\n      return popup.destroy();\n    }\n\n    let $backdropEl;\n\n    if (popup.params.backdrop && popup.params.backdropEl) {\n      $backdropEl = $(popup.params.backdropEl);\n    } else if (popup.params.backdrop) {\n      if (popup.params.backdropUnique) {\n        $backdropEl = $('<div class=\"popup-backdrop popup-backdrop-unique\"></div>');\n        popup.$containerEl.append($backdropEl);\n      } else {\n        $backdropEl = popup.$containerEl.children('.popup-backdrop');\n      }\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"popup-backdrop\"></div>');\n        popup.$containerEl.append($backdropEl);\n      }\n    }\n\n    extend(popup, {\n      app,\n      push: $el.hasClass('popup-push') || popup.params.push,\n      $el,\n      el: $el[0],\n      $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      type: 'popup',\n      $htmlEl: $('html')\n    });\n\n    if (popup.params.push) {\n      $el.addClass('popup-push');\n    }\n\n    function handleClick(e) {\n      const target = e.target;\n      const $target = $(target);\n      const keyboardOpened = !device.desktop && device.cordova && (window.Keyboard && window.Keyboard.isVisible || window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.isVisible);\n      if (keyboardOpened) return;\n\n      if ($target.closest(popup.el).length === 0) {\n        if (popup.params && popup.params.closeByBackdropClick && popup.params.backdrop && popup.backdropEl && popup.backdropEl === target) {\n          let needToClose = true;\n          popup.$el.nextAll('.popup.modal-in').each(popupEl => {\n            const popupInstance = popupEl.f7Modal;\n            if (!popupInstance) return;\n\n            if (popupInstance.params.closeByBackdropClick && popupInstance.params.backdrop && popupInstance.backdropEl === popup.backdropEl) {\n              needToClose = false;\n            }\n          });\n\n          if (needToClose) {\n            popup.close();\n          }\n        }\n      }\n    }\n\n    function onKeyDown(e) {\n      const keyCode = e.keyCode;\n\n      if (keyCode === 27 && popup.params.closeOnEscape) {\n        popup.close();\n      }\n    }\n\n    let pushOffset;\n    let isPush;\n\n    function pushViewScale(offset) {\n      return (app.height - offset * 2) / app.height;\n    }\n\n    let allowSwipeToClose = true;\n    let isTouched = false;\n    let startTouch;\n    let currentTouch;\n    let isScrolling;\n    let touchStartTime;\n    let touchesDiff;\n    let isMoved = false;\n    let pageContentEl;\n    let pageContentScrollTop;\n    let pageContentOffsetHeight;\n    let pageContentScrollHeight;\n    let popupHeight;\n    let $pushEl;\n\n    function handleTouchStart(e) {\n      if (isTouched || !allowSwipeToClose || !popup.params.swipeToClose) return;\n\n      if (popup.params.swipeHandler && $(e.target).closest(popup.params.swipeHandler).length === 0) {\n        return;\n      }\n\n      isTouched = true;\n      isMoved = false;\n      startTouch = {\n        x: e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY\n      };\n      touchStartTime = now();\n      isScrolling = undefined;\n\n      if (!popup.params.swipeHandler && e.type === 'touchstart') {\n        pageContentEl = $(e.target).closest('.page-content')[0];\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      currentTouch = {\n        x: e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX,\n        y: e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY\n      };\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(currentTouch.x - startTouch.x) > Math.abs(currentTouch.y - startTouch.y));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      touchesDiff = startTouch.y - currentTouch.y;\n\n      if (isPush && pushOffset && touchesDiff > 0) {\n        touchesDiff = 0;\n      }\n\n      const direction = touchesDiff < 0 ? 'to-bottom' : 'to-top';\n      $el.transition(0);\n\n      if (typeof popup.params.swipeToClose === 'string' && direction !== popup.params.swipeToClose) {\n        $el.transform('');\n        $el.transition('');\n        return;\n      }\n\n      if (!isMoved) {\n        if (isPush && pushOffset) {\n          popupHeight = $el[0].offsetHeight;\n          $pushEl = $el.prevAll('.popup.modal-in').eq(0);\n\n          if ($pushEl.length === 0) {\n            $pushEl = app.$el.children('.view, .views');\n          }\n        }\n\n        if (pageContentEl) {\n          pageContentScrollTop = pageContentEl.scrollTop;\n          pageContentScrollHeight = pageContentEl.scrollHeight;\n          pageContentOffsetHeight = pageContentEl.offsetHeight;\n\n          if (!(pageContentScrollHeight === pageContentOffsetHeight) && !(direction === 'to-bottom' && pageContentScrollTop === 0) && !(direction === 'to-top' && pageContentScrollTop === pageContentScrollHeight - pageContentOffsetHeight)) {\n            $el.transform('');\n            $el.transition('');\n            isTouched = false;\n            isMoved = false;\n            return;\n          }\n        }\n\n        isMoved = true;\n        popup.emit('local::swipeStart popupSwipeStart', popup);\n        popup.$el.trigger('popup:swipestart');\n      } else {\n        popup.emit('local::swipeMove popupSwipeMove', popup);\n        popup.$el.trigger('popup:swipemove');\n      }\n\n      e.preventDefault();\n\n      if (isPush && pushOffset) {\n        const pushProgress = 1 - Math.abs(touchesDiff / popupHeight);\n        const scale = 1 - (1 - pushViewScale(pushOffset)) * pushProgress;\n\n        if ($pushEl.hasClass('popup')) {\n          if ($pushEl.hasClass('popup-push')) {\n            $pushEl.transition(0).forEach(el => {\n              el.style.setProperty('transform', `translate3d(0, calc(-1 * ${pushProgress} * (var(--f7-popup-push-offset) + 10px)) , 0px) scale(${scale})`, 'important');\n            });\n          } else {\n            $pushEl.transition(0).forEach(el => {\n              el.style.setProperty('transform', `translate3d(0, 0px , 0px) scale(${scale})`, 'important');\n            });\n          }\n        } else {\n          $pushEl.transition(0).forEach(el => {\n            el.style.setProperty('transform', `translate3d(0,0,0) scale(${scale})`, 'important');\n          });\n        }\n      }\n\n      $el.transition(0).transform(`translate3d(0,${-touchesDiff}px,0)`);\n    }\n\n    function handleTouchEnd() {\n      isTouched = false;\n\n      if (!isMoved) {\n        return;\n      }\n\n      popup.emit('local::swipeEnd popupSwipeEnd', popup);\n      popup.$el.trigger('popup:swipeend');\n      isMoved = false;\n      allowSwipeToClose = false;\n      $el.transition('');\n\n      if (isPush && pushOffset) {\n        $pushEl.transition('').transform('');\n      }\n\n      const direction = touchesDiff <= 0 ? 'to-bottom' : 'to-top';\n\n      if (typeof popup.params.swipeToClose === 'string' && direction !== popup.params.swipeToClose) {\n        $el.transform('');\n        allowSwipeToClose = true;\n        return;\n      }\n\n      const diff = Math.abs(touchesDiff);\n      const timeDiff = new Date().getTime() - touchStartTime;\n\n      if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n        nextTick(() => {\n          if (direction === 'to-bottom') {\n            $el.addClass('swipe-close-to-bottom');\n          } else {\n            $el.addClass('swipe-close-to-top');\n          }\n\n          $el.transform('');\n          popup.emit('local::swipeclose popupSwipeClose', popup);\n          popup.$el.trigger('popup:swipeclose');\n          popup.close();\n          allowSwipeToClose = true;\n        });\n        return;\n      }\n\n      allowSwipeToClose = true;\n      $el.transform('');\n    }\n\n    const passive = support.passiveListener ? {\n      passive: true\n    } : false;\n\n    if (popup.params.swipeToClose) {\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      popup.once('popupDestroy', () => {\n        $el.off(app.touchEvents.start, handleTouchStart, passive);\n        app.off('touchmove', handleTouchMove);\n        app.off('touchend:passive', handleTouchEnd);\n      });\n    }\n\n    let hasPreviousPushPopup;\n\n    const updatePushOffset = () => {\n      const wasPush = isPush;\n\n      if (popup.push) {\n        isPush = popup.push && (app.width < 630 || app.height < 630 || $el.hasClass('popup-tablet-fullscreen'));\n      }\n\n      if (isPush && !wasPush) {\n        // eslint-disable-next-line\n        setPushOffset();\n      } else if (isPush && wasPush) {\n        popup.$htmlEl[0].style.setProperty('--f7-popup-push-scale', pushViewScale(pushOffset));\n      } else if (!isPush && wasPush) {\n        popup.$htmlEl.removeClass('with-modal-popup-push');\n        popup.$htmlEl[0].style.removeProperty('--f7-popup-push-scale');\n      }\n    };\n\n    const setPushOffset = () => {\n      app.off('resize', updatePushOffset);\n\n      if (popup.push) {\n        isPush = popup.push && (app.width < 630 || app.height < 630 || $el.hasClass('popup-tablet-fullscreen'));\n      }\n\n      if (isPush) {\n        pushOffset = parseInt($el.css('--f7-popup-push-offset'), 10);\n        if (Number.isNaN(pushOffset)) pushOffset = 0;\n\n        if (pushOffset) {\n          $el.addClass('popup-push');\n          popup.$htmlEl.addClass('with-modal-popup-push');\n          popup.$htmlEl[0].style.setProperty('--f7-popup-push-scale', pushViewScale(pushOffset));\n        }\n      }\n\n      app.on('resize', updatePushOffset);\n    };\n\n    popup.on('open', () => {\n      hasPreviousPushPopup = false;\n\n      if (popup.params.closeOnEscape) {\n        $(document).on('keydown', onKeyDown);\n      }\n\n      $el.prevAll('.popup.modal-in').addClass('popup-behind');\n      setPushOffset();\n    });\n    popup.on('opened', () => {\n      $el.removeClass('swipe-close-to-bottom swipe-close-to-top');\n\n      if (popup.params.closeByBackdropClick) {\n        app.on('click', handleClick);\n      }\n    });\n    popup.on('close', () => {\n      hasPreviousPushPopup = popup.$el.prevAll('.popup-push.modal-in').length > 0;\n\n      if (popup.params.closeOnEscape) {\n        $(document).off('keydown', onKeyDown);\n      }\n\n      if (popup.params.closeByBackdropClick) {\n        app.off('click', handleClick);\n      }\n\n      $el.prevAll('.popup.modal-in').eq(0).removeClass('popup-behind');\n\n      if (isPush && pushOffset && !hasPreviousPushPopup) {\n        popup.$htmlEl.removeClass('with-modal-popup-push');\n        popup.$htmlEl.addClass('with-modal-popup-push-closing');\n      }\n\n      app.off('resize', updatePushOffset);\n    });\n    popup.on('closed', () => {\n      $el.removeClass('popup-behind');\n\n      if (isPush && pushOffset && !hasPreviousPushPopup) {\n        popup.$htmlEl.removeClass('with-modal-popup-push-closing');\n        popup.$htmlEl[0].style.removeProperty('--f7-popup-push-scale');\n      }\n    });\n    $el[0].f7Modal = popup;\n    return popup;\n  }\n\n}\n\nexport default Popup;"],"mappings":"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"},"metadata":{},"sourceType":"module"}