{"ast":null,"code":"import _defineProperty from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classCallCheck from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _possibleConstructorReturn from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _assertThisInitialized from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/root/Pokemon/ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport $ from '../../shared/dom7.js';\nimport { extend, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport { getSupport } from '../../shared/get-support.js';\n\nvar Range = /*#__PURE__*/function (_Framework7Class) {\n  _inherits(Range, _Framework7Class);\n\n  var _super = _createSuper(Range);\n\n  function Range(app, params) {\n    var _this;\n\n    _classCallCheck(this, Range);\n\n    _this = _super.call(this, params, [app]);\n\n    var range = _assertThisInitialized(_this);\n\n    var support = getSupport();\n    var defaults = {\n      el: null,\n      inputEl: null,\n      dual: false,\n      step: 1,\n      label: false,\n      min: 0,\n      max: 100,\n      value: 0,\n      draggableBar: true,\n      vertical: false,\n      verticalReversed: false,\n      formatLabel: null,\n      scale: false,\n      scaleSteps: 5,\n      scaleSubSteps: 0,\n      formatScaleLabel: null,\n      limitKnobPosition: app.theme === 'ios'\n    }; // Extend defaults with modules params\n\n    range.useModulesParams(defaults);\n    range.params = extend(defaults, params);\n    var el = range.params.el;\n    if (!el) return _possibleConstructorReturn(_this, range);\n    var $el = $(el);\n    if ($el.length === 0) return _possibleConstructorReturn(_this, range);\n    if ($el[0].f7Range) return _possibleConstructorReturn(_this, $el[0].f7Range);\n    var dataset = $el.dataset();\n    'step min max value scaleSteps scaleSubSteps'.split(' ').forEach(function (paramName) {\n      if (typeof params[paramName] === 'undefined' && typeof dataset[paramName] !== 'undefined') {\n        range.params[paramName] = parseFloat(dataset[paramName]);\n      }\n    });\n    'dual label vertical verticalReversed scale'.split(' ').forEach(function (paramName) {\n      if (typeof params[paramName] === 'undefined' && typeof dataset[paramName] !== 'undefined') {\n        range.params[paramName] = dataset[paramName];\n      }\n    });\n\n    if (!range.params.value) {\n      if (typeof dataset.value !== 'undefined') range.params.value = dataset.value;\n\n      if (typeof dataset.valueLeft !== 'undefined' && typeof dataset.valueRight !== 'undefined') {\n        range.params.value = [parseFloat(dataset.valueLeft), parseFloat(dataset.valueRight)];\n      }\n    }\n\n    var $inputEl;\n\n    if (!range.params.dual) {\n      if (range.params.inputEl) {\n        $inputEl = $(range.params.inputEl);\n      } else if ($el.find('input[type=\"range\"]').length) {\n        $inputEl = $el.find('input[type=\"range\"]').eq(0);\n      }\n    }\n\n    var _range$params = range.params,\n        dual = _range$params.dual,\n        step = _range$params.step,\n        label = _range$params.label,\n        min = _range$params.min,\n        max = _range$params.max,\n        value = _range$params.value,\n        vertical = _range$params.vertical,\n        verticalReversed = _range$params.verticalReversed,\n        scale = _range$params.scale,\n        scaleSteps = _range$params.scaleSteps,\n        scaleSubSteps = _range$params.scaleSubSteps,\n        limitKnobPosition = _range$params.limitKnobPosition;\n    extend(range, {\n      app: app,\n      $el: $el,\n      el: $el[0],\n      $inputEl: $inputEl,\n      inputEl: $inputEl ? $inputEl[0] : undefined,\n      dual: dual,\n      step: step,\n      label: label,\n      min: min,\n      max: max,\n      value: value,\n      previousValue: value,\n      vertical: vertical,\n      verticalReversed: verticalReversed,\n      scale: scale,\n      scaleSteps: scaleSteps,\n      scaleSubSteps: scaleSubSteps,\n      limitKnobPosition: limitKnobPosition\n    });\n\n    if ($inputEl) {\n      'step min max'.split(' ').forEach(function (paramName) {\n        if (!params[paramName] && $inputEl.attr(paramName)) {\n          range.params[paramName] = parseFloat($inputEl.attr(paramName));\n          range[paramName] = parseFloat($inputEl.attr(paramName));\n        }\n      });\n\n      if (typeof $inputEl.val() !== 'undefined') {\n        range.params.value = parseFloat($inputEl.val());\n        range.value = parseFloat($inputEl.val());\n      }\n    } // Dual\n\n\n    if (range.dual) {\n      $el.addClass('range-slider-dual');\n    }\n\n    if (range.label) {\n      $el.addClass('range-slider-label');\n    } // Vertical\n\n\n    if (range.vertical) {\n      $el.addClass('range-slider-vertical');\n\n      if (range.verticalReversed) {\n        $el.addClass('range-slider-vertical-reversed');\n      }\n    } else {\n      $el.addClass('range-slider-horizontal');\n    } // Check for layout\n\n\n    var $barEl = $('<div class=\"range-bar\"></div>');\n    var $barActiveEl = $('<div class=\"range-bar-active\"></div>');\n    $barEl.append($barActiveEl); // Create Knobs\n    // prettier-ignore\n\n    var knobHTML = \"\\n      <div class=\\\"range-knob-wrap\\\">\\n        <div class=\\\"range-knob\\\"></div>\\n        \".concat(range.label ? '<div class=\"range-knob-label\"></div>' : '', \"\\n      </div>\\n    \");\n    var knobs = [$(knobHTML)];\n\n    if (range.dual) {\n      knobs.push($(knobHTML));\n    }\n\n    $el.append($barEl);\n    knobs.forEach(function ($knobEl) {\n      $el.append($knobEl);\n    }); // Labels\n\n    var labels = [];\n\n    if (range.label) {\n      labels.push(knobs[0].find('.range-knob-label'));\n\n      if (range.dual) {\n        labels.push(knobs[1].find('.range-knob-label'));\n      }\n    } // Scale\n\n\n    var $scaleEl;\n\n    if (range.scale && range.scaleSteps >= 1) {\n      $scaleEl = $(\"\\n        <div class=\\\"range-scale\\\">\\n          \".concat(range.renderScale(), \"\\n        </div>\\n      \"));\n      $el.append($scaleEl);\n    }\n\n    extend(range, {\n      knobs: knobs,\n      labels: labels,\n      $barEl: $barEl,\n      $barActiveEl: $barActiveEl,\n      $scaleEl: $scaleEl\n    });\n    $el[0].f7Range = range; // Touch Events\n\n    var isTouched;\n    var touchesStart = {};\n    var isScrolling;\n    var rangeOffset;\n    var rangeOffsetLeft;\n    var rangeOffsetTop;\n    var $touchedKnobEl;\n    var dualValueIndex;\n    var valueChangedByTouch;\n    var targetTouchIdentifier;\n\n    function onTouchChange() {\n      valueChangedByTouch = true;\n    }\n\n    function handleTouchStart(e) {\n      if (isTouched) return;\n\n      if (!range.params.draggableBar) {\n        if ($(e.target).closest('.range-knob').length === 0) {\n          return;\n        }\n      }\n\n      valueChangedByTouch = false;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (e.type === 'touchstart') {\n        targetTouchIdentifier = e.targetTouches[0].identifier;\n      }\n\n      isTouched = true;\n      isScrolling = undefined;\n      rangeOffset = $el.offset();\n      rangeOffsetLeft = rangeOffset.left;\n      rangeOffsetTop = rangeOffset.top;\n      var progress;\n\n      if (range.vertical) {\n        progress = (touchesStart.y - rangeOffsetTop) / range.rangeHeight;\n        if (!range.verticalReversed) progress = 1 - progress;\n      } else if (range.app.rtl) {\n        progress = (rangeOffsetLeft + range.rangeWidth - touchesStart.x) / range.rangeWidth;\n      } else {\n        progress = (touchesStart.x - rangeOffsetLeft) / range.rangeWidth;\n      }\n\n      var newValue = progress * (range.max - range.min) + range.min;\n\n      if (range.dual) {\n        if (Math.abs(range.value[0] - newValue) < Math.abs(range.value[1] - newValue)) {\n          dualValueIndex = 0;\n          $touchedKnobEl = range.knobs[0];\n          newValue = [newValue, range.value[1]];\n        } else {\n          dualValueIndex = 1;\n          $touchedKnobEl = range.knobs[1];\n          newValue = [range.value[0], newValue];\n        }\n      } else {\n        $touchedKnobEl = range.knobs[0];\n        newValue = progress * (range.max - range.min) + range.min;\n      }\n\n      nextTick(function () {\n        if (isTouched) $touchedKnobEl.addClass('range-knob-active-state');\n      }, 70);\n      range.on('change', onTouchChange);\n      range.setValue(newValue, true);\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      var pageX;\n      var pageY;\n\n      if (e.type === 'touchmove') {\n        for (var i = 0; i < e.targetTouches.length; i += 1) {\n          if (e.targetTouches[i].identifier === targetTouchIdentifier) {\n            pageX = e.targetTouches[i].pageX;\n            pageY = e.targetTouches[i].pageY;\n          }\n        }\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n\n      if (typeof pageX === 'undefined' && typeof pageY === 'undefined') return;\n\n      if (typeof isScrolling === 'undefined' && !range.vertical) {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        return;\n      }\n\n      e.preventDefault();\n      var progress;\n\n      if (range.vertical) {\n        progress = (pageY - rangeOffsetTop) / range.rangeHeight;\n        if (!range.verticalReversed) progress = 1 - progress;\n      } else if (range.app.rtl) {\n        progress = (rangeOffsetLeft + range.rangeWidth - pageX) / range.rangeWidth;\n      } else {\n        progress = (pageX - rangeOffsetLeft) / range.rangeWidth;\n      }\n\n      var newValue = progress * (range.max - range.min) + range.min;\n\n      if (range.dual) {\n        var leftValue;\n        var rightValue;\n\n        if (dualValueIndex === 0) {\n          leftValue = newValue;\n          rightValue = range.value[1];\n\n          if (leftValue > rightValue) {\n            rightValue = leftValue;\n          }\n        } else {\n          leftValue = range.value[0];\n          rightValue = newValue;\n\n          if (rightValue < leftValue) {\n            leftValue = rightValue;\n          }\n        }\n\n        newValue = [leftValue, rightValue];\n      }\n\n      range.setValue(newValue, true);\n    }\n\n    function handleTouchEnd(e) {\n      if (e.type === 'touchend') {\n        var touchEnded;\n\n        for (var i = 0; i < e.changedTouches.length; i += 1) {\n          if (e.changedTouches[i].identifier === targetTouchIdentifier) touchEnded = true;\n        }\n\n        if (!touchEnded) return;\n      }\n\n      if (!isTouched) {\n        if (isScrolling) $touchedKnobEl.removeClass('range-knob-active-state');\n        isTouched = false;\n        return;\n      }\n\n      range.off('change', onTouchChange);\n      isTouched = false;\n      $touchedKnobEl.removeClass('range-knob-active-state');\n\n      if (valueChangedByTouch && range.$inputEl && !range.dual) {\n        range.$inputEl.trigger('change');\n      }\n\n      valueChangedByTouch = false;\n\n      if (typeof range.previousValue !== 'undefined') {\n        if (range.dual && (range.previousValue[0] !== range.value[0] || range.previousValue[1] !== range.value[1]) || !range.dual && range.previousValue !== range.value) {\n          range.$el.trigger('range:changed', range.value);\n          range.emit('local::changed rangeChanged', range, range.value);\n        }\n      }\n    }\n\n    function handleResize() {\n      range.calcSize();\n      range.layout();\n    }\n\n    var parentModals;\n    var parentPanel;\n    var parentPage;\n\n    range.attachEvents = function attachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      range.$el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      app.on('tabShow', handleResize);\n      app.on('resize', handleResize);\n      parentModals = range.$el.parents('.sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast');\n      parentModals.on('modal:open', handleResize);\n      parentPanel = range.$el.parents('.panel');\n      parentPanel.on('panel:open panel:resize', handleResize);\n      parentPage = range.$el.parents('.page').eq(0);\n      parentPage.on('page:reinit', handleResize);\n    };\n\n    range.detachEvents = function detachEvents() {\n      var passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      range.$el.off(app.touchEvents.start, handleTouchStart, passive);\n      app.off('touchmove', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n      app.off('tabShow', handleResize);\n      app.off('resize', handleResize);\n\n      if (parentModals) {\n        parentModals.off('modal:open', handleResize);\n      }\n\n      if (parentPanel) {\n        parentPanel.off('panel:open panel:resize', handleResize);\n      }\n\n      if (parentPage) {\n        parentPage.off('page:reinit', handleResize);\n      }\n\n      parentModals = null;\n      parentPanel = null;\n      parentPage = null;\n    }; // Install Modules\n\n\n    range.useModules(); // Init\n\n    range.init();\n    return _possibleConstructorReturn(_this, range);\n  }\n\n  _createClass(Range, [{\n    key: \"calcSize\",\n    value: function calcSize() {\n      var range = this;\n\n      if (range.vertical) {\n        var height = range.$el.outerHeight();\n        if (height === 0) return;\n        range.rangeHeight = height;\n        range.knobHeight = range.knobs[0].outerHeight();\n      } else {\n        var width = range.$el.outerWidth();\n        if (width === 0) return;\n        range.rangeWidth = width;\n        range.knobWidth = range.knobs[0].outerWidth();\n      }\n    }\n  }, {\n    key: \"layout\",\n    value: function layout() {\n      var range = this;\n      var app = range.app,\n          knobWidth = range.knobWidth,\n          knobHeight = range.knobHeight,\n          rangeWidth = range.rangeWidth,\n          rangeHeight = range.rangeHeight,\n          min = range.min,\n          max = range.max,\n          knobs = range.knobs,\n          $barActiveEl = range.$barActiveEl,\n          value = range.value,\n          label = range.label,\n          labels = range.labels,\n          vertical = range.vertical,\n          verticalReversed = range.verticalReversed,\n          limitKnobPosition = range.limitKnobPosition;\n      var knobSize = vertical ? knobHeight : knobWidth;\n      var rangeSize = vertical ? rangeHeight : rangeWidth; // eslint-disable-next-line\n\n      var positionProperty = vertical ? verticalReversed ? 'top' : 'bottom' : app.rtl ? 'right' : 'left';\n\n      if (range.dual) {\n        var _$barActiveEl$css;\n\n        var progress = [(value[0] - min) / (max - min), (value[1] - min) / (max - min)];\n        $barActiveEl.css((_$barActiveEl$css = {}, _defineProperty(_$barActiveEl$css, positionProperty, \"\".concat(progress[0] * 100, \"%\")), _defineProperty(_$barActiveEl$css, vertical ? 'height' : 'width', \"\".concat((progress[1] - progress[0]) * 100, \"%\")), _$barActiveEl$css));\n        knobs.forEach(function ($knobEl, knobIndex) {\n          var startPos = rangeSize * progress[knobIndex];\n\n          if (limitKnobPosition) {\n            var realStartPos = rangeSize * progress[knobIndex] - knobSize / 2;\n            if (realStartPos < 0) startPos = knobSize / 2;\n            if (realStartPos + knobSize > rangeSize) startPos = rangeSize - knobSize / 2;\n          }\n\n          $knobEl.css(positionProperty, \"\".concat(startPos, \"px\"));\n          if (label) labels[knobIndex].text(range.formatLabel(value[knobIndex], labels[knobIndex][0]));\n        });\n      } else {\n        var _progress = (value - min) / (max - min);\n\n        $barActiveEl.css(vertical ? 'height' : 'width', \"\".concat(_progress * 100, \"%\"));\n        var startPos = rangeSize * _progress;\n\n        if (limitKnobPosition) {\n          var realStartPos = rangeSize * _progress - knobSize / 2;\n          if (realStartPos < 0) startPos = knobSize / 2;\n          if (realStartPos + knobSize > rangeSize) startPos = rangeSize - knobSize / 2;\n        }\n\n        knobs[0].css(positionProperty, \"\".concat(startPos, \"px\"));\n        if (label) labels[0].text(range.formatLabel(value, labels[0][0]));\n      }\n\n      if (range.dual && value.indexOf(min) >= 0 || !range.dual && value === min) {\n        range.$el.addClass('range-slider-min');\n      } else {\n        range.$el.removeClass('range-slider-min');\n      }\n\n      if (range.dual && value.indexOf(max) >= 0 || !range.dual && value === max) {\n        range.$el.addClass('range-slider-max');\n      } else {\n        range.$el.removeClass('range-slider-max');\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(newValue, byTouchMove) {\n      var range = this;\n      var step = range.step,\n          min = range.min,\n          max = range.max;\n      var valueChanged;\n      var oldValue;\n\n      if (range.dual) {\n        oldValue = [range.value[0], range.value[1]];\n        var newValues = newValue;\n        if (!Array.isArray(newValues)) newValues = [newValue, newValue];\n\n        if (newValue[0] > newValue[1]) {\n          newValues = [newValues[0], newValues[0]];\n        }\n\n        newValues = newValues.map(function (value) {\n          return Math.max(Math.min(Math.round(value / step) * step, max), min);\n        });\n\n        if (newValues[0] === range.value[0] && newValues[1] === range.value[1]) {\n          return range;\n        }\n\n        newValues.forEach(function (value, valueIndex) {\n          range.value[valueIndex] = value;\n        });\n        valueChanged = oldValue[0] !== newValues[0] || oldValue[1] !== newValues[1];\n        range.layout();\n      } else {\n        oldValue = range.value;\n        var value = Math.max(Math.min(Math.round(newValue / step) * step, max), min);\n        range.value = value;\n        range.layout();\n        valueChanged = oldValue !== value;\n      }\n\n      if (valueChanged) {\n        range.previousValue = oldValue;\n      } // Events\n\n\n      if (!valueChanged) return range;\n      range.$el.trigger('range:change', range.value);\n\n      if (range.$inputEl && !range.dual) {\n        range.$inputEl.val(range.value);\n\n        if (!byTouchMove) {\n          range.$inputEl.trigger('input change');\n        } else {\n          range.$inputEl.trigger('input');\n        }\n      }\n\n      if (!byTouchMove) {\n        range.$el.trigger('range:changed', range.value);\n        range.emit('local::changed rangeChanged', range, range.value);\n      }\n\n      range.emit('local::change rangeChange', range, range.value);\n      return range;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      return this.value;\n    }\n  }, {\n    key: \"formatLabel\",\n    value: function formatLabel(value, labelEl) {\n      var range = this;\n      if (range.params.formatLabel) return range.params.formatLabel.call(range, value, labelEl);\n      return value;\n    }\n  }, {\n    key: \"formatScaleLabel\",\n    value: function formatScaleLabel(value) {\n      var range = this;\n      if (range.params.formatScaleLabel) return range.params.formatScaleLabel.call(range, value);\n      return value;\n    }\n  }, {\n    key: \"renderScale\",\n    value: function renderScale() {\n      var range = this;\n      var app = range.app,\n          verticalReversed = range.verticalReversed,\n          vertical = range.vertical; // eslint-disable-next-line\n\n      var positionProperty = vertical ? verticalReversed ? 'top' : 'bottom' : app.rtl ? 'right' : 'left';\n      var html = '';\n      Array.from({\n        length: range.scaleSteps + 1\n      }).forEach(function (scaleEl, index) {\n        var scaleStepValue = (range.max - range.min) / range.scaleSteps;\n        var scaleValue = range.min + scaleStepValue * index;\n        var progress = (scaleValue - range.min) / (range.max - range.min);\n        html += \"<div class=\\\"range-scale-step\\\" style=\\\"\".concat(positionProperty, \": \").concat(progress * 100, \"%\\\">\").concat(range.formatScaleLabel(scaleValue), \"</div>\");\n\n        if (range.scaleSubSteps && range.scaleSubSteps > 1 && index < range.scaleSteps) {\n          Array.from({\n            length: range.scaleSubSteps - 1\n          }).forEach(function (subStepEl, subIndex) {\n            var subStep = scaleStepValue / range.scaleSubSteps;\n            var scaleSubValue = scaleValue + subStep * (subIndex + 1);\n            var subProgress = (scaleSubValue - range.min) / (range.max - range.min);\n            html += \"<div class=\\\"range-scale-step range-scale-substep\\\" style=\\\"\".concat(positionProperty, \": \").concat(subProgress * 100, \"%\\\"></div>\");\n          });\n        }\n      });\n      return html;\n    }\n  }, {\n    key: \"updateScale\",\n    value: function updateScale() {\n      var range = this;\n\n      if (!range.scale || range.scaleSteps < 1) {\n        if (range.$scaleEl) range.$scaleEl.remove();\n        delete range.$scaleEl;\n        return;\n      }\n\n      if (!range.$scaleEl) {\n        range.$scaleEl = $('<div class=\"range-scale\"></div>');\n        range.$el.append(range.$scaleEl);\n      }\n\n      range.$scaleEl.html(range.renderScale());\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var range = this;\n      range.calcSize();\n      range.layout();\n      range.attachEvents();\n      return range;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var range = this;\n      range.$el.trigger('range:beforedestroy');\n      range.emit('local::beforeDestroy rangeBeforeDestroy', range);\n      delete range.$el[0].f7Range;\n      range.detachEvents();\n      deleteProps(range);\n      range = null;\n    }\n  }]);\n\n  return Range;\n}(Framework7Class);\n\nexport default Range;","map":{"version":3,"names":["$","extend","nextTick","deleteProps","Framework7Class","getSupport","Range","app","params","range","support","defaults","el","inputEl","dual","step","label","min","max","value","draggableBar","vertical","verticalReversed","formatLabel","scale","scaleSteps","scaleSubSteps","formatScaleLabel","limitKnobPosition","theme","useModulesParams","$el","length","f7Range","dataset","split","forEach","paramName","parseFloat","valueLeft","valueRight","$inputEl","find","eq","undefined","previousValue","attr","val","addClass","$barEl","$barActiveEl","append","knobHTML","knobs","push","$knobEl","labels","$scaleEl","renderScale","isTouched","touchesStart","isScrolling","rangeOffset","rangeOffsetLeft","rangeOffsetTop","$touchedKnobEl","dualValueIndex","valueChangedByTouch","targetTouchIdentifier","onTouchChange","handleTouchStart","e","target","closest","x","type","targetTouches","pageX","y","pageY","identifier","offset","left","top","progress","rangeHeight","rtl","rangeWidth","newValue","Math","abs","on","setValue","handleTouchMove","i","preventDefault","leftValue","rightValue","handleTouchEnd","touchEnded","changedTouches","removeClass","off","trigger","emit","handleResize","calcSize","layout","parentModals","parentPanel","parentPage","attachEvents","passive","passiveListener","touchEvents","start","parents","detachEvents","useModules","init","height","outerHeight","knobHeight","width","outerWidth","knobWidth","knobSize","rangeSize","positionProperty","css","knobIndex","startPos","realStartPos","text","indexOf","byTouchMove","valueChanged","oldValue","newValues","Array","isArray","map","round","valueIndex","labelEl","call","html","from","scaleEl","index","scaleStepValue","scaleValue","subStepEl","subIndex","subStep","scaleSubValue","subProgress","remove"],"sources":["/root/Pokemon/ui/node_modules/framework7/components/range/range-class.js"],"sourcesContent":["import $ from '../../shared/dom7.js';\nimport { extend, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport { getSupport } from '../../shared/get-support.js';\n\nclass Range extends Framework7Class {\n  constructor(app, params) {\n    super(params, [app]);\n    const range = this;\n    const support = getSupport();\n    const defaults = {\n      el: null,\n      inputEl: null,\n      dual: false,\n      step: 1,\n      label: false,\n      min: 0,\n      max: 100,\n      value: 0,\n      draggableBar: true,\n      vertical: false,\n      verticalReversed: false,\n      formatLabel: null,\n      scale: false,\n      scaleSteps: 5,\n      scaleSubSteps: 0,\n      formatScaleLabel: null,\n      limitKnobPosition: app.theme === 'ios'\n    }; // Extend defaults with modules params\n\n    range.useModulesParams(defaults);\n    range.params = extend(defaults, params);\n    const el = range.params.el;\n    if (!el) return range;\n    const $el = $(el);\n    if ($el.length === 0) return range;\n    if ($el[0].f7Range) return $el[0].f7Range;\n    const dataset = $el.dataset();\n    'step min max value scaleSteps scaleSubSteps'.split(' ').forEach(paramName => {\n      if (typeof params[paramName] === 'undefined' && typeof dataset[paramName] !== 'undefined') {\n        range.params[paramName] = parseFloat(dataset[paramName]);\n      }\n    });\n    'dual label vertical verticalReversed scale'.split(' ').forEach(paramName => {\n      if (typeof params[paramName] === 'undefined' && typeof dataset[paramName] !== 'undefined') {\n        range.params[paramName] = dataset[paramName];\n      }\n    });\n\n    if (!range.params.value) {\n      if (typeof dataset.value !== 'undefined') range.params.value = dataset.value;\n\n      if (typeof dataset.valueLeft !== 'undefined' && typeof dataset.valueRight !== 'undefined') {\n        range.params.value = [parseFloat(dataset.valueLeft), parseFloat(dataset.valueRight)];\n      }\n    }\n\n    let $inputEl;\n\n    if (!range.params.dual) {\n      if (range.params.inputEl) {\n        $inputEl = $(range.params.inputEl);\n      } else if ($el.find('input[type=\"range\"]').length) {\n        $inputEl = $el.find('input[type=\"range\"]').eq(0);\n      }\n    }\n\n    const {\n      dual,\n      step,\n      label,\n      min,\n      max,\n      value,\n      vertical,\n      verticalReversed,\n      scale,\n      scaleSteps,\n      scaleSubSteps,\n      limitKnobPosition\n    } = range.params;\n    extend(range, {\n      app,\n      $el,\n      el: $el[0],\n      $inputEl,\n      inputEl: $inputEl ? $inputEl[0] : undefined,\n      dual,\n      step,\n      label,\n      min,\n      max,\n      value,\n      previousValue: value,\n      vertical,\n      verticalReversed,\n      scale,\n      scaleSteps,\n      scaleSubSteps,\n      limitKnobPosition\n    });\n\n    if ($inputEl) {\n      'step min max'.split(' ').forEach(paramName => {\n        if (!params[paramName] && $inputEl.attr(paramName)) {\n          range.params[paramName] = parseFloat($inputEl.attr(paramName));\n          range[paramName] = parseFloat($inputEl.attr(paramName));\n        }\n      });\n\n      if (typeof $inputEl.val() !== 'undefined') {\n        range.params.value = parseFloat($inputEl.val());\n        range.value = parseFloat($inputEl.val());\n      }\n    } // Dual\n\n\n    if (range.dual) {\n      $el.addClass('range-slider-dual');\n    }\n\n    if (range.label) {\n      $el.addClass('range-slider-label');\n    } // Vertical\n\n\n    if (range.vertical) {\n      $el.addClass('range-slider-vertical');\n\n      if (range.verticalReversed) {\n        $el.addClass('range-slider-vertical-reversed');\n      }\n    } else {\n      $el.addClass('range-slider-horizontal');\n    } // Check for layout\n\n\n    const $barEl = $('<div class=\"range-bar\"></div>');\n    const $barActiveEl = $('<div class=\"range-bar-active\"></div>');\n    $barEl.append($barActiveEl); // Create Knobs\n    // prettier-ignore\n\n    const knobHTML = `\n      <div class=\"range-knob-wrap\">\n        <div class=\"range-knob\"></div>\n        ${range.label ? '<div class=\"range-knob-label\"></div>' : ''}\n      </div>\n    `;\n    const knobs = [$(knobHTML)];\n\n    if (range.dual) {\n      knobs.push($(knobHTML));\n    }\n\n    $el.append($barEl);\n    knobs.forEach($knobEl => {\n      $el.append($knobEl);\n    }); // Labels\n\n    const labels = [];\n\n    if (range.label) {\n      labels.push(knobs[0].find('.range-knob-label'));\n\n      if (range.dual) {\n        labels.push(knobs[1].find('.range-knob-label'));\n      }\n    } // Scale\n\n\n    let $scaleEl;\n\n    if (range.scale && range.scaleSteps >= 1) {\n      $scaleEl = $(`\n        <div class=\"range-scale\">\n          ${range.renderScale()}\n        </div>\n      `);\n      $el.append($scaleEl);\n    }\n\n    extend(range, {\n      knobs,\n      labels,\n      $barEl,\n      $barActiveEl,\n      $scaleEl\n    });\n    $el[0].f7Range = range; // Touch Events\n\n    let isTouched;\n    const touchesStart = {};\n    let isScrolling;\n    let rangeOffset;\n    let rangeOffsetLeft;\n    let rangeOffsetTop;\n    let $touchedKnobEl;\n    let dualValueIndex;\n    let valueChangedByTouch;\n    let targetTouchIdentifier;\n\n    function onTouchChange() {\n      valueChangedByTouch = true;\n    }\n\n    function handleTouchStart(e) {\n      if (isTouched) return;\n\n      if (!range.params.draggableBar) {\n        if ($(e.target).closest('.range-knob').length === 0) {\n          return;\n        }\n      }\n\n      valueChangedByTouch = false;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (e.type === 'touchstart') {\n        targetTouchIdentifier = e.targetTouches[0].identifier;\n      }\n\n      isTouched = true;\n      isScrolling = undefined;\n      rangeOffset = $el.offset();\n      rangeOffsetLeft = rangeOffset.left;\n      rangeOffsetTop = rangeOffset.top;\n      let progress;\n\n      if (range.vertical) {\n        progress = (touchesStart.y - rangeOffsetTop) / range.rangeHeight;\n        if (!range.verticalReversed) progress = 1 - progress;\n      } else if (range.app.rtl) {\n        progress = (rangeOffsetLeft + range.rangeWidth - touchesStart.x) / range.rangeWidth;\n      } else {\n        progress = (touchesStart.x - rangeOffsetLeft) / range.rangeWidth;\n      }\n\n      let newValue = progress * (range.max - range.min) + range.min;\n\n      if (range.dual) {\n        if (Math.abs(range.value[0] - newValue) < Math.abs(range.value[1] - newValue)) {\n          dualValueIndex = 0;\n          $touchedKnobEl = range.knobs[0];\n          newValue = [newValue, range.value[1]];\n        } else {\n          dualValueIndex = 1;\n          $touchedKnobEl = range.knobs[1];\n          newValue = [range.value[0], newValue];\n        }\n      } else {\n        $touchedKnobEl = range.knobs[0];\n        newValue = progress * (range.max - range.min) + range.min;\n      }\n\n      nextTick(() => {\n        if (isTouched) $touchedKnobEl.addClass('range-knob-active-state');\n      }, 70);\n      range.on('change', onTouchChange);\n      range.setValue(newValue, true);\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      let pageX;\n      let pageY;\n\n      if (e.type === 'touchmove') {\n        for (let i = 0; i < e.targetTouches.length; i += 1) {\n          if (e.targetTouches[i].identifier === targetTouchIdentifier) {\n            pageX = e.targetTouches[i].pageX;\n            pageY = e.targetTouches[i].pageY;\n          }\n        }\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n\n      if (typeof pageX === 'undefined' && typeof pageY === 'undefined') return;\n\n      if (typeof isScrolling === 'undefined' && !range.vertical) {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      if (isScrolling) {\n        isTouched = false;\n        return;\n      }\n\n      e.preventDefault();\n      let progress;\n\n      if (range.vertical) {\n        progress = (pageY - rangeOffsetTop) / range.rangeHeight;\n        if (!range.verticalReversed) progress = 1 - progress;\n      } else if (range.app.rtl) {\n        progress = (rangeOffsetLeft + range.rangeWidth - pageX) / range.rangeWidth;\n      } else {\n        progress = (pageX - rangeOffsetLeft) / range.rangeWidth;\n      }\n\n      let newValue = progress * (range.max - range.min) + range.min;\n\n      if (range.dual) {\n        let leftValue;\n        let rightValue;\n\n        if (dualValueIndex === 0) {\n          leftValue = newValue;\n          rightValue = range.value[1];\n\n          if (leftValue > rightValue) {\n            rightValue = leftValue;\n          }\n        } else {\n          leftValue = range.value[0];\n          rightValue = newValue;\n\n          if (rightValue < leftValue) {\n            leftValue = rightValue;\n          }\n        }\n\n        newValue = [leftValue, rightValue];\n      }\n\n      range.setValue(newValue, true);\n    }\n\n    function handleTouchEnd(e) {\n      if (e.type === 'touchend') {\n        let touchEnded;\n\n        for (let i = 0; i < e.changedTouches.length; i += 1) {\n          if (e.changedTouches[i].identifier === targetTouchIdentifier) touchEnded = true;\n        }\n\n        if (!touchEnded) return;\n      }\n\n      if (!isTouched) {\n        if (isScrolling) $touchedKnobEl.removeClass('range-knob-active-state');\n        isTouched = false;\n        return;\n      }\n\n      range.off('change', onTouchChange);\n      isTouched = false;\n      $touchedKnobEl.removeClass('range-knob-active-state');\n\n      if (valueChangedByTouch && range.$inputEl && !range.dual) {\n        range.$inputEl.trigger('change');\n      }\n\n      valueChangedByTouch = false;\n\n      if (typeof range.previousValue !== 'undefined') {\n        if (range.dual && (range.previousValue[0] !== range.value[0] || range.previousValue[1] !== range.value[1]) || !range.dual && range.previousValue !== range.value) {\n          range.$el.trigger('range:changed', range.value);\n          range.emit('local::changed rangeChanged', range, range.value);\n        }\n      }\n    }\n\n    function handleResize() {\n      range.calcSize();\n      range.layout();\n    }\n\n    let parentModals;\n    let parentPanel;\n    let parentPage;\n\n    range.attachEvents = function attachEvents() {\n      const passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      range.$el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n      app.on('tabShow', handleResize);\n      app.on('resize', handleResize);\n      parentModals = range.$el.parents('.sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast');\n      parentModals.on('modal:open', handleResize);\n      parentPanel = range.$el.parents('.panel');\n      parentPanel.on('panel:open panel:resize', handleResize);\n      parentPage = range.$el.parents('.page').eq(0);\n      parentPage.on('page:reinit', handleResize);\n    };\n\n    range.detachEvents = function detachEvents() {\n      const passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      range.$el.off(app.touchEvents.start, handleTouchStart, passive);\n      app.off('touchmove', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n      app.off('tabShow', handleResize);\n      app.off('resize', handleResize);\n\n      if (parentModals) {\n        parentModals.off('modal:open', handleResize);\n      }\n\n      if (parentPanel) {\n        parentPanel.off('panel:open panel:resize', handleResize);\n      }\n\n      if (parentPage) {\n        parentPage.off('page:reinit', handleResize);\n      }\n\n      parentModals = null;\n      parentPanel = null;\n      parentPage = null;\n    }; // Install Modules\n\n\n    range.useModules(); // Init\n\n    range.init();\n    return range;\n  }\n\n  calcSize() {\n    const range = this;\n\n    if (range.vertical) {\n      const height = range.$el.outerHeight();\n      if (height === 0) return;\n      range.rangeHeight = height;\n      range.knobHeight = range.knobs[0].outerHeight();\n    } else {\n      const width = range.$el.outerWidth();\n      if (width === 0) return;\n      range.rangeWidth = width;\n      range.knobWidth = range.knobs[0].outerWidth();\n    }\n  }\n\n  layout() {\n    const range = this;\n    const {\n      app,\n      knobWidth,\n      knobHeight,\n      rangeWidth,\n      rangeHeight,\n      min,\n      max,\n      knobs,\n      $barActiveEl,\n      value,\n      label,\n      labels,\n      vertical,\n      verticalReversed,\n      limitKnobPosition\n    } = range;\n    const knobSize = vertical ? knobHeight : knobWidth;\n    const rangeSize = vertical ? rangeHeight : rangeWidth; // eslint-disable-next-line\n\n    const positionProperty = vertical ? verticalReversed ? 'top' : 'bottom' : app.rtl ? 'right' : 'left';\n\n    if (range.dual) {\n      const progress = [(value[0] - min) / (max - min), (value[1] - min) / (max - min)];\n      $barActiveEl.css({\n        [positionProperty]: `${progress[0] * 100}%`,\n        [vertical ? 'height' : 'width']: `${(progress[1] - progress[0]) * 100}%`\n      });\n      knobs.forEach(($knobEl, knobIndex) => {\n        let startPos = rangeSize * progress[knobIndex];\n\n        if (limitKnobPosition) {\n          const realStartPos = rangeSize * progress[knobIndex] - knobSize / 2;\n          if (realStartPos < 0) startPos = knobSize / 2;\n          if (realStartPos + knobSize > rangeSize) startPos = rangeSize - knobSize / 2;\n        }\n\n        $knobEl.css(positionProperty, `${startPos}px`);\n        if (label) labels[knobIndex].text(range.formatLabel(value[knobIndex], labels[knobIndex][0]));\n      });\n    } else {\n      const progress = (value - min) / (max - min);\n      $barActiveEl.css(vertical ? 'height' : 'width', `${progress * 100}%`);\n      let startPos = rangeSize * progress;\n\n      if (limitKnobPosition) {\n        const realStartPos = rangeSize * progress - knobSize / 2;\n        if (realStartPos < 0) startPos = knobSize / 2;\n        if (realStartPos + knobSize > rangeSize) startPos = rangeSize - knobSize / 2;\n      }\n\n      knobs[0].css(positionProperty, `${startPos}px`);\n      if (label) labels[0].text(range.formatLabel(value, labels[0][0]));\n    }\n\n    if (range.dual && value.indexOf(min) >= 0 || !range.dual && value === min) {\n      range.$el.addClass('range-slider-min');\n    } else {\n      range.$el.removeClass('range-slider-min');\n    }\n\n    if (range.dual && value.indexOf(max) >= 0 || !range.dual && value === max) {\n      range.$el.addClass('range-slider-max');\n    } else {\n      range.$el.removeClass('range-slider-max');\n    }\n  }\n\n  setValue(newValue, byTouchMove) {\n    const range = this;\n    const {\n      step,\n      min,\n      max\n    } = range;\n    let valueChanged;\n    let oldValue;\n\n    if (range.dual) {\n      oldValue = [range.value[0], range.value[1]];\n      let newValues = newValue;\n      if (!Array.isArray(newValues)) newValues = [newValue, newValue];\n\n      if (newValue[0] > newValue[1]) {\n        newValues = [newValues[0], newValues[0]];\n      }\n\n      newValues = newValues.map(value => Math.max(Math.min(Math.round(value / step) * step, max), min));\n\n      if (newValues[0] === range.value[0] && newValues[1] === range.value[1]) {\n        return range;\n      }\n\n      newValues.forEach((value, valueIndex) => {\n        range.value[valueIndex] = value;\n      });\n      valueChanged = oldValue[0] !== newValues[0] || oldValue[1] !== newValues[1];\n      range.layout();\n    } else {\n      oldValue = range.value;\n      const value = Math.max(Math.min(Math.round(newValue / step) * step, max), min);\n      range.value = value;\n      range.layout();\n      valueChanged = oldValue !== value;\n    }\n\n    if (valueChanged) {\n      range.previousValue = oldValue;\n    } // Events\n\n\n    if (!valueChanged) return range;\n    range.$el.trigger('range:change', range.value);\n\n    if (range.$inputEl && !range.dual) {\n      range.$inputEl.val(range.value);\n\n      if (!byTouchMove) {\n        range.$inputEl.trigger('input change');\n      } else {\n        range.$inputEl.trigger('input');\n      }\n    }\n\n    if (!byTouchMove) {\n      range.$el.trigger('range:changed', range.value);\n      range.emit('local::changed rangeChanged', range, range.value);\n    }\n\n    range.emit('local::change rangeChange', range, range.value);\n    return range;\n  }\n\n  getValue() {\n    return this.value;\n  }\n\n  formatLabel(value, labelEl) {\n    const range = this;\n    if (range.params.formatLabel) return range.params.formatLabel.call(range, value, labelEl);\n    return value;\n  }\n\n  formatScaleLabel(value) {\n    const range = this;\n    if (range.params.formatScaleLabel) return range.params.formatScaleLabel.call(range, value);\n    return value;\n  }\n\n  renderScale() {\n    const range = this;\n    const {\n      app,\n      verticalReversed,\n      vertical\n    } = range; // eslint-disable-next-line\n\n    const positionProperty = vertical ? verticalReversed ? 'top' : 'bottom' : app.rtl ? 'right' : 'left';\n    let html = '';\n    Array.from({\n      length: range.scaleSteps + 1\n    }).forEach((scaleEl, index) => {\n      const scaleStepValue = (range.max - range.min) / range.scaleSteps;\n      const scaleValue = range.min + scaleStepValue * index;\n      const progress = (scaleValue - range.min) / (range.max - range.min);\n      html += `<div class=\"range-scale-step\" style=\"${positionProperty}: ${progress * 100}%\">${range.formatScaleLabel(scaleValue)}</div>`;\n\n      if (range.scaleSubSteps && range.scaleSubSteps > 1 && index < range.scaleSteps) {\n        Array.from({\n          length: range.scaleSubSteps - 1\n        }).forEach((subStepEl, subIndex) => {\n          const subStep = scaleStepValue / range.scaleSubSteps;\n          const scaleSubValue = scaleValue + subStep * (subIndex + 1);\n          const subProgress = (scaleSubValue - range.min) / (range.max - range.min);\n          html += `<div class=\"range-scale-step range-scale-substep\" style=\"${positionProperty}: ${subProgress * 100}%\"></div>`;\n        });\n      }\n    });\n    return html;\n  }\n\n  updateScale() {\n    const range = this;\n\n    if (!range.scale || range.scaleSteps < 1) {\n      if (range.$scaleEl) range.$scaleEl.remove();\n      delete range.$scaleEl;\n      return;\n    }\n\n    if (!range.$scaleEl) {\n      range.$scaleEl = $('<div class=\"range-scale\"></div>');\n      range.$el.append(range.$scaleEl);\n    }\n\n    range.$scaleEl.html(range.renderScale());\n  }\n\n  init() {\n    const range = this;\n    range.calcSize();\n    range.layout();\n    range.attachEvents();\n    return range;\n  }\n\n  destroy() {\n    let range = this;\n    range.$el.trigger('range:beforedestroy');\n    range.emit('local::beforeDestroy rangeBeforeDestroy', range);\n    delete range.$el[0].f7Range;\n    range.detachEvents();\n    deleteProps(range);\n    range = null;\n  }\n\n}\n\nexport default Range;"],"mappings":"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"},"metadata":{},"sourceType":"module"}