{"ast":null,"code":"import $ from '../../shared/dom7.js';\nimport { bindMethods } from '../../shared/utils.js';\nvar InfiniteScroll = {\n  handle: function handle(el, e) {\n    var app = this;\n    var $el = $(el);\n    var scrollTop = $el[0].scrollTop;\n    var scrollHeight = $el[0].scrollHeight;\n    var height = $el[0].offsetHeight;\n    var distance = $el[0].getAttribute('data-infinite-distance');\n    var virtualListContainer = $el.find('.virtual-list');\n    var virtualList;\n    var onTop = $el.hasClass('infinite-scroll-top');\n    if (!distance) distance = 50;\n\n    if (typeof distance === 'string' && distance.indexOf('%') >= 0) {\n      distance = parseInt(distance, 10) / 100 * height;\n    }\n\n    if (distance > height) distance = height;\n\n    if (onTop) {\n      if (scrollTop < distance) {\n        $el.trigger('infinite', e);\n        app.emit('infinite', $el[0], e);\n      }\n    } else if (scrollTop + height >= scrollHeight - distance) {\n      if (virtualListContainer.length > 0) {\n        virtualList = virtualListContainer.eq(-1)[0].f7VirtualList;\n\n        if (virtualList && !virtualList.reachEnd && !virtualList.params.updatableScroll) {\n          return;\n        }\n      }\n\n      $el.trigger('infinite', e);\n      app.emit('infinite', $el[0], e);\n    }\n  },\n  create: function create(el) {\n    var $el = $(el);\n    var app = this;\n\n    function scrollHandler(e) {\n      app.infiniteScroll.handle(this, e);\n    }\n\n    $el.each(function (element) {\n      element.f7InfiniteScrollHandler = scrollHandler;\n      element.addEventListener('scroll', element.f7InfiniteScrollHandler);\n    });\n  },\n  destroy: function destroy(el) {\n    var $el = $(el);\n    $el.each(function (element) {\n      element.removeEventListener('scroll', element.f7InfiniteScrollHandler);\n      delete element.f7InfiniteScrollHandler;\n    });\n  }\n};\nexport default {\n  name: 'infiniteScroll',\n  create: function create() {\n    var app = this;\n    bindMethods(app, {\n      infiniteScroll: InfiniteScroll\n    });\n  },\n  on: {\n    tabMounted: function tabMounted(tabEl) {\n      var app = this;\n      var $tabEl = $(tabEl);\n      var $isEls = $tabEl.find('.infinite-scroll-content');\n      if ($tabEl.is('.infinite-scroll-content')) $isEls.add($tabEl);\n      $isEls.each(function (el) {\n        app.infiniteScroll.create(el);\n      });\n    },\n    tabBeforeRemove: function tabBeforeRemove(tabEl) {\n      var $tabEl = $(tabEl);\n      var app = this;\n      var $isEls = $tabEl.find('.infinite-scroll-content');\n      if ($tabEl.is('.infinite-scroll-content')) $isEls.add($tabEl);\n      $isEls.each(function (el) {\n        app.infiniteScroll.destroy(el);\n      });\n    },\n    pageInit: function pageInit(page) {\n      var app = this;\n      page.$el.find('.infinite-scroll-content').each(function (el) {\n        app.infiniteScroll.create(el);\n      });\n    },\n    pageBeforeRemove: function pageBeforeRemove(page) {\n      var app = this;\n      page.$el.find('.infinite-scroll-content').each(function (el) {\n        app.infiniteScroll.destroy(el);\n      });\n    }\n  }\n};","map":{"version":3,"names":["$","bindMethods","InfiniteScroll","handle","el","e","app","$el","scrollTop","scrollHeight","height","offsetHeight","distance","getAttribute","virtualListContainer","find","virtualList","onTop","hasClass","indexOf","parseInt","trigger","emit","length","eq","f7VirtualList","reachEnd","params","updatableScroll","create","scrollHandler","infiniteScroll","each","element","f7InfiniteScrollHandler","addEventListener","destroy","removeEventListener","name","on","tabMounted","tabEl","$tabEl","$isEls","is","add","tabBeforeRemove","pageInit","page","pageBeforeRemove"],"sources":["/root/Pokemon/ui/node_modules/framework7/components/infinite-scroll/infinite-scroll.js"],"sourcesContent":["import $ from '../../shared/dom7.js';\nimport { bindMethods } from '../../shared/utils.js';\nconst InfiniteScroll = {\n  handle(el, e) {\n    const app = this;\n    const $el = $(el);\n    const scrollTop = $el[0].scrollTop;\n    const scrollHeight = $el[0].scrollHeight;\n    const height = $el[0].offsetHeight;\n    let distance = $el[0].getAttribute('data-infinite-distance');\n    const virtualListContainer = $el.find('.virtual-list');\n    let virtualList;\n    const onTop = $el.hasClass('infinite-scroll-top');\n    if (!distance) distance = 50;\n\n    if (typeof distance === 'string' && distance.indexOf('%') >= 0) {\n      distance = parseInt(distance, 10) / 100 * height;\n    }\n\n    if (distance > height) distance = height;\n\n    if (onTop) {\n      if (scrollTop < distance) {\n        $el.trigger('infinite', e);\n        app.emit('infinite', $el[0], e);\n      }\n    } else if (scrollTop + height >= scrollHeight - distance) {\n      if (virtualListContainer.length > 0) {\n        virtualList = virtualListContainer.eq(-1)[0].f7VirtualList;\n\n        if (virtualList && !virtualList.reachEnd && !virtualList.params.updatableScroll) {\n          return;\n        }\n      }\n\n      $el.trigger('infinite', e);\n      app.emit('infinite', $el[0], e);\n    }\n  },\n\n  create(el) {\n    const $el = $(el);\n    const app = this;\n\n    function scrollHandler(e) {\n      app.infiniteScroll.handle(this, e);\n    }\n\n    $el.each(element => {\n      element.f7InfiniteScrollHandler = scrollHandler;\n      element.addEventListener('scroll', element.f7InfiniteScrollHandler);\n    });\n  },\n\n  destroy(el) {\n    const $el = $(el);\n    $el.each(element => {\n      element.removeEventListener('scroll', element.f7InfiniteScrollHandler);\n      delete element.f7InfiniteScrollHandler;\n    });\n  }\n\n};\nexport default {\n  name: 'infiniteScroll',\n\n  create() {\n    const app = this;\n    bindMethods(app, {\n      infiniteScroll: InfiniteScroll\n    });\n  },\n\n  on: {\n    tabMounted(tabEl) {\n      const app = this;\n      const $tabEl = $(tabEl);\n      const $isEls = $tabEl.find('.infinite-scroll-content');\n      if ($tabEl.is('.infinite-scroll-content')) $isEls.add($tabEl);\n      $isEls.each(el => {\n        app.infiniteScroll.create(el);\n      });\n    },\n\n    tabBeforeRemove(tabEl) {\n      const $tabEl = $(tabEl);\n      const app = this;\n      const $isEls = $tabEl.find('.infinite-scroll-content');\n      if ($tabEl.is('.infinite-scroll-content')) $isEls.add($tabEl);\n      $isEls.each(el => {\n        app.infiniteScroll.destroy(el);\n      });\n    },\n\n    pageInit(page) {\n      const app = this;\n      page.$el.find('.infinite-scroll-content').each(el => {\n        app.infiniteScroll.create(el);\n      });\n    },\n\n    pageBeforeRemove(page) {\n      const app = this;\n      page.$el.find('.infinite-scroll-content').each(el => {\n        app.infiniteScroll.destroy(el);\n      });\n    }\n\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}